<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Network Error Logging（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>
var source_data;

COMMON_DATA.page_state_key = 'webappsec';
COMMON_DATA.init = function(expanded){
	var options = {
//		original_url: 'https://w3c.github.io/network-error-logging/',
		original_url: 'http://www.w3.org/TR/network-error-logging/',
		spec_status: 'NOTE',
		main: 'MAIN',
		fill_text_link: '#_versions > dd, #references dd',
		alt_refs: 'references',
		ref_id_prefix: 'bib-',
//		ref_id_lowercase: true,
	};

	if(expanded) return options;

	source_data = {
		html: E('MAIN').innerHTML,
		link_map: Util.getMapping('_link_map'),
		toc_main: 'MAIN0',
		levels: 'ほぼ英語:英語主体:英語+漢字:漢字主体:カナ主体',
		level: 3,
		generate: expand
	};
	Util.switchWordsInit(source_data);

//	Util.del_j(); // checked: 2015-04-02 spec

	return options;
}

function expand(mapping1){

	var class_map = {
		h: 'header',
		hm: 'method',
		e: 'element',
		a: 'attr',
		p: 'production',
		dir: 'directive',
		rp: 'report',
//		l: 'literal',
		css: 'css',
		tnote: 'trans-note'
	};

	var tag_map = {
		c: 'code',
		hm: 'code',
		h: 'code',
		e: 'code',
		a: 'code',
		p: 'var',
		dir: 'code',
		rp: 'code',
		css: 'code',
//		l: 'code',
		v: 'var',
		i: 'i',
		s: 'samp',
		tnote: 'span'
	};

	var link_map = this.link_map;
	var nesting = '';
	var in_idl = false;
	var idl_ifc = '';

	E('MAIN').innerHTML = Util.replaceWords1(
		this.html.replace(
			/⇒|◎[^<◎]*|`(.+?)([$@\^])(\w*)/g,
			create_html
		),
		mapping1
	);

	function create_html(match, key, indicator, klass){


if(!key) {
//	var t = match.charAt(0);
	switch(match){
	case '⇒':
		nesting += '</span>';
		return '：<span class="block">';
	}//◎
	result = nesting + '<span lang="en">' + match.slice(1) + '</span>';
	nesting = '';
	return result;
}

var text = key;
var href = '';
var classname = class_map[klass];
var tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = '#bib-' + key;
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"'
	break;
case 'p': // protocol element (production)
	href = '#_' + key;
	break;
case 'tnote': 
	text = '【' + text + '】';
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}

return text;

	}
}
</script>

<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
</script>

<!--%links -->
<script type="text/plain" id="_link_map">

	＊TODO
p.absolute-URI:~IETF/rfc3986#section-4.3
p.delta-seconds:~RFC7234#section-1.2.1
p.token:~RFC7230#section-3.2.6
p.quoted-string:~RFC7230#section-3.2.6


rp.uri:#report-uri
rp.referrer:#report-referrer
rp.server-ip:#report-server-ip
rp.protocol:#report-protocol
rp.status-code:#report-status-code
rp.elapsed-time:#report-elapsed-time
rp.age:#report-age
rp.type:#report-type

dir.includeSubDomains:#dfn-includesubdomains
dir.max-age:#dfn-max-age
dir.report-uri:#dfn-report-uri

下位domain適用性:#dfn-includesubdomains
持続時間:#dfn-max-age

生成元:#dfn-origin
~JSON~obj:#dfn-json-object
~JSON文字列化:#dfn-json-stringification
~URL:#dfn-url
~network~error~obj:#dfn-network-error-object
~network~error:#dfn-network-error
h.NEL:#dfn-nel-header-field
	~NEL~header:#dfn-nel-header-field
h.Set-Cookie:~IETF/rfc6265#section-4.1
h.Content-Type:~RFC7231#section-3.1.1.5
hm.POST:~RFC7231#section-4.3.3

~NEL生成元:#dfn-nel-origin
既知の~NEL生成元:#dfn-known-nel-origin
~NEL施策:#dfn-nel-policy
~NEL:#dfn-nel

報告~URL:#dfn-report-uri
	report-uri:#dfn-report-uri
報告~本体:#dfn-report-body
報告~obj:#dfn-report-object
報告~URL集合:#dfn-set-of-report-urls
Network Error Logging ~task源:#dfn-network-error-logging-task-source


~client:https://fetch.spec.whatwg.org/#concept-request-client
~host:https://url.spec.whatwg.org/#concept-url-host
	Potentially Trustworthy:
	
	~WappSpec/powerfulfeatures/#is-origin-trustworthy
	is-origin-trustworthy:
	trustworthy origin:

信用に価し得る:#_origin-trustworthy

Referrer 施策により決定される:~REFERRER-POLICY#determine-requests-referrer

~network~protocol:https://w3c.github.io/navigation-timing/#widl-PerformanceNavigationTiming-nextHopProtocol
資源~表現:~RFC7231#section-3
~task源:~WAPI#task-source
~task:~WAPI#concept-task
素片:~URLSpec#concept-url-fragment
	~HTML-CONFORM#concept-url-fragment
~fetch:~FETCH#concept-fetch
	~HTML-CONFORM#concept-fetch
~taskを待入する:~WAPI#queue-a-task
~payload本体:~RFC7230#section-3.3
</script>



<!--%words -->
<script type="text/plain" id="words_table1">
WappSpec:https://w3c.github.io/webappsec/specs
</script>

<script type="text/plain" id="words_table">
NEL:::
URL:::
	IANA:::
	IETF Review
	ABNF:::
	HTTP:::
	HTTPS限定:HTTPS-only:~
	HTTPS:::
	TLS:::
	TCP:::
	DNS:::
	IP:::
	CORS:::

	MUST:::
必須の:REQUIRED:<em class="rfc2119">必須の</em>
必須:REQUIRED:~
	REQUIRED:::
	required:::
	OPTIONAL:::
	~MAY:::
	~NOT:::
	~SHOULD:::

	abstract:::
	この:this:~

	●netowork
header::::ヘッダ
field::::フィールド
service::::サービス
serve::::サービス供与
server::::サーバ
host::::ホスト
domain::::ドメイン
上位domain:superdomain::上位 domain:上位ドメイン
下位domain:subdomain::下位 domain:下位ドメイン
素片:fragment::~::フラグメント
message::::メッセージ
transport::::トランスポート
close::::
referrer::::リファラ
address::::アドレス
client::::クライアント
content-length::::
network::::ネットワーク
error::::エラー
	errorなく error-free:::
交換:exchange:~
protocol::::プロトコル
確立-:establish:~
tunnel::::トンネル
socket::::ソケット
redirect::::リダイレクト
loop::::ループ
method::::メソッド
proxy::::プロキシ
gateway::::ゲートウェイ
cookie::::クッキー
captive-portal:captive portal
payload::::ペイロード
web::::ウェブ
site::::サイト
routing:::経路制御:ルーティング
node::::ノード
page::::ページ
offline::::オフライン
account::::アカウント
downtime::::稼働停止期間:ダウン期間

読込-:load::読み込み::ロード
読込む:load する::読み込む::ロードする
読込み:loading::読み込み::ローディング

伝送:transmission::~
伝送-:transmit::~
問題0:issue:問題
発行0-:issue:発行
発行0:issuing:発行
応答-:respond::~::レスポンド
応答:response::~::レスポンス
要請:request::~::リクエスト
資源:resource::~:リソース
下位資源:subresource::~:下位リソース
本体:body::~::ボディ

送達-:deliver::~
送達:delivery::~

接続性:connectivity::~::コネクト性
接続:connection::~::コネクション
下層:underlying::~
送信-:send:~
受信-:receive::~
	receipt
受信:reception::~
通信-:communicate::~
合図-:signal:通知
通知-:notify:~

遅延:delay::~
蓄積:storage:~:::ストレージ

維持管理:maintenance::~
	itself:::
維持管理:maintain::~
削除:deletion:~
削除-:delete:~
所要時間:time duration:~
条態:condition::~
完了-:complete:~
誘発-:trigger::~

内容:content::~::コンテント
阻止-:block::~::ブロック
微弱:poor:~
一時的:temporary:~
拒否-:refuse:~
破棄済みの:revoked:~
到達-:reach:~
	到達できない:unreachable:~
必要性:need:~

環境設定:configuration:~
	環境設定の誤り:misconfiguration:~
一過性の:transient:~
	encoding:::
符号法:coding:~
測定-:instrument:~
特性:characteristic:~
計測-:measure:~
実時間:real-time:~:::リアルタイム
解決-:resolve:~


	●NEL／施策／処理model
navigate::::ナビゲート
navi:navigation:::ナビ
fetching::::
fetch::::
block-cookies-flag:::
lookup::::
log::::ログ
生成元:origin::~::オリジン
指令:directive::~::ディレクティブ
報告処理:reporting::~::レポート処理
報告:report::~::レポート
報告ing:reporting::報告::レポーティング
施策:policy::~:ポリシー
pinning:::
pinned:

放棄-:abandon:~
集約-:aggregate:~
集約:aggregation:~
生成-:generate:~
開始-:start:~
中止-:abort:~

登録-:register::~
登録:registration::~
登録済み:registered::~
登録済みの:registered:~
更新:update::~
格納-:store:~
既知の:known::~
既知:known::~
留める:regard する::~
留めな:regard しな::~
休止:sleep:~
時間:hour:~
超過-:exceed:~
経過-:elapse:~
時間切れに:timed out:~
timeout::時間切れ::タイムアウト
age:::
milliseconds:::ミリ秒
	mixed:::
exponential-backoff::べき乗打ち切り待機法
成功-:succeed:~
成功裡:successful:~
失敗-:fail:~
失敗:failure:~
task::::タスク
待行列:queue::待ち行列::キュー
待入する:queue する::待ち行列に入れる::キューする

	●
処理ing:processing:処理
処理:process:~
過程:process:~
組合せ:combination:~
動作-:act:~
消去-:clear:~
拒否:refuse:~
	一巡reached the end of the set

宣言-:declare::~
形式:format::~
事由:reason:~

検知-:detect:~
synthetic:::
監視:monitoring:~
地理的:geographic:~
所在:location:~
配置-:place:~
基盤:infrastructure:~
投資:investment:~
実在の:real:~
	真に:truly:~
全域的:global:~
	近:near:~
	必要:need:~
供給-:supply:~
	利用:using:~
可用:available:~
警告:warning:~

行先:destination:~
埋込んで:embed して:埋め込んで
埋込まれ:embed され:埋め込まれ


	●保安／privacy

scripting::::
malware::::マルウェア
privacy::::プライバシー
考慮-:consider:~
考慮点:considerations:~
持続的:persistent:~
追跡機能:tracker:~
公開-:expose:~
自明:trivial:~
不許可に:disallow:~
攻撃者:attacker:~
攻撃:attack:~
乗取り:hijacking:~
暗号:cipher:~
証明書:certificate:~
権限:authority:~
探査-:probe:~
	別個のdistinct
risk::::リスク
閲覧:browsing:~
履歴:history:~
保安的:secure:~::セキュア
	保安的でない:insecure:~
違反:violation:~
究明-:investigate:~
当事者主体:first-party:~
観測-:observe:~
第三者主体:third-party:~
提供者:provider:~
訪問:visit:~
格納-:store:~
軽減-:mitigate:~
識別子:identififer:~
影響0:implications:影響

	●構文
	dot-delimited:::
pattern::::パタン
出現:appearance:~
順序:order:~
順序付けら:order さ:~
出現-:appear:~
文字大小無視:case-insensitive::~
key:::
値:value:~
	値なしの:valueless:~
名前:name:~
成分:component:~
文字列:string:~
dot::::ドット
	dotted-decimal
表記法:notation:~
範囲:range:~
	four:::
10 進:decimal:~
	並び:sequence
list::::リスト
	16 進数字:hexadecimal-digit:~
記述:description:~
記述-:describe:~
無効な:invalid:~
	妥当:valid:~
構文:syntax:~
不一致:mismatch:~
日付:date:~
不適正:improper:~
区切りの:-delimited:~
区切法:delimiting:区切り方
文法:grammar:~
二重引用符:double-quote:~
	●仕様
feedback::::フィードバック
version::::バージョン
指定-:specify:~
無視-:ignore:~
制約:restriction:~
制約-:restrict:~
可能化-:enable:~
仕組み:mechanism:~
定義:definition:~
定義-:define:~
編集者草案:Editor’s Draft:~
意図-:intend:~
推奨:recommendation:~
	become:::
望-:wish:~
comment::::コメント
有意:significant:~
変更:change:~
読者:reader:~
	再読-:again-read:~
	序論:introduction:~
開発者:developer:~
改善-:improve:~
解-:understand:~
重要:important:~
側面:aspect:~
事例:case:~
scenario::::シナリオ
要求-:require:~
末端利用者:end-user:~
可用性:availability:~
	例:example:~
利用者:user:~
解決策:solution:~
提供-:provide:~
追加の:additional:~
所与の:given:与えられた
利点:advantage:~
	述-:describe:~
意味論的:semantic:~:::セマンティック
機能性:functionality:~
拡張-:extend:~
登記簿:registry:::レジストリ
任意選択:optional::~::オプショナル
省略可能:optional::~::オプショナル
整合性:consistency:~
	consistent
付録:appendix:~
	べき:should:~
問題:problem:~
解決0:solve:解決
手続き:steps:~
許容-:allow:~
共通的な:common な:よくある
正確:exact:~
実装:implementation:~
見本:sample:~
類似的:similar:~
強く:strong に:~
奨励-:encourage:~
指示-:indicate:~
暗黙的:implicit:~
	関わらず:regardless:~
謝辞:acknowledgment:~
仕事:work:~
text::::テキスト
license::::
有益な:helpful:~
寄与:contribution:~
取組む:address する:取り組む
支援:assistance:~
用語法:terminology:用語
最善の:best:~
概念:concept:~
仕様:spec:~
適合-:conform:~
適合的:conformant:適合
	全般:overall:~
要件:requirements:~
規定-:stipulate:~
	節:section:~
充足-:satisfy:~
認識-:recognize:~
意図:intent:~
未知の:unknown:~
適用性:applicability:~
適応-:accommodate:~
詳細な:detailed:~
単純な:simple:~
単純:simple:~
概して:typical に:~
典型的:typical:~
手法:method:~
判定基準:criteria:~
濫用-:abuse:~
文書:document:~
UA:user agent:UA
	~~主要な:key
fallback::::フォールバック
労力:effort:~
	基づいてbasis:::
	易くfacilitate:::

説明:explanation:~
	実践的な:hands-on:~


	●
防止-:prevent:~
遭遇-:encounter:~
配備-:deploy:~
予防策:precautions:~
	collectors
sensitive::::センシティブ
運用-:operate:~

	●未分類
JSON:
access::::アクセス
link::::リンク
click::::クリック
location-bar:location bar:::ロケーションバー
対話:interaction::~
script::::スクリプト
algo:algorithm:::アルゴリズム
data::::データ
app:application:::アプリ
performance::::パフォーマンス
missing::::
custom:::


特別な:special:~
利用:use:~
特定0の:particular:ある特定の
zero::::ゼロ
組に:couple:~
先行する:preceding:~
	opt:::
category::::カテゴリ
entity::::
source::::ソース
源:source::~::ソース
code::::コード
heuristics::::ヒューリスティックス
callback::::
garbage::::ガーベジ
収集-:collect:~
収集:collection:~
logic::::ロジック

自前の:own:~

気付く:aware する:~
気付かな:aware しな:~
	unaware:::
最悪:worst:~
正確0:accurate:正確


識別-:identify:~
再設定-:reset:~
設定-:set:~
	他の:other:~
既存の:existing:~
事前決定-:predetermine:~
部分的:partial:~

obj:object:::オブジェクト
文字列化:stringification:~
単独の:single:~
登録:registration:~
空:empty:~
画像:pixel:~
	両者:both:~
適用-:apply:~

包含-:contain:~
要素:element:~
以前の:previous:~
除去-:remove:~
集合:set:~
相対的:relative:~
代替の:alternative:~
代替:alternative:~
達成-:accomplish:~
新たな:new:~
新鮮:fresh:~
	最も新鮮:freshest:~
情報:information:~
表明-:assert:~

分類-:classify:~
型:type:~
見なさ:considere さ:~
部分集合:subset:~
結付けら:associate さ:~
結付ける:associate する:~
結付けて:associate して:~
可能0:possible:可能
織込む:account する:織り込む
等価:equivalent:~
用意-:prepare:~
属性:attribute:~
表現-:represent:~
表現:representation:~
収集者:collector:~
	収集器？
下位group:subgroup::下位グループ
配列:array:~
現在の:current:~
次0の:next:次の
即時の:immediate:~
存在-:exist:~


強いら:force さ:~
起動-:initiate:~
直接的:direct:~
入力:input:~
関連の:relevant:~
再利用:reuse:~
喪失した:missing:~

	published:::
	end::::
	委ねられdefer:::
	日間:day:::
	伝えるtell:::
	ままleft
	試み-:attempt:~
	再び試みる:reattempting:~
	介:via:~
	通じ:over:~
	すでに:already:~
	異なる:different:~
	他の場合:Otherwise:~
	同じ:same:~
	consisting:::
	longer::::
	まるごと:entirely:~
	number:::
	during:::
	whom:::
	See:::
	ever:::
	separate:::

	以外not covered:::
	follow:::
	regarding:::
	please:::
	welcome:::
	lot:::
	補助helping:::
	そのような:such:~

	何故:why:~
	生じ-:occur:~
	今日の:today:~
	上:above:~
	time::::
	見よ:see:~
	各:Each:~
	複数の:multiple:~
	秒:second:~
	前:before:~
	後:after:~
	含めて:including:~
	在る:present する:~

	利益を代表する:on behalf of
	含-:include:~
	返-:return:~
	戻って:return して:~
	~note:::
	等々:etc:~
	属-:belong:~
	必要とされる:necessary:~
	例：:e-g:~
	次の:following:~
	eight:::
	piece:::
	これらの:these:~
	残りの:remaining:~
	始め:beginning:~
	しかしながら:however:~
	Finally:::
	直後に:immediately-after:~
	多い:often:~
	多数の:dozens:~
	most:::
	それらの:those:~
	加えて:Additionally:~
	sincere:::
	thank:::
	reference:::
	normative:::
	informative:::
	もはや機能しなくなった no longer functional
	なくする cease
	限りすみやかに~as soon as
	等々~and so on

</script>


<!--%style 

-->
<style>



.report {
	color: green;
}


samp {
	white-space: nowrap;
	background: #F0F0F0;
	margin-left: 0.5em;
	margin-right: 0.5em;
}

.annoying-warning {
	border: solid 3px red;
	padding: 0.5em;
}

</style>



</head>

<body>


<div style="display:none;">
<input type="hidden" id="_page_config" value="" />
</div>

<aside class="trans-meta">
<h1>Network Error Logging 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.w3.org/">W3C</a> により，副題に日付にて
<strong >Working Group Note</strong>
として公開された
<a id="_SPEC_URL">Network Error Logging</a>
を日本語に翻訳したものです。
<strong >この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語訳は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p >
更新： <time>2016-05-31</time>
（公開：<time>2015-04-11</time> ）
</p>

<p >
このページの大部分はスクリプトにより生成されています（
古いブラウザなど，一部のブラウザには対応していません：
<span id="_GENERATING"></span>）。
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>


<header>
	<hgroup>
<h1 id="title">Network Error Logging</h1>
<h2>2016 年 5 月 24 日付 W3C Working Group Note</h2>
	</hgroup>
<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dd>http://www.w3.org/TR/2016/NOTE-network-error-logging-20160524/</dd>

	<dt title="Latest published version:">最新発行バージョン</dt>
	<dd>http://www.w3.org/TR/network-error-logging/</dd>

	<dt title="Latest editor's Draft:">編集者草案</dt>
	<dd>https://w3c.github.io/network-error-logging/</dd>

	<dt title="Previous version:">以前のバージョン</dt>
	<dd>http://www.w3.org/TR/2016/WD-network-error-logging-20160225/</dd>

	<dt title="Editors:">編集</dt>
	<dd><a href="https://www.igvita.com/">Ilya Grigorik</a>, Google, <a href="mailto:igrigorik@gmail.com">igrigorik@gmail.com</a></dd>
	<dd >Alois Reitbauer, Compuware Corp., <a href="alois.reitbauer@compuware.com">alois.reitbauer@compuware.com</a></dd> 
	<dd>Arvind Jain, Google, <a href="mailto:arvind@google.com">arvind@google.com</a> (Until January 2015)</dd>
	<dd>Jatinder Mann, Microsoft, <a href="mailto:jmann@microsoft.com">jmann@microsoft.com</a> (Until February 2014)</dd>

	<dt>Repository:</dt>
	<dd><a href="https://github.com/w3c/network-error-logging/">We are on Github.</a></dd>
	<dd><a href="https://github.com/w3c/network-error-logging/issues">File a bug.</a></dd>
	<dd><a href="https://github.com/w3c/network-error-logging/commits/gh-pages/index.html">Commit history.</a></dd>

	<dt >Mailing list:</dt>
	<dd><a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a></dd>

</dl>

<small class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
© 2016
<a href="http://www.w3.org/"><abbr>W3C</abbr></a><sup>®</sup>
(<a href="http://www.csail.mit.edu/"><abbr>MIT</abbr></a>,
<a href="http://www.ercim.eu/"><abbr>ERCIM</abbr></a>,
<a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>).
<abbr>W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
<a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
rules apply.
</small>

</header>

<div id="MAIN" style="display:none;">

	<section class="introductory" id="abstract">
<h2 title="Abstract">要約</h2>

<p>
この文書は［
開発者が，~web~appのための~network~error報告ing施策を宣言できるようにする
］ための仕組みを定義する。
~UAは、この施策を［
要請された資源を成功裡に~fetchできなくする~network~errorに遭遇したときに
報告する
］ために利用できる。
◎
This document defines a mechanism that enables developers to declare a network error reporting policy for a web application. A user agent can use this policy to report encountered network errors that prevented it from successfully fetching requested resources.
</p>

	</section>
	<section id="sotd">
<h2 title="Status of this document">この文書の位置付け</h2>

<p>
<em>この節では、発行時点における…</em>
<span class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#status" >W3C 日本語訳 共通ページ</a>
に委譲
】</span></p>


<p class="annoying-warning">
これは<strong>提案</strong>に過ぎず，予告なしに変更されることがあります。
関心のある主体は
<a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>
にて論を交わすべきです。
◎
This is a proposal and may change without any notices. Interested parties should bring discussions to the Web Platform Incubator Community Group.
</p>

<!-- 
<a href="https://www.w3.org/TR/reporting-1/">Reporting API</a>
 -->


<p>
この文書は
<a href="http://www.w3.org/2010/webperf/">Web Performance Working Group</a>
により，歴史的目的において
Working Group Note
として~~発行されました。
この文書に関する~commentがあれば，代わりに
<a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>
宛まで寄せられるよう願います。
◎
This document was published by the Web Performance Working Group as a Working Group Note for history purposes. If you wish to make comments regarding this document, please direct them to the Web Platform Incubator Community Group instead. All comments are welcome.
</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

<p>
~web~appの~performance特性を正確0に計測することは、~site開発者が，~web~appを改善する方法を解する補助として重要な側面である。
~network~errorに因る［
~app／特定0の資源
］読込-の失敗は、最悪の~scenarioである。
開発者たちがそのような失敗に取組むためには、そのような失敗が、［
いつ，どこで，何故
］生じたかを識別するために，~UAからの支援を要する。
◎
Accurately measuring performance characteristics of web applications is an important aspect in helping site developers understand how to improve their web applications. The worst case scenario is the failure to load the application, or a particular resource, due to a network error, and to address such failures the developer requires assistance from the user agent to identify when, where, and why such failures are occurring.
</p>

<p>
今日の~app開発者は、［
末端利用者における，~web~appの可用性
］についての~dataを実時間に得ることができない。
例えば、利用者が~network~errorに因り ~pageの読込みに失敗した場合
— ［
DNS ~lookupに失敗した, 接続~timeout, 接続の再設定-,
その他の事由
］など —
~site開発者は，この問題0
を検知する／に取組む
ことはできない。
人工的な監視
`<a href="http://en.wikipedia.org/wiki/Synthetic_monitoring">synthetic monitoring</a>^tnote
などの既存の手法は、事前決定された地理的~所在に監視~nodeを配置することにより，部分的な解決策を提供するが、追加の基盤~投資を要求し，実在の末端利用者にとっての可用性について，真に全域的かつ実時間に近い~dataを提供できない。
◎
Today, application developers do not have real-time web application availability data from their end users. For example, if the user fails to load the page due to a network error, such as a failed DNS lookup, a connection timeout, a reset connection, or other reasons, the site developer is unable to detect and address this issue. Existing methods, such as synthetic monitoring provide a partial solution by placing monitoring nodes in predetermined geographic locations, but require additional infrastructure investments, and cannot provide truly global and near real-time availability data for real end users.
</p>


<p>
`~NEL@
（ Network Error Logging ）は、［［
~UAが，所与の生成元に対する~network~errorを報告するときに利用できる，報告ing施策
］を，~web~appが宣言できる
］ようにする仕組みを定義することにより、この必要性に取組む。
`~NEL$の利点を採る~web~appは、報告ing施策を記述する `NEL^h HTTP 応答~headerを供給することにより，`~NEL$の利用を~~任意で~~選択してもらえる（ opt into ）ようにする。
しかる後，~UAは、［
所与の生成元に対する`~NEL$施策が可用な下で，末端利用者が その生成元からの資源の~fetchに失敗した
］ときには、~network~error報告を，［
~logにとった上で，施策にて定義される~URLへ送達する
］ことを試みる
— その送達は、最善の労力に基づいて行われ、接続性の問題0その他の事由に因り遅延されることもある。
◎
Network Error Logging (NEL) addresses this need by defining a mechanism enabling web applications to declare a reporting policy that can be used by the user agent to report network errors for a given origin. To take advantage of NEL, a web application opts into using NEL by supplying a NEL HTTP response header field that describes the reporting policy. Then, if the NEL policy is available for a given origin, and an end user fails to successfully fetch a resource from that origin, the user agent logs the network error report and attempts to deliver it to the report URL defined by the policy - the delivery is done on a best effort basis and might be delayed due to connectivity issues or other reasons.
</p>

<div class="example">
<p>
例えば、 TCP 接続が中止されたことに因り，
~UAが `https://www.example.com^s から資源の~fetchに失敗した場合、~UAは，次の様な報告を送達することにより，［
その生成元に結付けられている NEL 施策に定義されている報告 URL 
］へ通知することになるであろう：
◎
For example, if the user agent fails to fetch a resource from https://www.example.com due to an aborted TCP connection, the user agent would notify the report URL defined by the NEL policy associated with that origin, by delivering the following report:
</p>

<pre>
{
  "nel-report": [
      {
        "uri": "https://www.example.com/resource",
        "referrer": "https://referrer.com/",
        "server-ip": "123.122.121.120",
        "elapsed-time": 321,
        "age": 0,
        "type": "tcp.aborted"
      }
    ]
}
</pre>

</div>

<p>
通信される報告の，各種~fieldと形式についての説明は、
<a href="#reporting">報告処理</a>
節に見られる。
NEL 登録と報告処理~過程の より~~実践的な例は、
<a href="#examples">例</a>
節に見られる。
◎
See reporting for explanation of the communicated fields and format of the report, and examples for more hands-on examples of NEL registration and reporting process.
</p>


	</section>
	<section id="network-error-logging">

<h2 title="Network Error Logging">2. Network Error Logging</h2>

		<section id="key-concepts-and-terminology">

<h3 title="Key Concepts and Terminology">2.1. ~~主要な概念と用語法</h3>

<dl>

	<dt>`生成元@</dt>
	<dd>
Origin 仕様 `RFC6454$r により定義される。
◎
Defined by the Origin specification. [RFC6454]
</dd>

	<dt>`~JSON~obj@</dt>

	<dt>`~JSON文字列化@</dt>
	<dd>
JSON 仕様 `RFC7159$r により定義される。
◎
Defined in the JSON specification. [RFC7159]
</dd>

	<dt>`~URL@</dt>
	<dd>
`URL$r 仕様により定義される。
◎
Defined by [URL].
</dd>

</dl>

	</section>
		<section id="policy-delivery-and-processing">

<h3 title="Policy Delivery and Processing">2.2. （~serverによる）施策の送達と（~UAによる その）処理ing</h3>

<p>
`和訳を記述し易くするため、次を定義する^tnote
⇒
所与の`生成元$が
`信用に価し得る@
（ “potentially trustworthy” ）
とは、［
その生成元に［
`POWERFUL-FEATURES$r による
<a href="~WappSpec/powerfulfeatures/#is-origin-trustworthy">is origin trustworthy?</a>
~algo（生成元は信用に価し得るかどうかを~~決定する~algo
`<a href="~SECURE-CONTEXT#is-origin-trustworthy">和訳</a>^tnote
<!-- https://w3c.github.io/webappsec-secure-contexts/ -->
）
］を適用した結果
］が， <i>価し得る</i>（  <i>Potentially Trustworthy</i> ）になることを意味する。
</p>

<p>
~serverは、 HTTP 応答~header（ `NEL$h ~header ）を介することにより，
~UAへ向けて`~NEL施策$（以下， `施策^v ）を送達する。
~UAは、`~NEL施策$を~serveした生成元が：
◎
The server delivers the NEL policy to the user agent via an HTTP response header field (NEL header field). If the result of executing is-origin-trusworthy algorithm ([POWERFUL-FEATURES]) on origin that served the NEL policy is Potentially Trustworthy then the user agent MUST either:
</p>

<dl class="switch">
	<dt>`信用に価し得る$ならば：</dt>
	<dd>
<p>
その~hostが［
`既知の~NEL生成元$として，登録済みである
］かどうかに応じて，次をし~MUST：
◎
↑</p>

		<dl class="switch">
			<dt>登録済みでないならば：</dt>
			<dd>
その~hostを`既知の~NEL生成元$として登録する。
<span class="trans-note">【
加えて， `施策^v をそれに結付けて格納する。
】</span>
◎
Register the host as a known NEL origin if it is not already registered.
</dd>

			<dt>登録済みであるならば：</dt>
			<dd>
`施策^v が，~UAに格納されている施策と異なるならば
⇒
`既知の~NEL生成元$として登録済みの施策を，更新する。
◎
Update the registered policy for the known NEL origin if the provided policy is different than that already stored by the user agent.
</dd>
		</dl>
	</dd>

	<dt>他の場合：</dt>
	<dd>
`施策^v を無視し~MUST。
◎
Otherwise, if the result of the algorithm is not Potentionally Trustworthy, then the user MUST ignore the provided NEL policy.
</dd>
</dl>


			<section id="nel-header-field">

<h4 title="NEL Header Field">2.2.1. `NEL^h ~header</h4>

<p>
~UAへ
`~NEL施策@
を通信するためには、
`NEL@h
~headerが利用される。
その ABNF 構文は：
◎
The NEL header field is used to communicate the NEL policy to the user agent. The ABNF (Augmented Backus-Naur Form) syntax for the NEL header field is as follows:
</p>

<pre class="ABNF">
NEL = "NEL" ":" [ `directive$p ]  *( ";" [ `directive$p ] )

`directive@p                 = `directive-name$p [ "=" `directive-value$p ]
`directive-name@p            = `token$p
`directive-value@p           = `token$p | `quoted-string$p ; <span class="comment">`RFC7230$r, 3.2.6 節</span>
</pre>

<p >
`directive$p が指令を与える。
`directive-name$p が指令の名前を与える。
`directive-value$p が指令の値を与える。
</p>

<p>
この仕様は、 3 つの~NEL指令：
`report-uri$dir,
`max-age$dir,
`includeSubDomains$dir
を定義する。
~NEL指令~全般に課される要件は：
◎
See [RFC7230] section 3.2.6 for definitions of token and quoted-string. This specification defines three NEL directives: report-uri, max-age, and includeSubDomains. The overall requirements for directives are:
</p>

<ul>
	<li>
指令には，要求されるものと任意選択のものがある。
◎
Directive may be optional or required.
</li>
	<li>
指令の名前は、文字大小無視である。
◎
Directive names are case-insensitive.
</li>
	<li>
指令の順序は有意でない。
`ただし、同じ名前の複数の指令の順序については，下記を見よ。^tnote
◎
Directive order is not significant.
</li>
	<li>
それぞれの指令は、一つだけ指定されるべきである。
◎
Directive should be specified once.
</li>
</ul>

<p>
~UAは、未知の, または無効な指令, あるいは
この仕様に定義される構文に適合しない他の~header値~dataについては、無視し~MUST。
妥当な `NEL$h ~headerは、少なくとも，この仕様にて
“必須の”
として定義される指令すべてを包含し~MUST。
◎
User agents MUST ignore any unknown or invalid directive(s), or other header field value data, that does not conform to the syntax defined in this specification. A valid NEL header field MUST, at a minimum, contain all of the "REQUIRED" directives defined in this specification.
</p>

<ul>
	<li>
同じ `NEL$h ~headerにて，同じ名前の指令が複数個 指定された場合、~UAは，最初の宣言のみを処理して, 残りは無視し~MUST。
◎
If a directive is specified multiple times within the same NEL header field, the user agent MUST process the first declaration and ignore the rest.
</li>
	<li>
妥当な `NEL$h ~headerが複数 在る場合、~UAは，それらのうち最初のものだけ処理して, 残りは無視し~MUST。
◎
If multiple valid NEL header field's are present, the user agent MUST process the first valid header field and ignore the rest.
</li>
</ul>

<p>
［
scripting ` XSS ^tnote 攻撃による，~error報告処理の乗取り
］を軽減するため、~UAは，
`meta^e 要素を介して指定された~NEL~headerは，無視し~MUST。
`~NEL施策$は、 `NEL$h ~headerを介して送達され~MUST。
◎
The user agent MUST ignore the NEL header specified via a meta element to mitigate hijacking of error reporting via scripting attacks. The NEL policy MUST be delivered via the NEL header field.
</p>

<p class="note">注記：
`meta^e 要素に対する制約は、 `CSP$r 仕様に整合する
—
同じ事由のためのみの［
HTTP ~headerへの
報告処理 登録
］を制約している。
◎
The restriction on meta element is consistent with [CSP] specification, which restricts reporting registration to HTTP header fields only for same reasons.
</p>
				<section id="the-report-uri-directive">

<h5 title="The report-uri Directive">2.2.1.1. `report-uri^dir 指令</h5>

<p>
`report-uri@dir
指令は、~UAが~network~errorを報告するときの，送信-先~URLを指定する。
`report-uri$dir は、`~NEL施策$を登録する際には，必須の指令であり、以前の登録を除去することを意図するときは，省略可能である
— `max-age$dir を見よ。
この指令の名前と値の ABNF 文法は：
◎
The report-uri directive specifies a URL to which the user agent sends reports about network errors. The report-uri directive is a REQUIRED field to register an NEL policy, and OPTIONAL if the intent is to remove a previous registration - see max-age. The ABNF grammar for the name and value of the directive is:
</p>

<pre class="ABNF">
`directive-name$p    = "report-uri"
`directive-value$p   = 1*`absolute-URI$p
</pre>

<p>
`report-uri$dir 指令は，［
一つ以上の `absolute-URI$p
— `RFC3986$r の 4.3 節 —
を包含する，
`報告~URL集合@
］を値にとる。
各 `absolute-URI^p 値は、二重引用符の中に区切って与えられるべきである。
◎
The set of report URLs is the value of the report-uri directive, which contains one or more absolute-URI's - see [RFC3986] section 4.3. Each absolute-URI value SHOULD be delimited within double-quotes.
</p>

<p>
`報告~URL集合$内に提供された各`報告~URL$の生成元は，`信用に価し得る$もので~MUST。
~UAは、この判定基準を満たさない報告~URLを無視し~MUST。
この指令の値に指定された各~URLへ~network~error報告を送信する処理は、
<a href="#reporting">報告処理</a>
節にて定義される
◎
The result of executing the is-origin-trustworthy algorithm on origin of each report URL in the provided set of report URLs MUST return Potentially Trustworthy. Report URL's that fail this criteria MUST be ignored by the user agent. The process of sending network error reports to the specified URL's in this directive's value is defined in this documents 2.4 Reporting section.
</p>

<p class="note">注記：
~NEL報告の送達を改善するため、~appは，`report-uri^dir を［
その生成元の基盤が，~fetchされている資源の生成元と組にされてない
］ような代替に設定するべきである
— さもなければ、問題が解決0されない限り，~network~errorを報告できなくなるので。
また、［
先行する `report-uri^dir に到達できないときの，~fallback代替
］を提供するためとして，複数の `report-uri^dir を提供するべきである。
◎
To improve delivery of NEL reports the application should set report-uri to an alternative origin whose infrastructure is not coupled with the origin from which the resource is being fetched — otherwise network errors cannot be reported until the problem is solved, if ever — and provide multiple report-uri's to provide fallback alternatives if the preceding report-uri is unreachable.
</p>


				</section>
				<section id="the-max-age-directive">

<h5 title="The max-age Directive">2.2.1.2. `max-age^dir 指令</h5>

<p>
`max-age@dir
指令は，必須の指令であり、~NEL~headerの受信~後の秒~数を指定する
— その秒~数まで、~UAが［
~host（施策を どこから受信したか）を，`既知の~NEL生成元$として留める
］ような。
この指令の名前と値の ABNF 文法は：
◎
The REQUIRED max-age directive specifies the number of seconds, after the reception of the NEL header field, during which the user agent regards the host (from whom the policy was received) as a known NEL origin. The ABNF grammar for the name and value of the directive is:
</p>

<pre class="ABNF">
`directive-name$p    = "max-age"
`directive-value$p   = `delta-seconds$p ; <span class="comment">`RFC7234$r, 1.2.1 節</span>
</pre>

<p>
`max-age$dir に対する値~zero（すなわち `max-age=0^l ）は、~UAに，［
~hostを`既知の~NEL生成元$として留めない
］よう，合図する
— `includeSubDomains$dir 指令があれば，それも含めて。
◎
See [RFC7234] section 1.2.1 for definition of delta-seconds. A max-age value of zero (i.e. "max-age=0") signals the user agent to cease regarding the host as a known NEL origin, including the includeSubDomains directive if provided.
</p>

				</section>
				<section id="the-includesubdomains-directive">

<h5 title="The includeSubDomains Directive">2.2.1.3. `includeSubDomains^dir 指令</h5>

<p>
任意選択の
`includeSubDomains@dir
指令は，値なしの指令であり、もし在れば、~UAに，`~NEL施策$を［
`資源~表現$を~serveした`生成元$
］のみならず，［［
`~host$成分が［［
`資源~表現$の`生成元$
］の`~host$成分
］の下位domainである
］ような，`生成元$
］にも適用することを合図する。
◎
The OPTIONAL includeSubDomains directive is a valueless directive that, if present, signals the user agent that the NEL policy applies not only to the origin that served the resource representation, but also to any origin whose host component is a subdomain of the host component of the resource representation’s origin.
</p>

				</section>
			</section>
		</section>
		<section id="policy-storage-and-maintenance">

<h3 title="Policy Storage and Maintenance">2.3. 施策の蓄積と維持管理</h3>

<p>
HTTP ~hostは、`信用に価し得る$生成元から
`~NEL施策$を発行0することにより，自身を
`~NEL生成元@
であると宣言する。
適合的~UAは，それを~errorなく受信したなら、この~headerの処理ingにて，その~hostを
`既知の~NEL生成元@
として留める。
◎
An HTTP host declares itself an NEL origin by issuing an NEL policy, which is communicated via the NEL header field from a Potentially Trustworthy origin. Upon error-free receipt and processing of this header by a conformant user agent, the user agent regards the host as a known NEL origin.
</p>

<p>
~UAは、［
所与の`~NEL生成元$ `host^v による`~NEL施策$ `policy^v
］を［
他のどの`~NEL生成元$により発行0された，どの`~NEL施策$
］からも別々に維持管理し~MUST。
`policy^v を
更新／削除-
させられるのは `host^v のみである。
これは、［
`policy^v の新たな［
`報告~URL$／所要時間／`下位domain適用性$
］値を伴うような  `NEL$h ~header
］を~UAに送信することにより達成される。
したがって~UAは、`~NEL生成元$の利益を代表する “最も新鮮” な`~NEL施策$情報を格納し~MUST。
また，所要時間に~zeroが指定されている場合には、~UAは， `policy^v を削除し~MUST（ `policy^v に表明された `includeSubDomains$dir 指令も含めて）。
◎
The user agent MUST maintain the NEL policy of any given NEL origin separately from any NEL policies issued by any other NEL origins. Only the given NEL origin can update or cause deletion of its NEL policy. This is accomplished by sending a NEL header field to the user agent with new values for the policy report URL, time duration, and subdomain applicability. Thus, the user agent MUST store the "freshest" NEL policy information on behalf of an NEL origin, and specifying a zero time duration MUST cause the user agent to delete the NEL policy (including any asserted includeSubDomains directive) for that NEL origin.
</p>

		</section>
		<section id="reporting">

<h3 title="Reporting">2.4. 報告処理</h3>

<p>
`~network~error@
とは、［
~UAが［
接続／~protocol
］の~errorに遭遇したため，要請↔応答の交換を成功裡に完了できなくなった
］ような，条態である
これには、少なくとも［
DNS, TCP, TLS, HTTP
］の［
接続／~protocol
］~errorが含まれる。
例えば，`~network~error$は、~UAが次に失敗したときに誘発される：
◎
A network error is any condition where a connection or a protocol error is encountered by the user agent, thus preventing it from successfully completing the request-response exchange. This may include, but is not limited to DNS, TCP, TLS, and HTTP connection and protocol errors. For example, a network error is triggered when the user agent:
</p>

<ul>

	<li>
DNS 名前を解決-に失敗した。
◎
Fails to resolve the DNS name
</li>
	<li>
TCP 接続の確立-に失敗した。
◎
Fails to establish a TCP connection
</li>
	<li>
保安的 TLS ~tunnelの確立-に失敗した。
◎
Fails to establish a secure TLS tunnel
</li>
	<li>
［
TLS ~protocol~error ／
HTTP ~protocol~error ／
~socketの~timeout／
~socketの~error／
~redirect~loop
］に因り，資源の~fetchに失敗した。
◎
Fails to fetch the resource due to a TLS protocol error
◎
Fails to fetch the resource due to a HTTP protocol error
◎
Fails to fetch the resource due to a socket timeout or error
◎
Fails to fetch the resource due to a redirect loop
</li>
</ul>

<p>
~UAは、~serverからの~error応答（
<a href="~RFC7231#section-6.6">5xx status code</a>,
`RFC7231$r
）を，~network~errorに分類して, 報告して~MAY。
例えば，［
~proxyや~gatewayにおける~error ／
~service~downtime ／
他の型の~server~error
］に因り~fetchに失敗したとき、~network~error報告を誘発して~MAY。
◎
The user agent MAY classify and report server error responses (5xx status code, [RFC7231]) as network errors. For example, a network error report may be triggered when a fetch fails due to proxy or gateway errors, service downtime, and other types of server errors.
</p>

<p>
~UAは、~offlineにあると既知である下では（
<a href="~HTML5/browsers.html#dom-navigator-online">`navigator.onLine^c</a>
が `false^c を返す
），資源~fetchの失敗を`~network~error$と見なしては~MUST_NOT。
◎
The failure to fetch a resource when the user agent is known to be offline (when navigator.onLine returns false) MUST NOT be considered to be a network error.
</p>

<p class="note">注記：
上による “~network~error” の定義は、 `Fetch$rによるそれと異なる。
この仕様による`~network~error$の定義は、 `Fetch$rによる定義の部分集合である
— すなわち、上の条態すべては、
`Fetch$r 処理ingにおいて “~network~error” を誘発することになるが、［
混成~内容†に因る要請の阻止-,
CORS の失敗, 等々
］の条態は，該当しない
`誘発しない？^tnote
。
`† “mixed content” — http 内容が混在するような，https 内容^tnote
◎
Note that the above definition of "network error" is different from definition in [Fetch]. The definition of network error in this specification is a subset of [Fetch] definition - i.e. all of the above conditions would trigger a "network error" in [Fetch] processing, but conditions such as blocked requests due to mixed content, CORS failures, etc., would not.
</p>

<p>
`既知の~NEL生成元$に属する~URLに対し，`~network~error$が生じたときは、~UAは，
~errorを~logにとった上で，［［
結付けられている`~NEL生成元$の`~NEL施策$
］に定義されている`報告~URL$
］へ向けて，その~errorを送達しようと試みる~SHOULDである
— ~UAは：
◎
When a network error occurs for a URL that belongs to a known NEL origin the user agent SHOULD log the error and attempt to deliver it to the report URL defined by the NEL policy of the associated NEL origin:
</p>

<ul>
	<li>
必要とされる実時間~feedbackを提供するため、最善の労力を以って，［
可能0な限りすみやかに，~error報告を送達する
］~SHOULDである。
◎
The user agent SHOULD make best effort to deliver the error report as soon as possible to provide the necessary real-time feedback.
</li>
	<li>
接続性が
微弱である／喪失した
~accountについては、報告の送達を遅延させて~MAY（例：
微弱~serviceに因る一時的な~offline）。
◎
The user agent MAY delay delivery of the report to account for poor or missing connectivity (e.g. temporarily offline due to poor service).
</li>
	<li>
~errorが生じてから 24 時間を超過した場合, または
`報告~URL$から［
応答が返されない, または~errorが返される
］場合には、報告の送達を放棄して~MAY。
◎
The user agent MAY abandon delivery of the report if the time of error exceeds 24 hours, or if the report URL is not responding or returns an error.
</li>
	<li>
同じ`~NEL生成元$へ向けた単独の報告~内に，複数の~error報告を集約して送達して~MAY。
◎
The user agent MAY aggregate multiple error reports for the same NEL origin and deliver them in a single report.
</li>
</ul>

<p>
~UAは、
`~network~error~obj@
を生成するときには，次と等価な~algoを利用し~MUST：
◎
To generate a network error object, the user agent MUST use an algorithm equivalent to the following:
</p>

<ol>

	<li>
<p>
次に挙げる［
~key, 値
］を伴う~JSON~obj
`neterror^v を用意する：
◎
Prepare a JSON object neterror with the following keys and values:
</p>

		<dl>
			<dt>`uri@rp</dt>
			<dd>
`~network~error$に遭遇した~URL
—
`素片$成分があれば，除去する。
◎
The URL that encountered the network error, with any fragment component removed.
</dd>

			<dt>`referrer@rp</dt>
			<dd>
その`~client$に結付けられている
`Referrer 施策により決定される$
`REFERRER-POLICY$r
，要請の~referrer情報。
◎
The referrer information of the request, as determined by the Referrer policy ([REFERRER-POLICY]) associated with its client.
</dd>

			<dt>`server-ip@rp</dt>
			<dd>

<p>
可用なら、~UAが要請を送信した~hostの IP ~address。
可用でなければ、空~文字列。
◎
The IP address of the host to which the user agent sent the request, if available. Otherwise, an empty string.
</p>

				<ul>
					<li>
IPv4 ~addressで識別される~hostは、
dotted-decimal 表記法
— 範囲 0 〜 255 の 4 個の 10 進~数を "." で区切った並び —
`RFC1123$r で表現される。
◎
A host identified by an IPv4 address is represented in dotted-decimal notation (a sequence of four decimal numbers in the range 0 to 255, separated by "."). [RFC1123]
</li>
					<li>
IPv6 ~addressで識別される~hostは、順序付けられた
8 個の 16-bit 片の~list （ `x:x:x:x:x:x:x:x^c の形による並び）として表現される
— ここで、各 "x" は、 16-bit 片を表す［
1 〜 4 個の 16 進数字
］からなる）
`RFC4291$r
◎
A host identified by an IPv6 address is represented as an ordered list of eight 16-bit pieces (a sequence of x:x:x:x:x:x:x:x, where the 'x's are one to four hexadecimal digits of the eight 16-bit pieces of the address). [RFC4291]
</li>
				</ul>
			</dd>

			<dt>`protocol@rp</dt>
			<dd>
可用なら、資源を~fetchするときに利用された，［
<span title="Application Layer Protocol Negotiation">ALPN</span> Protocol ID
により識別される，`~network~protocol$
］。
可用でなければ、空~文字列。
◎
The network protocol used to fetch the resource as identified by the ALPN Protocol ID, if available. Otherwise, an empty string.
</dd>

			<dt>`status-code@rp</dt>
			<dd>
可用なら、 HTTP 応答の
<a href="~RFC7230#section-3.1.2">status-code</a>
。
可用でなければ、number 0 。
`したがって、可用なときも JSON ~data型は number になるであろう^tnote
◎
The status-code of the HTTP response, if available. Otherwise, the number 0.
</dd>

			<dt>`elapsed-time@rp</dt>
			<dd>
~UAが［
資源~fetchを開始してから，中止するまで
］に経過した~milliseconds数。
◎
The elapsed number of milliseconds between the start of the resource fetch and when it was aborted by the user agent.
</dd>

			<dt>`age@rp</dt>
			<dd>
~UAが［
要請を中止してから，~error報告を送達する時点まで
］に経過した~milliseconds数。
◎
The elapsed number of milliseconds between the time when the user agent aborted the request and when the error report is being delivered.
</dd>

			<dt>`type@rp</dt>
			<dd>

<p>
~error型の記述
— 次のいずれかの文字列をとり得る：
◎
The description of the error type, which may be one the following strings:
</p>

				<dl class="reportTypeGroup">
					<dt>`dns.unreachable^l</dt>
					<dd>
DNS ~serverに到達できなかった。
◎
DNS server is unreachable
</dd>

					<dt>`dns.name_not_resolved^l</dt>
					<dd>
DNS ~serverは応答してきたが，~addressを解決できなかった。
◎
DNS server responded but is unable to resolve the address
</dd>

					<dt>`dns.failed^l</dt>
					<dd>
上の各項に挙げた~errorに因る事由を除く，
DNS ~serverへの要請に際しての失敗。
◎
Request to the DNS server failed due to reasons not covered by previous errors
</dd>
				</dl>

				<dl class="reportTypeGroup">

					<dt>`tcp.timed_out^l</dt>
					<dd>
~serverへの TCP 接続が時間切れになった。
◎
TCP connection to the server timed out
</dd>

					<dt>`tcp.closed^l</dt>
					<dd>
TCP 接続が
~serverにより~closeされた。
◎
The TCP connection was closed by the server
</dd>

					<dt>`tcp.reset^l</dt>
					<dd>
TCP 接続が再設定された。
◎
The TCP connection was reset
</dd>

					<dt>`tcp.refused^l</dt>
					<dd>
TCP 接続は
~serverにより拒否された。
◎
The TCP connection was refused by the server
</dd>

					<dt>`tcp.aborted^l</dt>
					<dd>
TCP 接続は中止された。
◎
The TCP connection was aborted
</dd>

					<dt>`tcp.address_invalid^l</dt>
					<dd>
無効な IP ~address。
◎
The IP address is invalid
</dd>

					<dt>`tcp.address_unreachable^l</dt>
					<dd>
IP ~addressに到達できない。
◎
The IP address is unreachable
</dd>

					<dt>`tcp.failed^l</dt>
					<dd>
上の各項に挙げた~errorによるもの以外の事由に因り，
TCP 接続に失敗した。
◎
The TCP connection failed due to reasons not covered by previous errors
</dd>
				</dl>

				<dl class="reportTypeGroup">

					<dt>`tls.version_or_cipher_mismatch^l</dt>
					<dd>
~versionまたは暗号の不一致に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to version or cipher mismatch
</dd>

					<dt>`tls.bad_client_auth_cert^l</dt>
					<dd>
無効な~client証明書に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to invalid client certificate
</dd>

					<dt>`tls.cert.name_invalid^l</dt>
					<dd>
無効な名前に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to invalid name
</dd>

					<dt>`tls.cert.date_invalid^l</dt>
					<dd>
無効な証明書~日付に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to invalid certificate date
</dd>

					<dt>`tls.cert.authority_invalid^l</dt>
					<dd>
無効な発行0~権限に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to invalid issuing authority
</dd>

					<dt>`tls.cert.invalid^l</dt>
					<dd>
無効な証明書に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to invalid certificate
</dd>

					<dt>`tls.cert.revoked^l</dt>
					<dd>
破棄済みの~server証明書に因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to revoked server certificate
</dd>

					<dt>`tls.cert.pinned_key_not_in_cert_chain^l</dt>
					<dd>
~key~pinning~errorに因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to a key pinning error
</dd>

					<dt>`tls.protocol.error^l</dt>
					<dd>
TLS ~protocol~errorに因り，
TLS 接続は中止された。
◎
The TLS connection was aborted due to a TLS protocol error
</dd>

					<dt>`tls.failed^l</dt>
					<dd>
上の各項に挙げた~errorによるもの以外の事由に因り，
TLS 接続に失敗した。
◎
The TLS connection failed due to reasons not covered by previous errors
</dd>
				</dl>

				<dl class="reportTypeGroup">

					<dt>`http.protocol.error^l</dt>
					<dd>
HTTP ~protocol~errorに因り，
接続は中止された。
◎
The connection was aborted due to an HTTP protocol error
</dd>

					<dt>`http.response.invalid^l</dt>
					<dd>
<p>
応答†が空である／
content-length††に不一致がある ／
encoding†††が不適正である ／
~UAが応答を処理できなくさせるような他の条態。
◎
Response is empty, has a content-length mismatch, has improper encoding, and/or other conditions that prevent user agent from processing the response
</p>

<p class="trans-note">【†
応答の<a href="~RFC7231#section-3.3">~payload本体</a>が？
】【††
<a href="~RFC7230#section-3.3.2">`Content-Length^h</a>
】【†††
<a href="~RFC7231#section-3.1.2.1">内容~符号法</a>？
】</p>
					</dd>

					<dt>`http.response.redirect_loop^l</dt>
					<dd>
~redirect~loopが検知されたことに因り，
要請は中止された。
◎
The request was aborted due to a detected redirect loop
</dd>

					<dt>`http.failed^l</dt>
					<dd>
上の各項に挙げた HTTP ~protocolにおける~errorに因るもの以外の事由に因り，
接続に失敗した。
◎
The connection failed due to errors in HTTP protocol not covered by previous errors
</dd>
				</dl>

				<dl class="reportTypeGroup">

					<dt>`abandoned^l</dt>
					<dd>
利用者が，資源~fetchを完了する前に中止した。
◎
User aborted the resource fetch before it is complete
</dd>

					<dt>`unknown^l</dt>
					<dd>
未知の~error型。
◎
error type is unknown
</dd>
				</dl>

<p>
~UAは、上の~error型~listを~custom値で拡張して~MAY
— 例えば、新たな~protocolに適応するための，新たな~error型や,
既存のものをより詳細に記述する~errorなど。
そうする場合、~error報告の処理ingを単純かつ一貫させ易くするため、~UAは，
~dot区切りの~pattern（
<code>`[group]^v.`[optional-subgroup]^v.`[error-name]^v</code>
）に従う~SHOULDである
— 例えば、
`報告の^tnote
収集者が提供する集約は、~categoryごとに, あるいは
いくつかの下位groupに~~分別されてよい。
◎
The user agent MAY extend the above error type list with custom values - e.g. new error types to accommodate new protocols, or more detailed error descriptions of existing ones. When doing so, the user agent SHOULD follow the dot-delimited pattern ([group].[optional-subgroup].[error-name]) to facilitate simple and consistent processing of the error reports - e.g. the collector may provide aggregation by category and/or one or multiple subgroups.
</p>
			</dd>
		</dl>
	</li>
	<li>
`neterror^v を返す
◎
Return neterror.
</li>
</ol>



<p>
~UAは、~network~error報告を送信するときは，次と等価な~algoを利用し~MUST：
◎
To send network error reports, the user agent MUST use an algorithm equivalent to the following:
</p>

<ol>

	<li>
<p>
次に挙げる［
~key, 値
］を伴う~JSON~obj
`報告~obj@
を用意する：
◎
Prepare a JSON object report object with the following keys and values:
</p>

		<dl>
			<dt>`nel-report^rp</dt>
			<dd>
一つ以上の`~network~error~obj$を包含する，配列~obj。
◎
An array object containing one or more network error objects.
</dd>

		</dl>
	</li>
	<li>
`報告~本体@
は、`報告~obj$の~JSON文字列化とする。
◎
Let report body be the JSON stringification of the report object.
</li>
	<li>
<p>
`報告~URL集合$ 内の ~EACH( `報告~URL$ `報告~URL^v ) に対し：
◎
For each report URL in the set of report URLs:
</p>

		<ol>
			<li>
<p >
`報告~URL^v を`~fetch$する`~taskを待入する$
— ここで：
</p>

				<ul>
					<li>
HTTP ~methodには `POST$hm を利用する。
</li>
					<li>
`Content-Type$h ~header値は
`application/nel-report^c
にする。
</li>
					<li>
`~payload本体$は、`報告~本体$からなる。
</li>
					<li>
`報告~URL^v の生成元が［
報告を生成させた`~NEL生成元$の生成元
］と同じでない場合、~block-cookies-flagも ~ON にする。
</li>
				</ul>
<p>
この`~task$の`~task源$は、
`Network Error Logging ~task源@
とする。
</p>
◎
Queue a task to fetch report URL using HTTP method POST, with a Content-Type header field of application/nel-report, and an entity body consisting of report body. If the origin of report URL is not the same as the origin of the NEL origin for which the report is generated, the block cookies flag MUST also be set. The task source for these tasks is the Network Error Logging task source.
</li>
			<li>
~fetchに成功した場合（
<a href="~RFC7231#section-6.3">HTTP 応答~code 2xx</a>
）
⇒
残りの手続きを中止する。
◎
If the fetch is successful (2xx HTTP response code), the user agent MUST abort the remaining steps.
</li>
			<li>
HTTP 応答~code
<a href="~RFC7231#section-6.5.9">410 Gone</a>
`RFC7231$r により~fetchに失敗した場合
⇒
`報告~URL^v を`報告~URL集合$から除去して，`~NEL施策$を更新する。
◎
If the fetch failed with a 410 Gone HTTP response code ([RFC7231]), the user agent MUST update the NEL policy by removing the current report URL from the set of report URLs.
</li>
			<li>
<p>
送達を複数回 試みた後も，~fetchに失敗した場合
⇒
`報告~URL^v を`報告~URL集合$から除去して，`~NEL施策$を更新して~MAY。
◎
If the fetch failed after multiple delivery attempts the user agent MAY update the NEL policy by removing the current report URL from the set of report URLs.
</p>

<p class="note">注記：
~UAには，もはや機能しなくなった `report-uri$dir を~garbage収集することが許容されるが、~captive-portalなどの
— ~error報告の送達を一時的に防止し得るような —
共通的な失敗~事例について織込むべきである。
正確な実装~logicは、~UAに委ねられる
— そのような事例を検知するための自前の仕組みや~heuristicsを利用してよい。
◎
The user agent is allowed to garbage collect report-uri's that are no longer functional, but it should account for common failure cases such as captive portals, which may temporarily prevent it from delivering the error reports. The exact implementation logic is deferred to the user-agent, which may use own mechanisms and heuristics to detect such cases.
</p>
</li>
			<li>
`~NEL施策$の更新~時に その`報告~URL集合$が空になった場合
⇒
その`~NEL施策$を除去して，手続きを終える
◎
If the NEL policy was updated and the new NEL policy contains an empty set of report URLs the user agent MUST remove the NEL policy and abort the remaining steps.
</li>
		</ol>
<p>
~UAは、`報告~URL集合$を一巡し終えたなら，始めに戻って再び送達を試みる前に，いったん休止し~MUST
— 例えば、~exponential-backoffを利用して。
他の場合、この繰返しの次の反復へ，即時に移行し~MUST。
◎
If the user agent has reached the end of the set of report URLs, the user agent MUST sleep before returning to the beginning of the set and reattempting delivery - e.g. use exponential backoff. Otherwise, the user agent MUST attempt immediate delivery of the error report to the next report URL in the set of report URLs.
</p>

	</li>
</ol>

		</section>
		<section id="examples">

<h3 title="Examples">2.5. 例</h3>


			<section id="sample-policy-definitions">
<h4 title="Sample Policy Definitions">2.5.1. 施策~定義の見本</h4>

<div class="example"><!--Example 1-->

<pre>
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; NEL: report-uri="https://example.com/report"; max-age=2592000
</pre>

<p>
~server応答~内に提供された上の`~NEL施策$は、~UAが
`~NEL生成元$ `example.com^s に対し［
既存のものが すでにあるならば それを更新する／
そうでなければ新たな`~NEL施策$を登録する
］べきであることを指定する
— すなわち，~UAは、［
~network~errorは
`https://example.com/report^s
へ向けて報告し，その施策を 2592000 秒間（ 30 日間）適用する
］べきであることになる。
◎
The above NEL policy provided in the server response specifies that the user agent should register a new NEL policy, or update an existing one if one already exists, for the example.com NEL origin: the user agent should report network errors to https://example.com/report and the policy applies for 2592000 seconds (30 days).
</p>

</div>

<p>
上の例による登録は、応答が，`信用に価し得る$生成元から通信される場合にのみ成功することに注意
—
<a href="#policy-delivery-and-processing">施策の送達と処理ing</a>
節を見よ。
◎
Note that above registration will only succeed if the response is communicated from a Potentially Trustworthy origin - see 2.2 Policy Delivery and Processing.
</p>

<div class="example"><!--Example 2-->

<pre>
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; NEL: report-uri="https://other-origin.com/report"; max-age=2592000
</pre>

</div>

<p>
~server応答~内に提供された上の`~NEL施策$は、その前の例と類似的であるが、
~UAに，［
~network~errorの報告~先を
`https://other-origin.com/report^c
にする
］よう 伝える。
報告処理を実時間に行えるようにして，報告の送達を改善するため、上のように，［
~accessされている生成元と組にされない，代替の生成元
］を利用することが、<strong>強く奨励される</strong>。
`report-uri$dir 指令を見よ。
◎
The above NEL policy provided in the server response is similar to the previous example but tells the user agent to report network errors to https://other-origin.com/report. The use of an alternative origin that is not coupled with the origin that is being accessed is strongly encouraged to enable real-time reporting and improved report delivery - see 2.2.1.1 The report-uri Directive.
</p>

<div class="example"><!--Example 3-->

<pre>
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; NEL: report-uri="https://example.com/report" "https://other-origin.com/report"; max-age=2592000; includeSubDomains
</pre>

<p>
~server応答~内に提供された上の`~NEL施策$は、［
~UAは，~network~errorを
`https://example.com/report^s
へ向けて，あるいは そこに到達できないときは
`https://other-origin.com/report^s
へ向けて報告するべきである
］ことを指定する。
更に、施策の対象は，発行0している`~NEL生成元$の下位domainすべても含むように拡張される
—
<a href="#the-includesubdomains-directive">includeSubDomains 指令</a>
節を見よ。
◎
The above NEL policy provided in the server response specifies that the user agent should report network errors to https://example.com/report, or https://other-origin.com/report if the former is unreachable. Further, the policy is extended to all of the subdomains of the issuing NEL origin - see 2.2.1.3 The includeSubDomains Directive.
</p>

</div>

<div class="example"><!--Example 4-->

<pre>
&gt; GET / HTTP/1.1
&gt; Host: example.com

&lt; HTTP/1.1 200 OK
&lt; ...
&lt; NEL: max-age=0
</pre>

<p>
上で~server応答~内に提供された`~NEL施策$は、その `max-age$dir が~zeroにされているので、
~UAは［
`~NEL生成元$ `example.com^s, および
その下位domainすべて
］に結付けられた，現在~登録済みの`~NEL施策$を削除しなければならないことを指示する：
◎
The above NEL policy provided in the server response contains max-age set to zero, which indicates that the user agent must delete the current registered NEL policy associated with the example.com NEL origin and all of its subdomains:
</p>

<ul>

	<li>
`max-age$dir が~zeroのときは、 `includeSubDomains$dir は暗黙的である。
◎
includeSubDomains is implicit when max-age is zero
</li>
	<li>
登録済みの施策を除去するときの `report-uri$dir は、任意選択である
◎
report-uri is optional when removing a previously registered policy
</li>
</ul>

</div>
			</section>
			<section id="sample-network-error-reports">

<h4 title="Sample Network Error Reports">2.5.2. ~network~error報告の見本</h4>

<p>
この節では、~UAが［
`既知の~NEL生成元$に対し，~network~errorに遭遇した
］ときに送信し得る，~network~error報告の例を示す。
◎
This section contains an example network error report the user agent might send when a network error is encountered for a known NEL origin.
</p>

<div class="example">

<pre class="js-code">
{
  "nel-report": [
      {
        "uri": "https://www.example.com/",
        "referrer": "http://example.com/",
        "server-ip": "123.122.121.120",
        "protocol": "h2",
        "status-code": 200,
        "elapsed-time": 823,
        "age": 0,
        "type": "http.protocol.error"
      }
   ]
}
</pre>

<div class="p">
<p >
上の報告は、~UAが次を行ったことを指示する：
</p>

<ul>
	<li>
`example.com^s
から
`www.example.com^s
（`既知の~NEL生成元$）へ~navigateしようと試みて、
</li>
	<li>
その IP ~addressは
`123.122.121.120^l
に成功裡に解決され、
</li>
	<li>
`h2^l ~protocolを介して~serverから `200^l 応答を受信したが、
</li>
	<li>
交換に際し~protocol~errorに遭遇したため（ `http.protocol.error^l ），~naviを放棄することを強いられた。
</li>
	<li>
~naviを開始してから中止するまで， 823 ~milliseconds 経過し、
</li>
	<li>
最後に，この報告を~network~errorに遭遇した直後に送信した
— すなわち報告~ageは 0
</li>
</ul>

◎
The above report indicates that the user agent attempted to navigate from "example.com" to "www.example.com" (known NEL origin), which successfully resolved to the "123.122.121.120" IP address. However, while the user agent received a "200" response from the server via the "h2" protocol, it encountered a protocol error in the exchange and was forced to abandon the navigation. 823 milliseconds elapsed between the start of navigation and when the user agent aborted the navigation. Finally, the user agent sent this report immediately after the network error was encountered - i.e. the report age is 0.
</div>

<pre class="js-code">
{
  "nel-report": [
      {
        "uri": "https://widget.com/thing.js",
        "referrer": "https://www.example.com/",
        "server-ip": "234.233.232.231",
        "protocol": "",
        "status-code": 0,
        "elapsed-time": 143,
        "age": 0,
        "type": "http.dns.name_not_resolved"
      }
   ]
}
</pre>

<div class="p">
<p>
上の報告は、~UAが次を行ったことを指示する：
</p>

<ul>
	<li>
`https://widget.com/thing.js^l
へ~fetchしようと試みて、
</li>
	<li>
それは，以前に生成元 `www.example.com^l から登録された`~NEL生成元$に属しているが、
</li>
	<li>
DNS 名を解決できなかったため（ `http.dns.name_not_resolved^l ），
</li>
	<li>
143 ~milliseconds後に要請を中止した。
</li>
	<li>
`widget.com^s は，既知の~NEL生成元なので、~network~errorに遭遇した直後に、それを~logにとった上で，~network~error報告を［
その~hostの`~NEL施策$により指定された報告~URL
］へ向けて送信した
— すなわち，報告~ageは 0 。
</li>
</ul>
</div>

<p>
◎
The above report indicates that the user agent attempted to fetch "https://widget.com/thing.js", which belongs to a previously registered NEL origin, from "www.example.com" origin. However, the user agent was unable to resolve the DNS name and the request was aborted by the user agent after 143 milliseconds. Because "widget.com" is a known NEL origin, a network error report was logged and sent to the report URL specified by the NEL policy of that host immediately after the network error was encountered - i.e. the report age is 0.
</p>

</div>


			</section>
		</section>
		<section id="use-cases">

<h3 title="Use cases">2.6. 利用~事例</h3>

<section id="reporting-of-navigation-failures">

<h4 title="Reporting of Navigation Failures">2.6.1. ~navi失敗~時の報告処理</h4>

<p>
利用者により起動される~navi要請（例：
~linkの~click ／
~location-barを介する直接的な入力 ／
利用者との対話に因り~scriptから起動されるもの ／
等々）は、いくつもの事由に因り接続に失敗し得る
— DNS における失敗, TCP ~error, TLS ~protocol違反, 等々。
これらの~errorは、［
~network環境設定の誤り,
一過性の~routingの問題0,
~serverの~downtime,
~malware,
利用者に対する他の攻撃,
等々
］により~~生じ得る。
◎
A navigation request initiated by the user (e.g. via a click on a link, direct input via the location bar, script-initiated due to user interaction, etc.) may fail due any number of connectivity reasons: DNS failure, TCP error, TLS protocol violation, and so on. These errors may be caused by network misconfiguration, transient routing issues, server downtime, malware or other attacks against the user, etc.
</p>

<p>
そのような事例では、行先の~hostは，失敗した~naviに気付かないままになることが多い
— 定義により、要請が~hostの基盤まで到達したかどうかを見れず，問題を究明できないので。
これに取組むため、~hostは，［
そのような，究明できない失敗~報告がどこへ送達されるべきかを指定する
］ような `~NEL施策$を，~UAに登録できる。
◎
In such cases the destination host is often left unaware of the failed navigation since, by definition, it cannot see the request reach its infrastructure and it is unable to investigate the problem. To address this, the host can register an NEL policy with the user agent, which specifies where reports of such failures should be delivered such that they can be investigated.
</p>

			</section>
			<section id="reporting-of-first-party-subresource-fetch-failures">

<h4 title="Reporting of First-party Subresource Fetch Failures">2.6.2. 当事者主体に属する下位資源に対する~fetch失敗~時の報告処理</h4>

<p>
典型的な~appは、多数の資源を要求する。
その~fetchingは、概して［
HTML／CSS／JavaScript
］を介して起動される。
そのような資源を要請している~appは、大概は，その~fetchの失敗を観測できるが（例えば、 `onerror^c ~callbackを介して）、失敗が何故~生じたかについての，詳細な~network~error報告
— 例えば： DNS 失敗, TCP ~error, TLS ~protocol違反, 等々 —
には~accessできない。
◎
A typical application requires dozens of resources, the fetching of which is typically initiated via HTML, CSS, or JavaScript. The application requesting such resources can observe failures of most such fetches (e.g. via onerror callbacks), but it does not have access to the detailed network error report of why the failure has occurred - e.g. DNS failure, TCP error, TLS protocol violation, etc.
</p>

<p>
これに取組むため、~appは、［
~fetch中にある下位資源を持つ当事者主体~hostのための，関連の`~NEL施策$
］を，~UAに登録できる。
そのような施策が在る下では、［
~UAは、［［［
登録済みの`~NEL生成元$に結付けられている資源
］に対し，~network~errorに遭遇した
］場合に，詳細な~network~error報告を報告する
］ことを可能化する
］ことになり、~app開発者は，~errorについて究明できるようになる。
◎
To address this, the application can register relevant NEL policies with the user agent for the first-party hosts from which the subresources are being fetched. Then, if such a policy is present and a network error is encountered for a resource associated with a registered NEL origin, the user agent will report the detailed network error report and enable the application developers to investigate the error.
</p>

			</section>
			<section id="reporting-of-third-party-subresource-fetch-failures">

<h4 title="Reporting of Third-party Subresource Fetch Failures">2.6.3. 第三者主体に属する下位資源に対する~fetch失敗~時の報告処理</h4>

<p>
第三者主体により埋込まれている資源の事例では、資源の提供者は、失敗を［
測定できない／観測できない
］ことが多い。
例えば、
`example.com^s
の~site上にて，資源
`widget.com/thing.js^s
が埋込まれていて、
`example.com^s
を訪問している利用者が，~network~errorに因りそのような資源の~fetchに失敗した場合、~host
`widget.com^s
は、失敗に気付くことも，それを検知することもできない。
◎
In the case where a resource is embedded by a third party, the provider of the resource is often unable to instrument and observe the failure. For example, if example.com embeds a widget.com/thing.js resource on its site, and the user visiting example.com fails to fetch such resource due to a network error, the widget.com host is both unaware of the failure and unable to detect it.
</p>

<p>
これに取組むため、
`widget.com^s
は，その~hostのための`~NEL施策$を登録できる。
そのような施策が在る下で，登録済みの`~NEL生成元$からの資源の~fetch時に
— 当事者主体か第三者主体か, いずれの生成元から要請されているかに関わらず —
~network~errorに遭遇した場合、~UAは~network~errorを報告することになり，提供者は~errorの~~原因を究明できるようになる。
◎
To address this, widget.com can register an NEL policy for its host. Then, if such policy is present and a network error is encountered while fetching a resource — regardless of whether it is being requested from a first-party or third-party origin — from the registered NEL origin, the user agent will report the network error and enable the provider to investigate the error.
</p>

			</section>
		</section>
		<section id="privacy-considerations">
<h3 title="Privacy Considerations">2.7. ~privacyに関する考慮点</h3>

<p>
`~NEL$は、［
利用者の~network環境設定についての新たな情報
］も公開し得るような，~network~error報告も提供する。
例えば，攻撃者は、利用者の~network環境設定を探査するために~NEL報告ingを濫用することもできる。
また、［
HSTS, HPKP, ~pinned CSP 施策
］と同様に、格納される`~NEL施策$は，［
利用者ごとに異なる報告~先 URI を伴う，~custom施策を設定する
］ことにより，［［
HTTP ~cookieとの組合せ（またはそれに代わる）識別子として動作する
］ような， “supercookie”
］としても利用し得る。
◎
NEL provides network error reports that could expose new information about the user's network configuration. For example, an attacker could abuse NEL reporting to probe users network configuration. Also, similar to HSTS, HPKP, and pinned CSP policies, the stored NEL policy could be used as a "supercookie" by setting a distinct policy with a custom (per-user) reporting URI to act as an identififer in combination with (or instead of) HTTP cookies.
</p>

<p>
上述の~riskの一部を軽減するため、~NEL 登録は，`信用に価し得る$生成元に制約され、同様に~network~error報告の送達も `信用に価し得る$生成元に制約される。
これは、`~NEL$を持続的な追跡機能として自明に濫用するような，
一過性の HTTP MITM† を不許可にする。
`MIIM — Man In The Middle — 中間者^tnote
◎
To mitigate some of the above risks, NEL registration is restricted to trustworthy origins, and delivery of network error reports is similarly restricted to trustworthy origins. This disallows a transient HTTP MITM from trivially abusing NEL as a persistent tracker.
</p>

<p>
上述の制約に加えて，~UAは，次をし~MUST：
◎
In addition to above restrictions, the user agents MUST:
</p>

<ul>
	<li>
利用者が自身の閲覧~data（ ~cookie, ~site~data, 履歴, 等々）を消去したときは、格納されている `~NEL施策$も消去する。
◎
Clear the stored NEL policies when the user clears their browsing data (cookies, site data, history, etc).
</li>
	<li>
~network~error報告を送達するときは、
`Set-Cookie$h 応答~headerの処理を拒否する。
◎
Refuse to process Set-Cookie response headers when delivering network error reports.
</li>
</ul>

<p>
開発者は、 NEL を配備するとき， NEL 報告が指定された収集者に送達されることによる~privacyへの影響0を考慮する~SHOULDである。
例えば，報告は、特別な予防策を必要とするような，~sensitiveな~dataを伴う URL （例： “Capability URLs” ） を包含することもあり（ `CAPABILITY-URLS$r を見よ）、開発者には、their own `？^tnote NEL 収集者が，そのような URL を第三者主体に報告しないように運用することが要求されることもある。
◎
When deploying NEL the developer SHOULD consider privacy implications of NEL reports delivered to the specified collectors. For example, reports may contain URLs with sensitive data (e.g. "Capability URLs") that may need special precautions (see [[!CAPABILITY-URLS]]), and may require the developer to operate their own NEL collectors to prevent reporting of such URLs to third parties.
</p>


		</section>
		<section id="iana-considerations">

<h3 title="IANA Considerations">2.8. IANA に関する考慮点</h3>

<p>
恒久的~message~header登記簿は、以下の登録により更新されるべきである
`RFC3864$r ：
◎
The permanent message header field registry should be updated with the following registrations ([RFC3864]):
</p>

			<section id="nel">
<h4>2.8.1. `NEL^h</h4>

<div>
<dl>
	<dt>~header名</dt>
	<dd>`NEL$h</dd>
	<dt>適用し得る~protocol</dt>
	<dd>http</dd>
	<dt>位置付け</dt>
	<dd>標準</dd>
	<dt>作成変更管理者</dt>
	<dd>W3C</dd>
	<dt>仕様~文書</dt>
	<dd>この仕様（ `NEL$h ~headerを見よ）</dd>
</dl>

<pre lang="en">
Header field name
    NEL
Applicable protocol
    http
Status
    standard
Author/Change controller
    W3C
Specification document
    This specification (see NEL Header Field)
</pre>
</div>


			</section>
		</section>
	</section>


	<section id="acknowledgments" class="appendix">

<h2 title="Acknowledgments">A. 謝辞</h2>

<p>
この文書は
`CSP$r, `RFC6797$r
仕様の~textを，その~licenseに従って再利用している。
加えて、この仕事に有益な~commentを寄せられ，寄与された，
Thomas Tuttle,
Chris Bentzel,
Todd Reifsteck,
Aaron Heady,
Mark Nottingham
各氏に感謝する。
◎
This document reuses text from the [CSP] and [RFC6797] specification, as permitted by the licenses of those specifications. Additionally, sincere thanks to Thomas Tuttle, Chris Bentzel, Todd Reifsteck, Aaron Heady, and Mark Nottingham for their helpful comments and contributions to this work.
</p>

	</section>

</main></div><!-- id="MAIN"／MAIN0 -->

	<section id="references">

<h2 title="References">B. 参照文献</h2>

		<section id="normative-references">
<h3 title="Normative references">B.1. 文献（規範）</h3>


<dl>
	<dt>[CAPABILITY-URLS]</dt>
	<dd>Jeni Tennison. Good Practices for Capability URLs. 18 February 2014. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/capability-urls/</dd>

	<dt>[POWERFUL-FEATURES]</dt>
	<dd>Mike West; Yan Zhu. Privileged Contexts. 24 April 2015. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/powerful-features/</dd>

	<dt>[REFERRER-POLICY]</dt>
	<dd>Jochen Eisinger; Mike West. Referrer Policy. 7 August 2014. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/referrer-policy/</dd>

	<dt>[RFC3986]</dt>
	<dd>T. Berners-Lee; R. Fielding; L. Masinter. Uniform Resource Identifier (URI): Generic Syntax. January 2005. Internet Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc3986</dd>

	<dt>[RFC7230]</dt>
	<dd>R. Fielding, Ed.; J. Reschke, Ed.. Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing. June 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7230</dd>

	<dt>[RFC7234]</dt>
	<dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. Hypertext Transfer Protocol (HTTP/1.1): Caching. June 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7234</dd>

</dl>

		</section>
		<section id="informative-references">

<h3 title="Informative references">B.2. 文献（参考）</h3>

<dl>
	<dt>[CSP1]</dt>
	<dd>Brandon Sterne; Adam Barth. Content Security Policy 1.0. 19 February 2015. W3C Note.</dd>
	<dd>http://www.w3.org/TR/CSP1/</dd>

	<dt>[Fetch]</dt>
	<dd>Anne van Kesteren. Fetch Standard. Living Standard.</dd>
	<dd>https://fetch.spec.whatwg.org/</dd>

	<dt>[RFC1123]</dt>
	<dd>R. Braden, Ed.. Requirements for Internet Hosts - Application and Support. October 1989. Internet Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc1123</dd>

	<dt>[RFC3864]</dt>
	<dd>G. Klyne; M. Nottingham; J. Mogul. Registration Procedures for Message Header Fields. September 2004. Best Current Practice.</dd>
	<dd>https://tools.ietf.org/html/rfc3864</dd>

	<dt>[RFC4291]</dt>
	<dd>R. Hinden; S. Deering. IP Version 6 Addressing Architecture. February 2006. Draft Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc4291</dd>

	<dt>[RFC6454]</dt>
	<dd>A. Barth. The Web Origin Concept. December 2011. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc6454</dd>

	<dt>[RFC6797]</dt>
	<dd>J. Hodges; C. Jackson; A. Barth. HTTP Strict Transport Security (HSTS). November 2012. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc6797</dd>

	<dt>[RFC7159]</dt>
	<dd>T. Bray, Ed.. The JavaScript Object Notation (JSON) Data Interchange Format. March 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7159</dd>

	<dt>[RFC7231]</dt>
	<dd>R. Fielding, Ed.; J. Reschke, Ed.. Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content. June 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7231</dd>

	<dt>[URL]</dt>
	<dd>Anne van Kesteren; Sam Ruby. URL. 9 December 2014. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/url-1/</dd>

</dl>


		</section>
	</section>

