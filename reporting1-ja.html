<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Reporting API 1 （日本語訳）</title>


<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<!--%script -->
<script>
var source_data;


COMMON_DATA.page_state_key = 'webappsec';
COMMON_DATA.init = function(expanded){
	var options = {
//		original_url: 'http://www.w3.org/TR/reporting-1/',
		original_url: 'https://www.w3.org/TR/reporting-1/',
		spec_status: 'NOTE',
		main: 'MAIN',
		fill_text_link: '#_versions > dd, #references dd',
		alt_refs: 'references',
		ref_id_prefix: 'biblio-',
		ref_id_lowercase: true,
	};

	if(expanded) return options;

	source_data = {
		html: E('MAIN').innerHTML,
		link_map: Util.getMapping('_link_map'),
		levels: 'ほぼ英語:英語主体:英語+漢字:漢字主体:カナ主体',
		level: 3,
		generate: expand
	};
	Util.switchWordsInit(source_data);

//	Util.del_j(); //checked 160607 spec

	return options;
}

function expand(mapping1){
	var link_map = this.link_map;
	var nesting = '';
	var class_map = {
		P: 'production', // protocol element
		dir: 'directive',
		st: 'status',
		h: 'header',
		E: 'error',
		tnote: 'trans-note',
	};
	var tag_map = {
		p: 'var',
		P: 'code',
		dir: 'code',
		h: 'code',
		I: 'code',
		m: 'code',
		mb: 'code',
		E: 'code',
		v: 'var',
		st: 'code',
		c: 'code',
		s: 'samp',
		i: 'i',
		tnote: 'span'
	}

	E('MAIN').innerHTML = Util.replaceWords1(
		this.html.replace(
			/◎[^`<◎]*|⇒|【.*?】|%[\u4E00-\u9FFF~\w\-]+|`(.*?)([$@^])(\w*)/g,
			create_html
		),
		mapping1
	);

// 目次構築
	Util.rebuildToc('MAIN0', '_toc_list0');

	function create_html(match, key, indicator, klass){

if(!indicator) {
	switch(match.charAt(0)){
	case '%':
		return '<var>' + match.slice(1) + '</var>'
	case '【':
		return '<span class="trans-note">' + match + '<\/span>'
	case '⇒':
		nesting += '<\/span>';
		return '：<span class="block">';
	}
	//◎
	var result = nesting + '<span lang="en">' + match.slice(1).trim() + '<\/span>';
	nesting = '';
	return result;
}

var text = key;
var href = '';
//	var href = link_map[klass ? (klass + '.' + key) : key] || '';
var classname = class_map[klass];
var tag = tag_map[klass];

switch(klass){
case '': // plain
	if(indicator === '^') return mapping1[key];// remap
	break;
case 'r': // 文献
	text = '[' + key + ']';
	href = '#biblio-' + key.toLowerCase();
	break;
case 'l': //literal
	return '"<code class="literal">' + key +'</code>"'
	break;
default:
//		console.log(match);
	break;
//	return match;
}

if(tag) {
	text = '<' + tag +
		(classname ? ' class="' + classname + '">' : '>') +
		text + '</' + tag + '>';
}

if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
//		href = href_data_map[key] || href;
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;

	}
}
</script>


<!--%語彙 -->
<script type="text/plain" id="words_table">

ASCII:
ABNF:
API:
CSP:
ECMAScript:
HPKP:
HTTP:
HTTPS:
JSON:
URL:
	Key Pinning:
	MegaCorp:
	:
	W3C

address::::アドレス
boolean:
number:
string:
bug::::バグ
call::::
collection::::コレクション
data::::データ
flag::::フラグ
index::::
instance::::インスタンス
item::::アイテム
list::::リスト
map::::
member::::メンバ
method::::メソッド
mode::::モード
obj:object:::オブジェクト
object:
page::::ページ

privacy::::プライバシー
prop:property:::プロパティ
risk::::リスク
script::::スクリプト
seem::::
text::::テキスト
有価値:valuable::~
website::::ウェブサイト
web::::ウェブ

	●仕様
UA:user agent:UA
algo:algorithm:::アルゴリズム
comment::::コメント
feedback::::フィードバック
framework::::フレームワーク
platform::::プラットフォーム
support::::サポート
system::::システム
vendor::::ベンダ
version::::バージョン
best-effort:best effort
	下位節:subsection:~
不必要な:unnecessary:~
事例:case:~
事由:reason:~
今日の:today:~
仕様:spec:~
仕組み:mechanism:~
	作業:working:~
使役-:employ:~

制御-:control:~
利用者:user:~
勧告:Recommendation:~
協同する:cooperative:~
単独の:single:~
単純:simple:~
	単純に:simply:~
取扱う:handle する:取り扱う
可能0:possible:可能
可能性:possibility:~
含意:implication:~
一意:unique:~
	一時的な:temporary:~
一般:general:~
任意の:arbitrary:~

体験:experience:~
例:example:~
依存-:depend:~
依拠-:rely:~
	依拠できない:unreliable:~

	依然として:still:~
保証-:guarantee:~
便益:benefit:~
修正-:fix:~
修正:fixing:~
俯瞰-:overview:~
念頭:mind:~
恒久的:permanent:~
情報:information:~
意味-:mean:~
意図-:intend:~
	意図されない:unintentional:~
所与の:given:与えられた
手続き:steps:~
段:step:~
奨励-:encourage:~
学習-:learn:~
安定的:stable:~
差異:difference:~
影響0:impact:影響
影響0ing:impacting:影響
特定0の:particular:ある特定の
特色機能-特有の:feature-specific:~
特色機能:feature:~
維持管理-:maintain:~
保守-:maintain:~
	結果:result:~
考慮点:considerations:~
考慮-:consider:~
能:ability:機能
草案:Draft:~
見做され:assume され:~
見本:sample:~
規則:rule:~
解釈-:interpret:~
適合:conformant:~
適度な:reasonable:~
適当:reasonable:~
適用-:apply:~
	適用し得る:applicable:~
	避けれる:avoid できる:~
関係性:relationship:~
関連の:relevant:~
開発者:developer:~
可視:visible:~
定義-:define:~
定義0の:-defined:定義の
実装:implementation:~
実装者:implementer:~
容認-:grant:~
	促進-:grant:~
方式:manner:~
既存の:existing:~
既知の:known:~
明示的:explicit:~
最善:best:~
有意:significant:~
有用:useful:~
期待-:expect:~
条況:condition:~
概念:concept:~
標準:standard:~
汎的:generic:汎用
注意深く:careful に:~
活動:activity:~
用語:term:~
登記簿:registry:::レジストリ
登録:registration:~
目指す:aim:~
目的0:purpose:目的
知識:knowledge:~
追加-:add:~
	追加:addition:~
	追加の:additional:~
指図-:instruct:~
指定-:specify:~
却下-:reject:~
将来:future:~
提供-:provide:~
一貫する:consistent な:~
確保-:ensure:~
信奉-:espouse:~
有権者:constituencies:~

	おそらく:perhaps::::
	まず間違いなく:certainly
	頭から:in the first place
	過度に:unreasonable amount:~
	関わらず:regardless:~
	類するもの:similar:~
	何らかの類の:some sort of
	しばらくの間:little while
	何か不具合があれば:things go badly
	取りこぼされる:dropped on the floor
	とはいえ、／それでも、That said
	もちろん:of course,
	~~十分にあり得る:quite possible
	実の:real
	現状:status quo
	誰:everyone:~
	述-:describe:~
	決める:decide:~
	様々な:various:~
	総体として:In the aggregate:~
	良い:good:~
	欲する:desire する:~
	求める:want:~
	個々の:individual:~
	他の:other:~
	含-:include:~
	在-:present:~
	~~一定に:stable:~
	~~仕事:job:~
	~~記述~spell~out
	十分:enough:~
	則って:accordingly:~
	具体例:concrete example
	別の:another:~
	別々の:distinct:~
	利用:use:~
	利用:using:~
	助ける:help:~
	努める:make effort:~
	あてがわれ:assign:~
	この:this:~
	これらの:these:~
	しかしながら:however:~
	すべての:all:~
	そのような:such:~
	それらの:those:~
	べき:should:~
	まるごと:entirely:~
	やりとり:interact:~
	ゆらぎ:jitter:~
	より低い:lower:~
	より良く:better:~
	上:above:~
	与える:give:~
	両者:both:~
	必要:need:~
	落とす:drop する:~
	見よ:see:~
	介:via:~
	付きの-tagged
	代わり:instead:~
	多い:often:~
	厳密的:strict sense
	価値提案:value proposition
	大雑把に言えば:broad strokes.


	●保安
opt-into::::オプトイン
opt-out::::オプトイン
capability::::
cost::::コスト
cross-site::::クロスサイト
fingerprinting::::
保安:security::~:セキュリティ
非保安的:insecure::保安的でない:セキュアでない
保安的:secure::~:セキュア
防壁:defense:~
防止-:prevent:~
露わに:reveal:~
履歴:history:~
悪化-:worse:~
悪意度:maliciousness:~
散布:fan-out:~
漏洩-:leak:~
漏洩:leakage:~
相関付け:correlation:~
警戒:alert:~
	警戒を促す:alerting:~
資質:nature:~
軽減-:mitigate:~
軽減策:mitigation:~
追跡-:track:~
追跡:tracking:~
攻撃:attack:~
境界:boundaries:~
不能化-:disable:~
不能化法:disabling:~


	●network
fetch::::
host::::ホスト
header::::ヘッダ
message::::メッセージ
network::::ネットワーク
password::::パスワード
username::::ユーザ名
server::::サーバ
site::::サイト
status::::ステータス
ok:
main:
上位domain:superdomain:::上位ドメイン
下位domain:subdomain:::下位ドメイン
応答:response::~::レスポンス
応答-:respond::~::レスポンド
要請:request::~::リクエスト
行先:destination::~
素片:fragment::~::フラグメント
素片除外:exclude fragment::~::フラグメント除外
資格証:credential::資格証明情報::クレデンシャル
資源:resource::~:リソース
本体:body::~:ボディ
起動元:initiator::~
送信-:send::~
送信:sending::~
受信-:receive::~
送達-:deliver::~
送達:delivery::~
生成元:origin::~::オリジン
同一生成元:same-origin::~::同一オリジン
非同一生成元:cross-origin::~::クロスオリジン


	●報告処理
cache::::キャッシュ
client::::クライアント

時計:clock::~::クロック
error::::エラー
	exponential backoff
fallback::::フォールバック
group::::グループ
pair::::ペア
protocol::::プロトコル
random::::ランダム
randomize::::ランダム化
schedule::::スケジュール
skew:::調整::スキュー
skip-service-worker::::
task::::タスク
url::::
ttl::::
unix-epoch:unix epoch
window::::
milliseconds::::ミリ秒数
報告:report::~::レポート
	報告ing:reporting::~::レポート
報告用:reporting::~::レポート用
報告処理:reporting::~::レポート処理
報告先:reporting endopoint::~::レポート先
端点:endpoint::~::エンドポイント

	適時に:timely-manner で:~
	信用に価し得る:potentially-trustworthy:~
優先度:priority:~
	prioritizing:~
	prioritize
粒度:granularity:~

非合致:Does Not Match::合致しない::マッチしない
合致es:Matches::合致する::マッチする
合致-:match::~::マッチ
指向ける:direct する:指し向ける
再試行:retry:~
処理待ち:pending:~
処理待ちの:pending:~

増やす:increase する:~
失効-:expire:~
失敗-:fail:~
失敗数:failures:~
失敗:failure:~
失敗時回復:failover:~
予備:backup:~
待機-:wait:~
成功-:succeed:~
成功裡:successful:~
再試行時刻:retry-after::~

garbage::::ガーベジ
存続期間:lifetime:~
定期的:periodical:~
巡回-:walk through:~
未来:future:~

収集:collection:~
収集-:collect:~
破棄-:discard:~
抽出-:extract:~
格納-:store:~
蓄積:storage:~
無視-:ignore:~
記録-:record:~
衝突-:crush:~
削除-:delete:~
挿入-:insert:~
更新:update:~
更新-:update:~
保留-:withhold:~

構文解析:parse::~::パース
構文解析器:parser::~::パーサ
直列化-:serialize::~::シリアライズ
直列化:serialization::~::シリアル化
直列化可能な:serializable::~::シリアライズ可能
直列化器:serializer::~::シリアライザ
直列化形の:serialized::~::シリアライズされた

帯域内:in-band:~
帯域外:out-of-band:~
帯域幅:bandwidth:~
有効:valid:~
	期間:period:~
未知の:unknown:~
	均等にふり分ける:even distribution:~
所在:location:~

待行列:queue::待ち行列::キュー
待入する:queue する::待ち行列に入れる::キューする
待入され:queue され::待ち行列に入れられ::キューされ
待入した:queue した::待ち行列に入れた::キューした
	待行列［に入れる／から取り除く］:Enqueue and dequeue

素早く:quick に:~
試みる:attempt する:~
試みた:attempt した:~

剥取られ:strip され:剥ぎ取られ
	一括して:en masse
	一週間:week:~
	この時点で／directly::::
	先にくり上げるpreempt::::
	高速:fast::::
	時点:point
	したて:directly after
	軽く:cheap
	兼ね合い:balanced::::
出自者:originator:~


	●未分類（動詞）
値:value:~
名:name:~
名前:name:~
命名-:name:~
変更-:change:~
構築-:construct:~
消去-:clear:~
消去法:clearing:~
生成-:generate:~
生成:generation:~
除去-:remove:~
公開-:expose:~
公開ing:exposing:~
処理-:process:~
処理:processing:~
分散-:distribute:~
初期:initial:~
初期化-:initialize:~
到達-:reach:~
包含-:contain:~
可能化-:enable:~
存在-:exist:~
宣言-:declare:~
実行-:execute:~
検索取得-:retrieve:~
消費-:consume:~
省略-:omit:~
解決-:resolve:~
許容-:allow:~
表現-:represent:~
読込-:load:~
読込み:loading:~
超過-:exceed:~
延期-:delay:~
違反:violation:~
飛ばさ:skip さ:~

	●未分類
不透明な:opaque:~
付加-:append:~
伝送:transmission:~
作成-:create:~
作成時の:creation:~
作成時刻:creation:~
現在:currently:~
現在の:current:~
局所:local::~::ローカル
属性:attribute:~
整数:integer:~
文字列:string:~
文字大小無視:case-insensitive:~
文書:document:~
文法:grammar:~

文脈:context:~
文脈的:contextual:~
新たな:new:~
時刻印:timestamp:~
時刻:time:~
流通:traffic:~
状態:state:~
環境:environment:~
相対的:relative:~
種別:type:~
穴:hole:~
空:empty:~
結付けら:associate さ:結び付けら
結付ける:associate する:結び付ける
結付けれ:associate でき:結び付けれ
絶対的な:absolute:~
複製:copy:~
計算法:calculus:~
訪問:visit:~
設定
設定群:settings:~
負荷:load:~
連続して:consecutive に:~
過去:past:~
配列:array:~
開かれ:open され:~
間接的:indirect:~
直接的:direct:~
閲覧:browsing:~
閾値:threshold:~
集合:set:~
集合:set0:~
非同期に:asynchronously:~
順序:order:~
標的に:target:~
動作:action:~

	取り出して:grab:~
	各:each:~
	同じ:same:~
	対象:subject:~
	後:after:~
	量:amount:~
	等々:etc:~
	最初の:first:~
	楽しむ:enjoy:~
	楽しめる:enjoyable:~
	秒:second:~
	複数の:multiple:~
	負:negative:~
	返-:return:~
	一部:subset:~
	abstract::::
	across::::
	against::::
	around::::
	badly::::
	based::::
	basis::::
	become::::
	beyond::::
	broad::::
	certain::::
	course::::
	day::::
	deal::::
	did::::
	discussion::::
	~~範囲:extent::::
	field::::
	follow::::
	found::::
	go::::
	herd::::
	immunity::::
	introduction::::
	issue::::
	itself::::
	later::::
	lead::::
	little::::
	longer::::
	main::::
	monkey::::
	加えて:moreover::::
	most::::
	note::::
	noted::::

	obtain::::
	ought::::
	patching::::
	please::::
	potential::::
	potentially::::
	proposition::::
	published::::
	公共性に関わる:a question of commons
	queuing::::
	quite::::
	quo::::
	raise::::
	real::::
	remain::::
	said::::
	scheduling::::
	scripting::::
	similarly::::
	small::::
	something::::
	sort::::
	stroke::::
	talk::::
	themselves::::
	thing::::
	time::::
	tuple::::
	two::::
	until::::
	vendor特有の:vendor-specific#1
	walk::::
	welcome::::
	wikipedia::::
	~~優先:win::::
	分けてsplit
	選ぶ／選んで:choose
	秒数:number of seconds
	であり続ける:remains
	高々一個:at most one
	後で一括して:en masse at some point in the future
	XSS:cross-site scripting
	多量の流通:good deal of traffic
	反復順序 the order in which it walks through 


</script>

<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
</script>

<!--%置換語 -->
<script type="text/plain" id="words_table1">
ES6:http://www.ecma-international.org/ecma-262/6.0
</script>

<!--%links -->

<script type="text/plain" id="_link_map">
h.Content-Security-Policy:~CSP3#header-content-security-policy
	https://w3c.github.io/webappsec-csp/#content-security-policy
h.Report-To:#report-to
h.Public-Key-Pins:~IETF/rfc7469#section-2.1
	public-key-pins

m.JSON.stringify():~ES6/#sec-json.stringify

mb.url:#url
mb.group:#group
mb.max-age:#max-age
mb.includeSubdomains:#includesubdomains

dir.report-to:~CSP3#directive-report-to

	https://w3c.github.io/webappsec-csp/#directives-reporting
m.host:~URLSpec#dom-url-host




報告:#report
~client:#client
報告先:#endpoint
報告用~cache:#reporting-cache

rP.試行数:#dom-report-attempts
rP.本体:#dom-report-body
rP.~group:#dom-report-group
rP.生成元:#dom-report-origin
rP.時刻印:#dom-report-timestamp
rP.種別:#dom-report-type
rP.~url:#dom-report-url

cL.作成時刻:#dom-client-creation
cL.~group:#dom-client-group
cL.生成元:#dom-client-origin
cL.下位domain~flag:#dom-client-subdomains
cL.~ttl:#dom-client-ttl

cL.失効した:#client-expired

eP.~client~list:#dom-endpoint-clients
eP.失敗数:#dom-endpoint-failures
eP.~url:#dom-endpoint-url
eP.再試行時刻:#dom-endpoint-retry-after
eP.失効した:#endpoint-expired
eP.処理待ち:#endpoint-pending



~URL:~URLSpec#concept-url
~URL構文解析器:~URLSpec#concept-url-parser
~URL直列化器:~URLSpec#concept-url-serializer
url.~password:~URLSpec#concept-url-password
url.~username:~URLSpec#concept-url-username
url.素片:~URLSpec#concept-url-fragment
url.生成元:~URLSpec#concept-url-origin
~URL文字列:~URLSpec#syntax-url

~garbage収集:#gc
~garbage収集-:#gc

	§3.1 The Report-To HTTP Response Header Field:#header
	§3.2 Process reporting endpoints for response to request:#process-header
	§3.3 Parse reporting endpoint tuples from value:#parse-header
	§4.2 Does endpoint match report?:#does-endpoint-match-report
	§4.4 Attempt to deliver reports to endpoint:#try-delivery
	§5.2 Garbage Collection:#gc
	§7.1 Capability URLs:#capability-urls
	§8.2 Clock Skew:#fingerprinting-clock-skew
	§8.5 Clearing the reporting cache:#clear-cache

~ASCII文字大小無視:~HTMLINFRA#ascii-case-insensitive

	＊Wait for a response:~FETCH#responses
hd.値:~FETCH#concept-header-value
hd.名前:~FETCH#concept-header-name
~fetch:~FETCH#concept-fetch
~header:~FETCH#concept-header
~header~list:~FETCH#concept-header-list
~main~fetch:~FETCH#main-fetch
~ok~status:~FETCH#ok-status
応答:~FETCH#concept-response
rs.~HTTPS状態:~FETCH#concept-response-https-state
rs.~header~list:~FETCH#concept-response-header-list
rs.~url:~FETCH#concept-response-url
rs.~status:~FETCH#concept-response-status

要請:~FETCH#concept-request
rq.~url:~FETCH#concept-request-url
rq.~header~list:~FETCH#concept-request-header-list
rq.~client:~FETCH#concept-request-client
rq.~window:~FETCH#concept-request-window
~skip-service-worker~flag:~FETCH#skip-service-worker-flag
rq.起動元:~FETCH#concept-request-initiator
rq.種別:~FETCH#concept-request-type
rq.行先:~FETCH#concept-request-destination
rq.~mode:~FETCH#concept-request-mode
rq.資格証~mode:~FETCH#concept-request-credentials-mode
rq.本体:~FETCH#concept-request-body


~JSON~text:~IETF/rfc7159#section-2
JSON.stringify():~ES6/#sec-json.stringify
json-field-value:https://greenbytes.de/tech/webdav/draft-reschke-http-jfv-latest.html#rfc.section.2
	https://greenbytes.de/tech/webdav/draft-reschke-http-jfv-02.html#rfc.section.2


~ASCII文字大小無視:~HTMLINFRA#ascii-case-insensitive

	~congruent合致-:~IETF/rfc6797#section-8.2
作成時の~URL:~WAPI#creation-url
環境~設定群~obj:~WAPI#environment-settings-object

生成元:~BROWSERS#origin
信用に価し得る:~SECURE-CONTEXT#is-origin-trustworthy
~taskを待入する:~WAPI#queue-a-task

	上位domain合致-:~IETF/rfc6797#section-8.2
応答を待機する:~FETCH#wait-for-a-response



</script>

<!--%style -->
<style>

*[lang="en"] {
	white-space: pre-line;
}

.report {
	color: green;
}

.scheme {
	color: #006633;
}

.status {
	color: green;
}

samp {
	white-space: nowrap;
	background: #F0F0F0;
	margin-left: 0.5em;
	margin-right: 0.5em;
}

pre.http-code {
	background: #EEE;
}
pre.html-code {
	background: #FFE;
}

i {
	color: purple;
}

</style>



</head>

<body>

<div style="display:none;"><input type="hidden" id="_page_config" value="" /></div>

<aside class="trans-meta">
<h1>Reporting API 1 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.w3.org/">W3C</a> により，副題の日付にて<strong >Working Group Note</strong>として公開された
<a id="_SPEC_URL">Reporting API 1</a>
を日本語に翻訳したものです。
<strong >この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語版は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p >
更新：<time>2016-07-25</time>
（公開：<time>2016-06-06</time> ）
</p>

<p>
このページの大部分はスクリプトにより生成されています（
古いブラウザなど，一部のブラウザには対応していません：
<span id="_GENERATING"></span>）。
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>


<header>
	<hgroup>
<h1 id="title">Reporting API 1</h1>
<h2 id="subtitle">2016 年 6 月 7 日付 Working Group Note</h2>
</hgroup>

<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dd>http://www.w3.org/TR/2016/NOTE-reporting-1-20160607/</dd>

	<dt title="Latest version">最新の発行バージョン</dt>
	<dd>http://www.w3.org/TR/reporting-1/</dd>

	<dt title="Latest Reporting API version:">最新の Reporting API バージョン</dt>
	<dd>http://www.w3.org/TR/reporting/</dd>

	<dt title="Editor’s Draft:">編集者草案</dt>
	<dd>https://w3c.github.io/reporting/</dd>

	<dt title="Previous versions:">以前のバージョン</dt>
	<dd>http://www.w3.org/TR/2016/WD-reporting-1-20160407/</dd>

	<dt title="Version History:">バージョン履歴</dt>
	<dd>https://github.com/w3c/reporting/commits/master/index.src.html</dd>

	<dt title="Editors:">編集</dt>
	<dd><a href="mailto:igrigorik@google.comm">Ilya Grigorik</a> (Google Inc.)</dd>
	<dd><a href="mailto:mkwst@google.com">Mike West</a> (Google Inc.)</dd>

	<dt>Participate:</dt>
	<dd><a href="https://github.com/w3c/reporting/issues/new">File an issue</a> (<a href="https://github.com/w3c/reporting/issues">open issues</a>)</dd>

</dl>


<small class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </small>

</header>


<div id="MAIN" style="display:none;">


	<section id="abstract">
<h2 title="Abstract">要約</h2>

<div class="p">
<p>
この文書は、報告処理の汎的~frameworkを定義する：
</p>

<ol>
	<li>
開発者は、名前が付与された［
`報告先$の集合
］を，`生成元$に結付けれる。
</li>
	<li>
様々な~platform特色機能（
Content Security Policy, Network Error Reporting,
その他）が、これらの報告先を利用して，それぞれに特有の報告を一貫する方式で送達する。
</li>
</ol>

◎
This document defines a generic reporting framework which allows web developers to associate a set of named reporting endpoints with an origin. Various platform features (like Content Security Policy, Network Error Reporting, and others) will use these endpoints to deliver feature-specific reports in a consistent manner.
</div>


	</section>
	<section id="status">
<h2 title="Status of this document">この文書の位置付け</h2>

<p>
<em>この節では、発行時点における…</em>
<span class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#status" >W3C 日本語訳 共通ページ</a>
に委譲
】</span></p>

<p>
この文書は
<a href="http://www.w3.org/2010/webperf/">Web Performance Working Group</a>
により，
Working Group Note 
として歴史目的のために~~発行されました。
この文書に関する~commentがあれば，代わりに
<a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>
宛に送られるよう願います。
◎
This document was published by the Web Performance Working Group as a Working Group Note for history purposes. If you wish to make comments regarding this document, please direct them to the Web Platform Incubator Community Group instead. All comments are welcome.
</p>

<!-- 

This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the W3C technical reports index at http://www.w3.org/TR/.

This is a proposal and may change without any notices. Interested parties should bring discussions to the Web Platform Incubator Community Group.

This document was published by the Web Performance Working Group as a Working Group Note for history purposes. If you wish to make comments regarding this document, please direct them to the Web Platform Incubator Community Group instead. All comments are welcome.

You may find historical discussion in public-web-perf@w3.org (archives) with [Reporting] at the start of your email's subject.

Publication as a Working Group Note does not imply endorsement by the W3C Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.

This document was produced by a group operating under the 5 February 2004 W3C Patent Policy. W3C maintains a public list of any patent disclosures made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains Essential Claim(s) must disclose the information in accordance with section 6 of the W3C Patent Policy.

This document is governed by the 1 September 2015 W3C Process Document.

-->
	</section>

<nav class="toc" id="toc">
<h2 class="toc" id="contents">目次</h2>
<ol id="_toc_list0"></ol></nav>

<main id="MAIN0">
	<section id="intro">
<h2 title="Introduction">1. 序論</h2>


		<section id="guarantees">
<h3 title="Guarantees">1.1. 保証-</h3>

<p>
この仕様は、~website活動の帯域外で実行されるような
~best-effortによる
報告~送達~systemを提供することを目指す。
~UAは、報告の送達に優先度をあてがったり，それらを~scheduleする~~仕事をより良く行える立場にある
— ~UAは、［
個々の~websiteが有さない，非同一生成元の活動
］について俯瞰でき，また，［
~websiteの読込みが頭から防止される~error条況
］に際しても報告を送達できるので。
◎
This specification aims to provide a best-effort report delivery system that executes out-of-band with website activity. The user agent will be able to do a better job prioritizing and scheduling delivery of reports, as it has an overview of cross-origin activity that individual websites do not, and can deliver reports based on error conditions that would prevent a website from loading in the first place.
</p>

<p>
しかしながら、送達は，厳密的には保証されない。
この仕様の~algoは，再試行~規則の適度な集合を~~記述するが、何か不具合が生じたときは，報告が取りこぼされることも~~十分にあり得る。
◎
The delivery is not, however, guaranteed in a strict sense. We spell out a reasonable set of retry rules in the algorithms below, but it’s quite possible for a report to be dropped on the floor if things go badly.
</p>

<p>
報告処理は 多量の流通を生成し得るので、負荷を分散するため，開発者は`報告先$の各~groupを設定しておけるようになっている。
これらの各 報告先は、報告のうち，その~groupを標的にするように生成されたものを受信することになる。
~UAは、特定0の報告を~group内の<strong>高々一個</strong>の報告先に送達するよう，最善を尽くすことになる。
すなわち、報告が~group内の全~報告先に散布されることはない
— ~UAは、ある報告先に送達を試みた上で，失敗~時には別の報告先へ~fallbackすることになる。
◎
Reporting can generate a good deal of traffic, so we allow developers to set up groups of endpoints in order to distribute load. Each of these endpoints will receive a subset of the generated reports which target that group. The user agent will do its best to deliver a particular report to at most one endpoint in a group. That is, reports will not fan-out to all the endpoints in a group, but the user agent will attempt delivery to one endpoint, and fallback to another upon failure.
</p>



		</section>
		<section id="examples">
<h3 title="Examples">1.2. 例</h3>

<div class="example">
<p>
MegaCorp 社は、［
~CSP（ Content Security Policy `CSP$r ）と~HPKP（ Key Pinning `RFC7469$r ）
］に対する違反~報告を収集したいとする。
そうするには、名前 `endpoint-1^l の［
報告先の集合
］を定義する，次の~headerに加えて：
◎
MegaCorp Inc. wants to collect Content Security Policy and Key Pinning violation reports. It can do so by delivering the following header to define a set of reporting endpoints named "endpoint-1":
</p>

<pre class="http-code">
`Report-To$h: {
    "`url$mb": "https://example.com/reports",
    "`group$mb": "endpoint-1",
    "`max-age$mb": 10886400
}, {
    "`url$mb": "https://backup.com/reports",
    "`group$mb": "endpoint-1",
    "`max-age$mb": 10886400
}
</pre>

<p>
［
~CSP／~HPKP
］報告をその `group$mb に指向ける，次の~headerを送達する：
◎
And the following headers, which direct CSP and HPKP reports to that group:
</p>

<pre class="http-code">
`Content-Security-Policy$h: ...; `report-to$dir=endpoint-1
`Public-Key-Pins$h: ...; `report-to^dir=endpoint-1
</pre>

</div>

<div class="example">
<p>
しばらくして後， MegaCorp 社は、~script処理を単純~化するため，これら 2 種の報告を，種別ごとに別々の報告先に分けて処理することに決めた。
そうするには、 `Report-To$h に定義する報告先を次の様に異ならせた上で：
◎
After processing reports for a little while, MegaCorp Inc. decides to split the processing of these two types of reports out into two distinct endpoints in order to make the processing scripts simpler. It can do so by delivering the following header to define two reporting endpoints:
</p>

<pre class="http-code">
`Report-To$h: {
    "`url$mb": "https://example.com/csp-reports",
    "`group$mb": "csp-endpoint",
    "`max-age$mb": 10886400
}, {
    "`url$mb": "https://example.com/hpkp-reports",
    "`group$mb": "hpkp-endpoint",
    "`max-age$mb": 10886400
}
</pre>

<p>
次の~headerで，［
~CSP, ~HPKP
］報告を別々に命名された報告先へ指向ける：
◎
And the following headers, which direct CSP and HPKP reports to those named endpoint:
</p>

<pre class="http-code">
`Content-Security-Policy$h: ...; `report-to$dir=csp-endpoint
`Public-Key-Pins$h: ...; report-to=hpkp-endpoint
</pre>

</div>

		</section>
	</section>
	<section id="concept">
<h2 title="Concepts">2. 各種~概念</h2>

		<section id="concept-endpoints">
<h3 title="Endpoints">2.1. 報告先</h3>

<p>
`報告先@
（ reporting endpoint ）とは、`報告$の送信-先になる~network端点の所在である。
◎
An endpoint is location to which reports may be sent.
</p>

<p>
各 `報告先$は、次のものを持つ：
</p>

<dl class="def-list">
	<dt>`~url@eP</dt>
	<dd>
`~URL$
◎
Each endpoint has a url, which is a URL.
</dd>

	<dt>`失敗数@eP （ failures ）</dt>
	<dd>
非~負~整数。
この報告先が要請に応答するのに連続して失敗した回数を表現する。
◎
Each endpoint has a failures, which is a non-negative integer representing the number of consecutive times this endpoint has failed to respond to a request.
</dd>

	<dt>`再試行時刻@eP （ retry-after ）</dt>
	<dd>
~NULL, または
次にいつ送達を再試行するかを表す時刻†。
◎
Each endpoint has a retry-after, which is either null, or a timestamp after which delivery should be retried.
</dd>
	<dd class="trans-note">【
原文では “時刻印” （絶対的な時刻）と記されているが、この仕様の中では，抽象的な時刻（ある時点からの相対的な時間~差）に解釈しても不都合はない。
】</dd>


	<dt>`~client~list@eP （ client list ）</dt>
	<dd>
`~client$の~list。
◎
Each endpoint has a clients list, which is a list of clients.
</dd>
</dl>

<p>
`報告先$は、所与の時点で［
その`~client~list$eP内のすべての`~client$が`失効した$cL
］ならば，
`失効した@eP
とされる。
◎
An endpoint is expired if every client in its list of clients is expired.
</p>

<p>
`報告先$は、所与の時点で［
その`再試行時刻$eP が非~NULL, かつ未来の時刻を表現する
］ならば，
`処理待ち@eP
にあるとされる。
◎
An endpoint is pending if its retry-after is not null, and represents a time in the future.
</p>



		</section>
		<section id="concept-client">
<h3 title="Clients">2.2. ~client</h3>

<p>
`~client@
は、特定0の生成元と`報告先$との関係性を表現する。
◎
A client represents a particular origin’s relationship to an endpoint.
</p>

<p>
各`~client$は、次のものを持つ：
</p>

<dl class="def-list">
	<dt>`生成元@cL （ origin ）</dt>
	<dd>
`生成元$
◎
Each client has an origin, which is an origin.
</dd>

	<dt>`下位domain~flag@cL （ subdomains flag ）</dt>
	<dd>
次のいずれか
⇒
`include^l ／ `exclude^l
◎
Each client has a subdomains flag (which is either "include" or "exclude").
</dd>

	<dt>`~group@cL （ group ）</dt>
	<dd>
~ASCII文字列
◎
Each client has a group which is an ASCII string.
</dd>

	<dt>`~ttl@cL</dt>
	<dd>
~clientが`報告先$に対し有効であり続ける秒数を表現する
◎
Each client has a ttl representing the the number of seconds the client remains valid for an endpoint.
</dd>

	<dt>`作成時刻@cL （ creation ）</dt>
	<dd>
~clientが`報告先$に追加された時刻を表す時刻印
◎
Each client has a creation which is the timestamp at which the client was added to an endpoint.
</dd>
</dl>

<p>
`~client$は、所与の時点で，その
( `作成時刻$cL ~PLUS `~ttl$cL ) 
が過去の時刻を表現するならば、
`失効した@cL
とされる。
◎
A client is expired if its creation plus its ttl represents a time in the past.
</p>



		</section>
		<section id="concept-reports">
<h3 title="Reports">2.3. 報告</h3>

<p>
`報告@
は、指定された報告先へ送達することが~UAに期待されるような，任意の~dataからなる~collectionである。
◎
A report is a collection of arbitrary data which the user agent is expected to deliver to a specified endpoint.
</p>

<p>
各 `報告$は、次のものを持つ：
</p>

<dl class="def-list">
	<dt>`本体@rP （ body ）</dt>
	<dd>
~NULL, または`~JSON~text$に直列化できる~obj。
◎
Each report has a body, which is either null or an object which can be serialized into a JSON text.
</dd>

	<dt>`~url@rP</dt>
	<dd>
報告を生成した［
`Document^I ／ `Worker^I
］の~address
<span class="trans-note">【
を表現する`~URL文字列$
】</span>
。
◎
Each report has an url, which is the address of the Document or Worker from which the report was generated.
</dd>

	<dd class="note">注記：
この直列化された~URLからは，［
`~username$url, `~password$url, `素片$url
］は剥取られる。
<a href="#capability-urls">~capability~URL 節</a>
を見よ。
◎
Note: We strip the username, password, and fragment from this serialized URL. See §7.1 Capability URLs.
</dd>

	<dt>`生成元@rP （ origin ）</dt>
	<dd>
報告の起動元を表現する`生成元$。
◎
Each report has an origin, which is an origin representing the report’s initiator.
</dd>

	<dt>`~group@rP （ group ）</dt>
	<dd>
この報告の送信-先となる`~group$cLを表現している文字列。
◎
Each report has an group, which is a string representing the group to which this report will be sent.
</dd>

	<dt>`種別@rP （ type ）</dt>
	<dd>
報告が包含する~dataの種別を指定している，空でない文字列。
◎
Each report has a type, which is a non-empty string specifying the type of data the report contains.
</dd>
	<dd class="trans-note">【
この “種別” が（ IDL や JS などの）特定0の言語の~data型を指定するのか，より広い意味の種別を意味するのかは、この仕様からは見分けがつかない。
】</dd>

	<dt>`時刻印@rP （ timestamp ）</dt>
	<dd>
報告が生成された時刻を，~unix-epochからの~millisecondsで記録する。
◎
Each report has a timestamp, which records the time at which the report was generated, in milliseconds since the unix epoch.
</dd>

	<dt>`試行数@rP （ attempts ）</dt>
	<dd>
非~負~整数。
~UAが報告を送達しようと試みた回数を表現する。
◎
Each report has a attempts, which is a non-negative integer representing the number of times the user agent attempted to deliver the report.
</dd>
</dl>


		</section>
		<section id="concept-storage">
<h3 title="Storage">2.4. 蓄積</h3>

<p>
適合~UAは
`報告用~cache@
を提供し~MUST。
それは、
~websiteが［
自身の`生成元$に結付けるよう，~UAに指図した`報告先$の集合
］，および［
送達~用に待入される`報告$の集合
］を維持管理する蓄積の仕組みである。
◎
A conformant user agent MUST provide a reporting cache, which is a storage mechanism that maintains a set of endpoints that websites have instructed the user agent to associate with their origins, and a set of reports which are queued for delivery.
</p>

<p>
この蓄積の仕組みは、［
不透明, かつ
~vendor特有の, かつ
~webには公開されない
］が，［
この文書が定義する各種~algoにて利用されることになる，次の各種~method
］を提供し~MUST：
◎
This storage mechanism is opaque, vendor-specific, and not exposed to the web, but it MUST provide the following methods which will be used in the algorithms this document defines:
</p>

<ol>
	<li>
`報告先$を［
挿入-／更新-／除去-
］する。
◎
Insert, update, and remove endpoints.
</li>
	<li>
送達のために`報告$を待行列［
に入れる／から取り除く
］。
◎
Enqueue and dequeue reports for delivery.
</li>
	<li>
`報告先$~objの~listを検索取得する。
◎
Retrieve a list of endpoint objects.
</li>
	<li>
待入されている`報告$~objの~listを検索取得する。
◎
Retrieve a list of queued report objects.
</li>
	<li>
~cacheを消去する。
◎
Clear the cache.
</li>

</ol>


		</section>
	</section>
	<section id="endpoint-delivery">
<h2 title="Endpoint Delivery">3. 報告先への送達</h2>

<p>
~serverは、
`Report-To$h ~HTTP応答~headerを介して，
自身が制御する生成元に対する報告先の集合を定義して~MAY。
この仕組みは
<a href="#header">`Report-To^h ~HTTP 応答~header 節</a>
に定義され、その処理は
<a href="#process-header">%要請 に対する %応答 に対し報告先たちを処理する
 節</a>
に定義される。
◎
A server MAY define a set of reporting endpoints for an origin it controls via the Report-To HTTP response header field. This mechanism is defined in §3.1 The Report-To HTTP Response Header Field, and its processing in §3.2 Process reporting endpoints for response to request.
</p>



		<section id="header">
<h3 title="The Report-To HTTP Response Header Field">3.1. `Report-To^h ~HTTP 応答~header</h3>

<p>
`Report-To@h
~HTTP応答~headerは、生成元に対する報告先を格納するよう，~UAに指図する。
この~headerの文法は、次の~ABNFで表現される
`RFC5234$r
：
◎
The Report-To HTTP response header field instructs the user agent to store a reporting endpoints for an origin. The header is represented by the following ABNF grammar [RFC5234]:
</p>

<pre class="ABNF">
Report-To = `json-field-value$   ; †
</pre>

<p>†
`HTTP-JFV$r の 2 節, `RFC7159$r の 2 節を見よ。
◎
            ; See Section 2 of [[HTTP-JFV]], and Section 2 of [[RFC7159]]
</p>

<p>
~headerの値は、
`HTTP-JFV$r の 4 節にしたがって，~JSON~objの配列として解釈される。
◎
The header’s value is interpreted as an array of JSON objects, as described in Section 4 of [HTTP-JFV].
</p>

<p>
結果の配列~内の各~objは、報告を送達してよいとされる`報告先$を定義し，
<a href="#parse-header">報告先の組~listとして構文解析される</a>
ことになる。
◎
Each object in the array defines an endpoint to which reports may be delivered, and will be parsed as defined in §3.3 Parse reporting endpoint tuples from value.
</p>

<p>
以下の各 下位節では、~header値により定義される，各~JSON~obj内の既知の~memberの初期~集合を定義する。
この文書の将来~versionは、その種の~memberを追加で定義し得る。
よって~UAは、~headerの構文解析~時には，未知の~memberを無視し~MUST。
◎
The following subsections defined the initial set of known members in each JSON object the header’s value defines. Future versions of this document may define additional such members, and user agents MUST ignore unknown members when parsing the header.
</p>



			<section id="url-member">
<h4 title="The url member">3.1.1. `url^mb ~member</h4>

<p>
`url@mb
~member（必須）は、報告先の所在を定義する。
値は、~stringで~MUST
— 他の型であった場合，構文解析~errorになる。
◎
The REQUIRED url member is a string that defines the location of a reporting endpoint. The member’s value MUST be a string; any other type will result in a parse error.
</p>

<p>
加えて，その~memberの値が表現する~URLは、`信用に価し得る$
（ potentially trustworthy ）
`SECURE-CONTEXTS$r
もので~MUST。
保安的でない報告先は、無視されることになる。
◎
Moreover, the URL that the member’s value represents MUST be potentially trustworthy [SECURE-CONTEXTS]. Non-secure endpoints will be ignored.
</p>



			</section>
			<section id="id-member">
<h4 title="The group member">3.1.2. `group^mb ~member</h4>

<p>
`group@mb
~member（省略可）は、その値で与えられる名前を，報告先に結付ける。
値は、~stringで~MUST
— 他の型であった場合，構文解析~errorになる。
~obj内に名前 `group^l の~memberがない場合、`報告先$は
~group名 `default^l に結付けられる。
◎
The OPTIONAL group member is a string that associates a name with the reporting endpoint. The member’s value MUST be a string; any other type will result in a parse error. If no member named "group" is present in the object, the endpoint will be associated with a group named "default".
</p>

<p>
~group名は、一意でない
— 予備や失敗時回復の目的0に利用できる報告先の集合を作成するため、複数の報告先が同じ名前を利用してよい。
~memberが省略された場合、報告先は~group名 `default^l に結付けられ~MUST。
◎
The group name is not unique and multiple endpoints may use the same name to create a set of reporting endpoints that can be used for backup and failover purposes. If the member is omitted, the endpoint MUST be associated with the "default" group name.
</p>

<p class="note">注記：
~groupが複数の`報告先$に解決される場合、~UAは，特定0の`報告$を
~best-effortに基づいて，その~group内の <strong>高々一個</strong>の`報告先$に送達することになる。
◎
Note: If a group resolves to multiple endpoints, the user agent will deliver a particular report to at most one endpoint in that group on a best-effort basis.
</p>



			</section>
			<section id="includesubdomains-member">
<h4 title="The includeSubdomains member">3.1.3. `includeSubdomains^mb ~member</h4>

<p>
`includeSubdomains@mb
~member（省略可）は，~boolean値であり、［
~obj内にこの~memberが在する, かつ その値 ~EQ ~T
］ならば，［［
現在の`生成元$
］の `host$m 
］の［
すべての下位domain
］に対し，この報告先を報告-先として可能化する。
他の場合、この報告先は，下位domainに対しては可能化されないことになる。
◎
The OPTIONAL includeSubdomains member is a boolean that enables an endpoint for all subdomains of the current origin’s host. If no member named "includeSubdomains" is present in the object, or its value is not "true", the endpoint will not be enabled for subdomains.
</p>


			</section>
			<section id="max-age-member">
<h4 title="The max-age member">3.1.4. `max-age^mb ~member</h4>

<p>
`max-age@mb
~member（必須）は、報告先の存続期間を，非~負~整数による秒数として定義する。
値は、~numberで~MUST
— 他の型であった場合，構文解析~errorになる。
◎
The REQUIRED max-age member defines the reporting endpoint’s lifetime, as a non-negative integer number of seconds. The member’s value MUST be a number; any other type will result in a parse error.
</p>

<p>
値に `0^l を与えた場合、`報告先$は，~UAの`報告用~cache$から除去されることになる。
◎
A value of "0" will cause the endpoint to be removed from the user agent’s reporting cache.
</p>



			</section>
		</section>
		<section id="process-header">
<h3 title="Process reporting endpoints for response to request">3.2. %要請 に対する %応答 に対し報告先たちを処理する</h3>

<p>
この~algoは、所与の
( `応答$ %応答, `要請$ %要請 )
に対し，`報告先$ ~objの~listを抽出した上で、それに則って`報告用~cache$を更新する。
◎
Given a response (response) and a request (request), this algorithm extracts a list of endpoint objects, and updates the reporting cache accordingly.
</p>

<p class="trans-note">【
%要請 が~algoのどこからも利用されていない。
】</p>

<p class="note">注記：
この~algoは、`~main~fetch$ `FETCH$r の段 13 あたりで~callされ、
%応答 が保安的に送達された場合に限り，`報告用~cache$を更新する。
◎
Note: This algorithm is called from around step 13 of main fetch [FETCH], and only updates the reporting cache if the response has been delivered securely.
</p>

<p class="issue">
Fetch monkey patching. Talk to Anne.
<span class="trans-note">【
実際にはまだ `FETCH$r に統合されていない。
】</span>

</p>

<ol>
	<li>
%~header ~LET ［
%応答 の`~header~list$rs内に［
`名前$hd ~EQ `Report-To$h
］なる`~header$があれば その`値$hd ／
なければ ε
］
◎
↓</li>
	<li>
%生成元 ~LET %応答 の`~url$rsの`生成元$url
◎
↓</li>
	<li>
~IF［
%~header ~EQ ε
］~OR［
%生成元 は`信用に価し得る$でない
］
⇒
~RET
◎
Abort these steps if any of the following conditions are true:
• response’s HTTPS state is not "modern", and the origin of response’s url is not potentially trustworthy.
• response’s header list does not contain a header whose name is "Report-To".
◎
Let header be the value of the header in response’s header list whose name is "Report-To".
◎
Let origin be the origin of response’s url.
</li>
	<li>
%組~list ~LET
%~header の値から
<a href="#parse-header">報告先の組~listを構文解析</a>
した結果
◎
Let tuples be the result of executing §3.3 Parse reporting endpoint tuples from value on header.
</li>
	<li>
<p>
~FOR
%組~list 内の ~EACH ( %組 ) に対し：
◎
For each tuple in tuples:
</p>

		<ol>
			<li>
<p>
%新~client ~LET 各種~propが次のように設定された新たな`~client$：
◎
Let new be a new client whose properties are set as follows:
</p>

<div>

<table><tbody><tr><th>`生成元$cL
</th><td>%生成元

</td></tr><tr><th>`下位domain~flag$cL
</th><td>%組 の`下位domain~flag$cL

</td></tr><tr><th>`~group$cL
</th><td>%組 の`~group$cL

</td></tr><tr><th>`~ttl$cL
</th><td>%組 の`~ttl$cL

</td></tr><tr><th>`作成時刻$cL
</th><td>現在の時刻印

</td></tr></tbody></table>

◎
origin
• origin
subdomains
• tuple’s subdomains
group
• tuple’s group
ttl
• tuple’s ttl
creation
• The current timestamp
</div>


			</li>
			<li>
<p>
~IF［
`報告用~cache$内に［
`~url$eP ~EQ %組 の`~URL$
］なる`報告先$ %報告先 が存在する
］：
◎
If there exists an endpoint (endpoint) in the reporting cache whose url is tuple’s URL:
</p>

				<ol>
					<li>
~FOR
%報告先 の`~client~list$eP内の ~EACH ( %~client ) に対し
⇒
~IF［
%新~client の`生成元$cL ~EQ ~the同じ~as%~client の`生成元$cL
］
⇒
%~client を削除する
◎
For each client in endpoint’s clients, delete client if new’s origin is the same as client’s origin.
</li>
					<li>
~IF［
%新~client の`~ttl$cL ~GT 0
］
⇒
%報告先 の`~client~list$ePに %新~client を付加する
◎
If new’s ttl is greater than 0, append new to endpoint’s clients list.
◎
Skip to the next tuple.
</li>
				</ol>
			</li>
			<li>
<p>
~ELSE
⇒
%報告先 ~LET 各種~propが次のように設定された新たな `報告先$
◎
Otherwise, there is no existing endpoint, so let endpoint be a new endpoint whose properties are set as follows:
</p>

<div>
<table><tbody><tr><th>`~url$eP
</th><td>%組 の`~URL$

</td></tr><tr><th>`失敗数$eP
</th><td>0

</td></tr><tr><th>`再試行時刻$eP
</th><td>~NULL

</td></tr><tr><th>`~client~list$eP
</th><td>%組 を包含している新たな~list

</td></tr></tbody></table>

◎
url
• tuple’s URL 
failures
• 0 
retry-after
• null 
clients
• A new list, containing tuple 
</div>


			</li>
			<li>
%報告先 を［
%生成元 に対する`報告用~cache$
］の中へ挿入する
◎
Insert endpoint into the reporting cache for origin.
</li>
		</ol>
	</li>
</ol>



		</section>
		<section id="parse-header">
<h3 title="Parse reporting endpoint tuples from value">3.3. %値 から 報告先の組~listを構文解析する</h3>

<p>
この~algoは、所与の
( 文字列 %値 )
に対し，各~組が
( `~URL$, `下位domain~flag$cL, `~ttl$cL, `~group$cL )
からなる~listを返す。
有効な報告先を構文解析できなければ、結果の~listは空になる。
◎
Given a string (value) this algorithm will return a list of tuples containing a URL, subdomains flag, ttl, and a group. This list will be empty if no valid endpoints could be parsed.
</p>

<ol>
	<li>
%組~list ~LET 空~list
◎
↓</li>
	<li>
%~list ~LET［
`HTTP-JFV$r の 4 節に定義される~algo
］にしたがって， %値 を構文解析した結果
◎
↓</li>
	<li>
~IF［
%~list は~error
］
⇒
~RET %組~list
◎
Let list be the result of executing the algorithm defined in Section 4 of [HTTP-JFV]. If that algorithm results in an error, abort these steps.
</li>
	<li>
%組~list ~LET 空~list
◎
Let tuples be an empty list.
</li>
	<li>
<p>
~FOR
%~list 内の ~EACH ( %~item ) に対し：
◎
For each item in list:
</p>

		<ol>
			<li>
~IF［
%~item は `url$mb ~memberを持たない
］~OR［
その~member値は~stringでない
］
⇒
~CONTINUE
◎
If item has no member named "url", or that member’s value is not a string, skip to the next item.
</li>
	<li>
~IF［
%~item は `max-age$mb ~memberを持たない
］~OR［
その~member値は~numberでない
］
⇒
~CONTINUE
◎
If item has no member named "max-age", or that member’s value is not a number, skip to the next item.
</li>
			<li>
<p>
%組 ~LET 次からなる新たな組：
◎
Let tuple be a new tuple containing the following:
</p>


<div>
<table><tbody><tr><th>`url^l
</th><td>
%~item の `url$mb ~member値を `~URL構文解析器$にかけた結果

</td></tr><tr><th>`subdomains^l
</th><td>［
%~item は `includeSubdomains$mb ~memberを持つ
］~AND［
その値 ~EQ ~T
］ならば `Include^l ／
~ELSE_ `Exclude^l

</td></tr><tr><th>`ttl^l
</th><td>%~item の `max-age$mb ~member値

</td></tr><tr><th>`group^l
</th><td>［
%~item の `group$mb ~memberが在するならば その値 ／
~ELSE_ `default^l
］

</td></tr></tbody></table>

◎
"url"
• The result of executing the URL parser on item’s "url" member’s value. 
"subdomains"
• "Include" if item has a member named "includeSubdomains" whose value is true, "Exclude" otherwise. 
"ttl"
• item’s "max-age" member’s value. 
"group"
• item’s "group" member’s value if present, and "default" otherwise.
</div>

	</li>

	<li>
<p>
~IF［
%組 の `url^l は`信用に価し得る$でない
］~OR［
%組 の `ttl^l ~LT 0
］
⇒
~CONTINUE
◎
If tuple’s "url" is not potentially trustworthy, or tuple’s "ttl" is a negative number, skip to the next item.
</p>

<p class="note">注記：
この事例に際しては、~UAは、何らかの類の構文解析~errorを，開発者から可視にするべきである。
◎
Note: User agents SHOULD raise some sort of developer-visible parse error in this case.
</p>
	</li>
	<li>
%組 を %組~list に付加する
◎
Append tuple to tuples.
</li>
		</ol>
	</li>

	<li>
~RET %組~list
◎
Return tuples.
</li>

</ol>


		</section>
	</section>
	<section id="report-delivery">
<h2 title="Report Delivery">4. 報告の送達</h2>

<p>
様々な特色機能が、時を経るにつれ，~UAの`報告用~cache$内に`報告$の~listを待入することになる。
~UAは、定期的に，現在 処理待ちにある報告の~listを取り出して，それらに結付けられている報告先へ送達することになる。
この文書は、~UAが従うべき~scheduleは定義しない。
~UAは、報告を適時に送達するための文脈的~情報を
— 利用者~体験への影響0ingとの兼ね合いも含め —
十分に有するものと見做される。
◎
Over time, various features will queue up a list of reports in the user agent’s reporting cache. The user agent will periodically grab the list of currently pending reports, and deliver them to the associated endpoints. This document does not define a schedule for the user agent to follow, and assumes that the user agent will have enough contextual information to deliver reports in a timely manner, balanced against impacting a user’s experience.
</p>

<p>
それでも~UAは、待入したなら，可能0な限り早く報告を送達するよう努めるべきである
— 報告の~dataは、生成したての頃の方が一〜数日~後よりも有意に有用なこともあり得るので。
◎
That said, a user agent SHOULD make a effort to deliver reports as soon as possible after queuing, as a report’s data might be significantly more useful in the period directly after its generation than it would be a day or a week later.
</p>



		<section id="queue-report">
<h3 title="Queue data as type for endpoint group on settings">4.1. %設定群 上で %報告先~group に対する 所与の %種別 の %~data を待入する</h3>


<div class="p">
<p>
次の~algoは、所与の：
</p>

<ul ><li>%~data （ 直列化可能な~obj ）
</li><li>%種別 （ 文字列 ）
</li><li>%報告先~group （ 文字列 ）
</li><li>%設定群 （ `環境~設定群~obj$ ）
</li></ul>

<p>
から，`報告$を作成した上で、それを未来に送達するために`報告用~cache$の待行列に追加する：
</p>

◎
Given a serializable object (data), a string (type), another string (endpoint group), and an environment settings object (settings), the following algorithm will create a report, and add it to reporting cache’s queue for future delivery.
</div>


<ol>
	<li>
<p>
%報告 ~LET 次に従って初期化した，新たな`報告$~obj：
◎
Let report be a new report object with its values initialized as follows:
</p>

<div>
<table><tbody><tr><th>`本体$rP
</th><td>%~data

</td></tr><tr><th>`生成元$rP
</th><td>%設定群 の`生成元$

</td></tr><tr><th>`~group$rP
</th><td>
%報告先~group

</td></tr><tr><th>`種別$rP
</th><td>%種別

</td></tr><tr><th>`時刻印$rP
</th><td>現在の時刻印

</td></tr><tr><th>`試行数$rP
</th><td>0

</td></tr></tbody></table>

◎
body
• data 
origin
• settings’s origin 
group
• endpoint group 
type
• type 
timestamp
• The current timestamp. 
attempts
• 0 
</div>

	</li>

	<li>
%~url ~LET
%設定群 の`作成時の~URL$
◎
Let url be settings’s creation URL.
</li>
	<li>
%~url の ( `~username$url, `~password$url ) ~SET ( 空~文字列, ~NULL )
◎
Set url’s username to the empty string, and its password to null.
</li>
	<li>
%報告 の`~url$rP ~SET ［
%素片除外~flag ~SET ~ON
］を与える下で，
%~url を`~URL直列化器$にかけた結果
◎
Set report’s url to the result of executing the URL serializer on url with the exclude fragment flag set.
</li>
	<li>
%報告 を`報告用~cache$に追加する
◎
Add report to the reporting cache.
</li>

</ol>

<p class="note">注記：
報告~内の直列化された~URLからは，［
`~username$url, `~password$url, `素片$url
］は剥取られる。
<a href="#capability-urls">~capability~URL 節</a>
を見よ。
◎
Note: We strip the username, password, and fragment from the serialized URL in the report. See §7.1 Capability URLs.
</p>

<p class="note">注記：
~UAは、何か事由があれば，報告を却下して~MAY。
具体的には、この~APIは，任意の量の~dataに対する送達は保証しない。
◎
Note: The user agent MAY reject reports for any reason. This API does not guarantee delivery of arbitrary amounts of data, for instance.
</p>



		</section>
		<section id="does-endpoint-match-report">
<h3 title="Does endpoint match report? ">4.2. %報告先 は %報告 に合致するか？</h3>

<p>
この~algoは、所与の
( `報告先$ %報告先, `報告$ %報告 )
に対し，［
%報告 を %報告先 へ送信するべきならば `合致es^i ／
~ELSE_ `非合致^i
］を返す：
◎
Given an endpoint (endpoint) and a report (report), this algorithm returns "Match" if report should be sent to endpoint, and "Does Not Match" otherwise:
</p>

<ol>
	<li>
<p>
~FOR
%報告先 の`~client~list$eP内の ~EACH ( %~client ) に対し：
◎
For each client in endpoint’s clients:
</p>

		<ol>
			<li>
<p>
~IF［
%~client は`失効した$cL
］
⇒
~CONTINUE
◎
If client is expired, skip to the next client.
</p>

<p class="note">注記：
この事例では、~UAは %報告先 から %~client を除去して~MAY。
あるいは、後で一括して`~garbage収集-$して~MAY。
◎
Note: In this case, the user agent MAY remove client from endpoint, or it may wait and collect garbage en masse at some point in the future as described in §5.2 Garbage Collection.
</p>
			</li>
			<li>
~IF［
( %報告 の`~group$rP, %~client の`~group$cL )
は`~ASCII文字大小無視$で合致する
］
⇒
~RET `合致es^i：
◎
Return "Match" if each of the following criteria is met:
◎
• report’s group is an ASCII case-insensitive match for client’s group
</li>
			<li>
~IF［
%~client の`下位domain~flag$cL ~EQ `exclude^l
］
⇒
~IF［
( %報告 の`生成元$rP, %~client の`生成元$cL )
は同じである【おそらく “同一生成元”】
］
⇒
~RET `合致es^i：
◎
• If client’s subdomains is "exclude", report’s origin is the same as client’s origin
</li>
			<li>
~ELIF［
( %報告 の`生成元$rPの `host$m, %~client の`生成元$cLの `host$m )
は、
<a href="~IETF/rfc6797#section-8.2">superdomain match or congruent match</a>
`rfc6797$r
］
⇒
~RET `合致es^i
◎
• Otherwise, report’s origin's host is either a superdomain match or congruent match for client’s origin's host [RFC6797]
</li>
		</ol>
	</li>
	<li>
~RET `非合致^i
◎
Return "Does Not Match".
</li>

</ol>



		</section>
		<section id="send-reports">
<h3 title="Send reports">4.3. 報告の送信-法</h3>

<p>
~UAは、報告を送信するときは，次の手続きを実行する：
◎
A user agent sends reports by executing the following steps:
</p>

<ol>
	<li>
%報告~list ~LET ［
`報告用~cache$内に待入された`報告$ ~objの~list
］の複製
◎
Let reports be a copy of the list of queued report objects in reporting cache.
</li>
	<li>
%報告先~map ~LET 空~map
— `報告先$の集合から［
`報告$~objの~list
］の集合への対応関係を与える
◎
Let endpoint map be an empty map of endpoint objects to lists of report objects.
</li>
	<li>
<p>
~FOR
%報告~list 内の ~EACH ( %報告 ) に対し：
◎
For each report in reports:
</p>
		<ol>
			<li>
%found ~LET ~F
</li>
			<li>
<p>
~FOR
`報告用~cache$内の~EACH ( %報告先 ) に対し：
◎
For endpoint in the reporting cache:
</p>

				<ol>
					<li>
<p>
~IF［
%報告先 は`失効した$eP
］
⇒
~CONTINUE
◎
If endpoint is expired, skip to the next endpoint.
</p>

<p class="note">注記：
~UAは`報告用~cache$から %報告先 を除去して~MAY。
あるいは、後で一括して`~garbage収集-$して~MAY。
◎
Note: In this case, the user agent MAY remove endpoint from the reporting cache, or it may wait and collect garbage en masse at some point in the future as described in §5.2 Garbage Collection.
</p>
					</li>
					<li>
~IF［
%報告先 は`処理待ち$eP
］
⇒
~CONTINUE
◎
If endpoint is pending, skip to the next endpoint.
</li>
					<li>
<p>
~IF［
( %報告先, %報告 )
を与える下で，
<a href="#does-endpoint-match-report">報告先は報告に合致するか？</a>
を実行した結果 ~EQ `合致es^i
］：
◎
If §4.2 Does endpoint match report? returns "Match" when executed upon endpoint and report:
</p>
						<ol>
							<li>
%報告先~map 内の［
%報告先 に対応する報告~list（なければ新たに作成する）
］に %報告 を付加する
◎
Append report to endpoint map’s list of reports for endpoint.
</li>
							<li>
%found ~LET ~T
◎
↓</li>
							<li>
<p>
~BREAK
◎
Skip to the next report.
</p>

<p class="note">注記：
この段は、各 報告 に対し，それが複数の報告先に合致するときでも，単独の報告先をあてがうことを確保する。
各 報告先に均等にふり分けるため、~UAは，報告先の巡回-順序を~randomizeするべきである。
◎
Note: This ensures that each report is assigned to a single endpoint, even if it matches multiple. In order to ensure an even distribution across endpoints, the user agent SHOULD randomize the order in which it walks through endpoints.
</p>
							</li>
						</ol>
					</li>
				</ol>
			</li>
			<li>
~IF［
%found ~EQ ~F （ %報告 はどの`報告先$にも合致しなかった）
］
⇒
~UAは、この時点で`報告用~cache$から %報告 を除去して~MAY。
あるいは，負荷が高ければ、未来のある時点まで`~garbage収集-$を待機して~MAY。
◎
If we reach this step, the report did not match any endpoint and the user agent MAY remove report from the reporting cache directly. Depending on load, the user agent MAY instead wait for §5.2 Garbage Collection at some point in the future.
</li>
		</ol>
	</li>
	<li>
~RET
— ただし、以下を並列的に実行する
</li>
	<li>
<p>
~FOR
%報告先~map 内の ~EACH ( ~pair ( %報告先, %報告~list ) ) に対し：
◎
For each (endpoint, reports) pair in endpoint map, execute the following steps asynchronously:
</p>

		<ol>
			<li>
%結果 ~LET
%報告~list を %報告先 へ
<a href="#try-delivery">送達するよう試みた</a>結果
◎
Let result be the result of executing §4.4 Attempt to deliver reports to endpoint on endpoint and reports.
</li>
			<li>
<p>
~IF［
%結果 ~EQ `成功^i
］：
◎
If result is "Success":
</p>
				<ol>
					<li>
%報告先 の`失敗数$eP ~SET 0
◎
↓</li>
					<li>
%報告先 の`再試行時刻$eP ~SET ~NULL
◎
Set endpoint’s failures to 0, and its retry-after to null.
</li>
					<li>
`報告用~cache$から %報告~list 内の各`報告$を除去する
◎
Remove each report in reports from the reporting cache.
</li>
				</ol>
<p>
~ELSE：
◎
Otherwise:
</p>
				<ol>
					<li>
%報告先 の`失敗数$eP ~INCBY 1
◎
Increment endpoint’s failures.
</li>
					<li>
<p>
%報告先 の`再試行時刻$eP ~SET ~UAが選ぶ未来のある時点
◎
Set endpoint’s retry-after to a point in the future which the user agent chooses.
</p>

<p class="note">注記：
ここでは、特定0の~algoは指定しない。
が，~UAには、［
失敗数に応じて再試行~期間を増やすような，何らかの類の
べき乗打ち切り待機法（ exponential backoff ）~algo
］を使役した上で、［
一時的な失敗により同じ~scheduleで再試行されている他の報告と衝突しない
］ことを確保するため，［
その増分に~randomなゆらぎも加える
］ことが奨励される。
◎
Note: We don’t specify a particular algorithm here, but user agents are encouraged to employ some sort of exponential backoff algorithm which increases the retry period with the number of failures, with the addition of some random jitter to ensure that temporary failures don’t lead to a crush of reports all being retried on the same schedule.
</p>

<p class="issue">
良い~algoを述べる適当な文献を示す。
何もなければ wikipedia 。
◎
Add in a reasonable reference describing a good algorithm. Wikipedia, if nothing else.
</p>
					</li>
				</ol>
			</li>
		</ol>
	</li>
</ol>

<p class="note">注記：
~UAは、収集された［
報告／報告先
］のうち一部のみ送達するよう試みることにしても~MAY（例えば、一度にすべての報告を送信すると 帯域幅を過度に消費するとき, 等々）。
報告が~cacheから除去されるのは，成功裡に送達されてからに限られるので、ここで飛ばされた報告は，単に後で送達されることになる。
◎
Note: User agents MAY decide to attempt delivery for only a subset of the collected reports or endpoints (because, for example, sending all the reports at once would consume an unreasonable amount of bandwidth, etc). As reports are only removed from the cache when they’re successfully delivered, skipped reports will simply be delivered later.
</p>



		</section>
		<section id="try-delivery">
<h3 title="Attempt to deliver reports to endpoint">4.4. %報告~list を %報告先 へ送達するよう試みる</h3>

<p>
この~algoは、所与の
( `報告$の~list %報告~list, `報告先$ %報告先 )
に対し，`要請$を構築して， %報告先 へ送達するよう試みた上で、［
送達に成功したならば `成功^i ／
~ELSE_ ［
報告先が `410^st 応答を送信することにより，報告先としての自身を明示的に除去した
］ならば `報告先を除去-^i ／
~ELSE_ `失敗^i
］を返す：
◎
Given a list of reports (reports) and an endpoint (endpoint), this algorithm will construct a request, and attempt to deliver it to endpoint. It returns "Success" if that delivery succeeds, "Remove Endpoint" if the endpoint explicitly removes itself as a reporting endpoint by sending a 410 response, and "Failure" otherwise.
</p>

<ol>
	<li>
%~collection ~LET
新たな~ECMAScript
`Array^c ~obj
`ECMA-262$r
◎
Let collection be a new ECMAScript Array object [ECMA-262].
</li>
	<li>
<p>
~FOR
%報告~list 内の ~EACH ( %報告 ) に対し：
◎
For each report in reports:
</p>

		<ol>
			<li>
<p>
%~data ~LET
次の各種~propを有する新たな ~ECMAScript `Object^c
`ECMA-262$r：
◎
Let data be a new ECMAScript Object with the following properties [ECMA-262]:
</p>


<div>
<table><tbody><tr><th>`age^c
</th><td>%報告 の`時刻印$rP から現在の時刻までの，~milliseconds数による時間差

</td></tr><tr><th>`type^c
</th><td>%報告 の`種別$rP

</td></tr><tr><th>`url^c
</th><td>%報告 の`~url$rP

</td></tr><tr><th>`report^c
</th><td>%報告 の`本体$rP

</td></tr></tbody></table>

◎
age
• The number of milliseconds between report’s timestamp and the current time. 
type
• report’s type 
url
• report’s url 
report
• report’s body 
</div>


<p class="note">注記：
~skewの対象である~client側の時計には，依拠できないので、絶対的な時刻印ではなく， `age^c 属性を送達する。
<a href="#fingerprinting-clock-skew">時計~skew節</a>
も見よ
◎
Note: Client clocks are unreliable and subject to skew. We therefore deliver an age attribute rather than an absolute timestamp. See also §8.2 Clock Skew
</p>
	</li>
	<li>
%報告 の`試行数$rP ~INCBY 1
◎
Increment report’s attempts.
</li>
	<li>
%~data を %~collection に付加する
◎
Append data to collection.
</li>
		</ol>
	</li>
	<li>
<p>
%要請 ~LET 次のようにされた新たな`要請$
`FETCH$r：
◎
Let request be a new request with the following properties [FETCH]:
</p>

<div>
<table><tbody><tr><th>`~url$rq
</th><td>%報告先 の`~url$eP

</td></tr><tr><th>`~header~list$rq
</th><td>
`~header$
( `Content-Type^h / `application/report^l )
のみからなる，新たな`~header~list$

</td></tr><tr><th>`~client$rq
</th><td>~NULL

</td></tr><tr><th>`~window$rq
</th><td>`no-window^l

</td></tr><tr><th>`~skip-service-worker~flag$
</th><td>~ON

</td></tr><tr><th>`起動元$rq
</th><td>空~文字列

</td></tr><tr><th>`種別$rq
</th><td>`report^l

</td></tr><tr><th>`行先$rq
</th><td>空~文字列

</td></tr><tr><th>`~mode$rq
</th><td>`cors^l

</td></tr><tr><th>`資格証~mode$rq
</th><td>`include^l

</td></tr><tr><th>`本体$rq
</th><td>
%~collection に対し `JSON.stringify()$m ~algoを
実行した結果の文字列
`ECMA-262$r

</td></tr></tbody></table>

◎
url
• endpoint’s url 
header list
• A new header list containing a header named "Content-Type" whose value is "application/report" 
client
• null 
window
• "no-window" 
skip-service-worker flag
• Set. 
initiator
• "" 
type
• "report" 
destination
• "" 
mode
• "cors" 
credentials
• "include" 
body
• The string resulting from executing the JSON.stringify() algorithm on collection [ECMA-262] 
</div>



<p class="issue">
`種別$rq `report^l が~fetchに存在しない。
Talk to Anne.
◎
The "report" type does not exist in Fetch. Talk to Anne.
</p>
	</li>
	<li>
%要請 を`~fetch$する`~taskを待入する$
◎
Queue a task to fetch request.
</li>
	<li>
<a data-link-type="dfn" href="~FETCH#responses">応答を待機する</a>
(
%応答
)。
◎
Wait for a response (response).
</li>
	<li>
<p>
%応答 の`~status$rsに応じて：
</p>
		<dl>
			<dt>`~ok~status$（ `200^st 〜 `299^st ）である</dt>
			<dd>
~RET `成功^i
◎
If response’s status is an OK status (200-299), return "Success".
</dd>

			<dt>`410^st （ Gone ） `RFC7231$r</dt>
			<dd>
~RET `報告先を除去-^i
◎
If response’s status is 410 Gone [RFC7231], return "Remove Endpoint".
</dd>
			<dt>その他</dt>
			<dd>
~RET `失敗^i
◎
Return "Failure".
</dd>
		</dl>
	</li>
</ol>

		</section>
	</section>
	<section id="implementation">
<h2 title="Implementation Considerations">5. 実装にあたっての考慮点</h2>



		<section id="delivery">
<h3 title="Delivery">5.1. 送達</h3>

<p>
開発者に可能0な限り素早く~feedbackを提供するため、~UAは，可能0な限り早く報告を送達するよう試みるべきである。
しかしながら，これには、利用者への影響0との兼ね合いも加味される
— 利用者が~~優先される。
そのことを念頭に、~UAは、利用者の活動や文脈について自身が有する知識に基づいて，報告の送達を延期して~MAY。
◎
The user agent SHOULD attempt to deliver reports as soon as possible to provide feedback to developers as quickly as possible. However, when this desire is balanced against the impact on the user, the user wins. With that in mind, the user agent MAY delay delivery of reports based on its knowledge of the user’s activities and context.
</p>

<p>
具体的には、~UAは，報告する~data伝送の優先度を他の~network流通より低く抑えるべきである。
利用者による明示的な~website活動があれば、報告よりその流通を先にくり上げるべきである。
◎
For instance, the user agent SHOULD prioritize the transmission of reporting data lower than other network traffic. The user’s explicit activities on a website should preempt reporting traffic.
</p>

<p>
不必要な~data~costを防止するため、~UAは、報告の送達を 利用者にとって~networkが高速で軽くなるまで，まるごと保留することを選んで~MAY。
◎
The user agent MAY choose to withhold report delivery entirely until the user is on a fast, cheap network in order to prevent unnecessary data cost.
</p>

<p>
~UAは、生成元に応じて報告の優先度を~~操作して~MAY（おそらく，利用者が最も頻繁に訪問する生成元を優先する？）
◎
The user agent MAY choose to prioritize reports from particular origins over others (perhaps those that the user visits most often?)
</p>



		</section>
		<section id="gc">
<h3 title="Garbage Collection">5.2. ~garbage収集</h3>

<p>
~UAは、~cacheされた`報告$や`報告先$を，定期的に巡回した上で、関連しなくなったものについては破棄するべきである。
これらには、次が含まれる：
◎
Periodically, the user agent SHOULD walk through the cached reports and endpoints, and discard those that are no longer relevant. These include:
</p>


<ul>
	<li>
<p>
次のいずれかを満たす`報告先$：
</p>
		<ul>
			<li>
`失効した$ePもの
◎
endpoints which are expired
</li>
			<li>
ある任意の期間~利用されていない（一週間くらい？）もの
◎
endpoints which have not been used in some arbitrary period of time (perhaps a week?)
</li>
			<li>
`失敗数$ePが［
~UA定義0のある閾値（ 5 回くらいが適当？）
］を超過したもの
◎
endpoints whose failures exceed some user-agent-defined threshold (~5 seems reasonable)
</li>
		</ul>
	</li>
	<li>
<p>
次のいずれかを満たす`報告$：
</p>
		<ul>
			<li>
`試行数$rPが［
~UA定義0のある閾値（ 5 回くらいが適当？）
］を超過したもの
◎
reports whose attempts exceed some user-agent-defined threshold (~5 seems reasonable)
</li>
			<li>
任意のある期間（ 2 日くらい？）送達されていないもの
◎
reports which have not been delivered in some arbitrary period of time (perhaps ~2 days?)
</li>
		</ul>
	</li>
</ul>

		</section>
	</section>
	<section id="sample-reports">
<h2 title="Sample Reports">6. 報告の見本</h2>

<div class="example">

<pre class="http-code">
POST / HTTP/1.1
Host: example.com
...
Content-Type: application/report

[{
  type: "csp",
  age: 10,
  url: "https://example.com/vulnerable-page/",
  report: {
    "blocked": "https://evil.com/evil.js",
    "directive": "script-src",
    "policy": "script-src 'self'; object-src 'none'",
    "status": 200,
    "referrer": "https://evil.com/"
  }
}, {
  type: "hpkp",
  age: 32,
  url: "https://www.example.com/",
  report: {
    "date-time": "2014-04-06T13:00:50Z",
    "hostname": "www.example.com",
    "port": 443,
    "effective-expiration-date": "2014-05-01T12:40:50Z"
    "include-subdomains": false,
    "served-certificate-chain": [
      "-----BEGIN CERTIFICATE-----\n
      MIIEBDCCAuygAwIBAgIDAjppMA0GCSqGSIb3DQEBBQUAMEIxCzAJBgNVBAYTAlVT\n
      ...
      HFa9llF7b1cq26KqltyMdMKVvvBulRP/F/A8rLIQjcxz++iPAsbw+zOzlTvjwsto\n
      WHPbqCRiOwY1nQ2pM714A5AuTHhdUDqB1O6gyHA43LL5Z/qHQF1hwFGPa4NrzQU6\n
      yuGnBXj8ytqU0CwIPX4WecigUCAkVDNx\n
      -----END CERTIFICATE-----",
      ...
    ]
  }
}, {
  type: "nel",
  age: 29,
  url: "https://example.com/thing.js",
  report: {
    "referrer": "https://www.example.com/",
    "server-ip": "234.233.232.231",
    "protocol": "",
    "status-code": 0,
    "elapsed-time": 143,
    "age": 0,
    "type": "http.dns.name_not_resolved"
  }
}]
</pre>
</div>

	</section>
	<section id="security">
<h2 title="Security Considerations">7. 保安~上の考慮点</h2>



		<section id="capability-urls">
<h3 title="Capability URLs">7.1. ~capability~URL</h3>

<p>
~URLには，それ自体が有価値なものもある。
そのような~URLが，この仕様の報告処理の仕組みを介して漏洩される可能性を軽減するため、`報告$の出自者として格納される~URLからは，［
資格証, `素片$url
］の~dataは剥取られる。
しかしながら，特色機能により、そのような~dataが 報告の`本体$rPを介して意図せず漏洩される可能性も，依然としてある。
実装者は、報告の本体に包含された~URLに対しても，同様に剥取られることを確保するべきである。
◎
Some URLs are valuable in and of themselves. To mitigate the possibility that such URLs will be leaked via this reporting mechanism, we strip out credential information and fragment data from the URL we store as a report’s originator. It is still possible, however, for a feature to unintentionally leak such data via a report’s body. Implementers SHOULD ensure that URLs contained in a report’s body are similarly stripped.
</p>

		</section>
	</section>
	<section id="privacy">
<h2 title="Privacy Considerations">8. ~privacy上の考慮点</h2>



		<section id="network-leakage">
<h3 title="Network Leakage">8.1. ~network漏洩</h3>

<p>
この報告処理の仕組みは帯域外であり，~pageが開かれていることに依拠しないので、
利用者が［
ある~network上にいる間に生成された報告が，別の~network上にいる間に送信される
］ことも
— 報告の送信-元~pageが明示的に開かれていなくとも —
まったく可能0になる。
◎
Because this reporting mechanism is out-of-band, and doesn’t rely on a page being open, it’s entirely possible for a report generated while a user is on one network to be sent while the user is on another network, even if they don’t explicitly open the page from which the report was sent.
</p>

<p class="issue">
軽減策を考慮する。
例えば、ある~networkを別のへ変更したときに，報告を落とすこともできるような。
<a href="https://github.com/WICG/BackgroundSync/issues/107">&lt;https://github.com/WICG/BackgroundSync/issues/107&gt;</a>
◎
Consider mitigations. For example, we could drop reports if we change from one network to another. &lt;https://github.com/WICG/BackgroundSync/issues/107&gt;
</p>



		</section>
		<section id="fingerprinting-clock-skew">
<h3 title="Clock Skew">8.2. 時計~skew</h3>

<p>
利用者~側の局所~時計は，~server上の時計から任意の量だけ~skewされるので、各~報告には，それが生成された時点の時刻印でなく， `age^c ~propが伴われて送達される。
これにより、報告の［
生成-時刻と送信-時刻
］の差異は、時計~skewに関わらずで~~一定になり、この~APIを介する時計~skewが公開されることによる~fingerprintingの~riskも避けれる。
◎
Each report is delivered along with an age property, rather than the timestamp at which it was generated. We do this because each user’s local clock will be skewed from the clock on the server by an arbitrary amount. The difference between the time the report was generated and the time it was sent will be stable, regardless of clock skew, and we can avoid the fingerprinting risk of exposing the clock skew via this API.
</p>

		</section>
		<section id="correlation">
<h3 title="Cross-origin correlation">8.3. 非同一生成元の相関付け</h3>

<p>
複数の生成元がすべて同じ報告先を利用する場合、その報告先は，［
それぞれから生成元~付きの報告を受信する
］ことになるので、特定0の利用者がある~websiteの集合とやりとりしたことを学習できることになる。
これは、［
協同する複数の生成元による，同じ情報を追跡する能
］がある現状を，より悪化させるものには見えない。
それは、［
今日における `&lt;img&gt;^c で可能0なもの
］以上の新たな追跡~能を容認するものではない。
◎
If multiple origins all use the same reporting endpoint, that endpoint may learn that a particular user has interacted with a certain set of websites, as it will receive origin-tagged reports from each. This doesn’t seem worse than the status quo ability to track the same information from cooperative origins, and doesn’t grant any new tracking ability above and beyond what’s possible with &lt;img&gt; today.
</p>



		</section>
		<section id="subdomains">
<h3 title="Subdomains">8.4. 下位domain</h3>

<p>
この仕様は、~host上の~~任意の資源が［
その~hostや, その各 下位domain
］に対する報告先の集合を宣言できるようにする。
それ自体には（
<a href="#clear-cache">報告用~cacheの消去法 節</a>
に注記するものを超えるような）~privacy上の含意はない
— 報告先~自身は，どのような実の動作もとらず、特色機能は，これらの報告先を明示的に利用して~opt-intoする必要があるので。
それらの特色機能には，まず間違いなく~privacy上の含意があるので、それらが生成元~境界を超えて可能化されるべきかどうかは，注意深く考慮するべきである。
◎
This specification allows any resource on a host to declare a set of reporting endpoints for that host and each of its subdomains. This doesn’t have privacy implications in and of itself (beyond those noted in §8.5 Clearing the reporting cache), as the reporting endpoints themselves don’t take any real action, as features will need to opt-into using these reporting endpoints explicitly. Those features certainly will have privacy implications, and should carefully consider whether they should be enabled across origin boundaries.
</p>



		</section>
		<section id="clear-cache">
<h3 title="Clearing the reporting cache">8.5. 報告用~cacheの消去法</h3>

<p>
~UAの`報告用~cache$は、利用者の~webにおける活動についての~dataを包含するので、~UAは，この~dataを注意深く取扱うべきである。<!-- ought -->
特に、［
~site~data, 閲覧~履歴, 閲覧~cache, これらに類するもの
］を消去する能を，利用者に供する~UAは、`報告用~cache$も消去し~MUST。
これには、処理待ちの報告たちに加え，それらの送信-先の報告先たちも含まれることに注意。
両者とも消去され~MUST。
◎
A user agent’s reporting cache contains data about a user’s activity on the web, and user agents ought to handle this data carefully. In particular, if a user agent gives users the ability to clear their site data, browsing history, browsing cache, or similar, the user agent MUST also clear the reporting cache. Note that this includes both the pending reports themselves, as well as the endpoints to which they would be sent. Both MUST be cleared.
</p>



		</section>
		<section id="disable">
<h3 title="Disabling Reporting">8.6. 報告処理の不能化法</h3>

<p>
報告処理は、ある~~範囲までは，公共性に関わる。
報告が送達されることは、総体として，誰にとっても有用であろう。
~bugを修正できる開発者には，直接的な便益があり、それにより利用者たちが楽しむ~siteも，より安定的かつ楽しめるものになるので、利用者も間接的な便益を得ることになる。
具体例として，~CSPは、~siteの防壁~内にありうる穴について開発者に警戒を促すことにより，XSS 攻撃に対する集団免疫
【<a href="https://en.wikipedia.org/wiki/Herd_immunity">herd immunity</a>】
の様なものを促進する。
それらの~bugの修正は、~CSPを~supportしない~UAを利用している利用者までも助ける。
◎
Reporting is, to some extent, a question of commons. In the aggregate, it seems useful for everyone for reports to be delivered. There is direct benefit to developers, as they can fix bugs, which means there’s indirect benefit to users, as the sites they enjoy will be more stable and enjoyable. As a concrete example, Content Security Policy grants something like herd immunity to cross-site scripting attacks by alerting developers about potential holes in their sites' defenses. Fixing those bugs helps every user, even those whose user agents don’t support Content Security Policy.
</p>

<p>
計算法は、もちろん，送達されている~dataの資質と報告先の相対的な悪意度に依存するが、それは，大雑把に言えば価値提案である。
◎
The calculus, of course, depends on the nature of data that’s being delivered, and the relative maliciousness of the reporting endpoints, but that’s the value proposition in broad strokes.
</p>

<p>
それでも、この一般~便益が，そのような~systemを個々に~opt-outする利用者の~~能を超えて優先されるようなことは、許容されない。
報告の送信には帯域幅~costがかかることに加え、~websiteが帯域内で得られる以上の，少量の情報も露わにし得る（ 具体的には `NETWORK-ERROR-LOGGING$r ）。
`HTML-DESIGN$r にて信奉されている有権者の優先度を保守するため、~UAは，利用者が報告処理を適度な粒度で不能化できるようにし~MUST。
◎
That said, it can’t be the case that this general benefit be allowed to take priority over the ability of a user to individually opt-out of such a system. Sending reports costs bandwidth, and potentially could reveal some small amount of additional information above and beyond what a website can obtain in-band ([NETWORK-ERROR-LOGGING], for instance). User agents MUST allow users to disable reporting with some reasonable amount of granularity in order to maintain the priority of constituencies espoused in [HTML-DESIGN-PRINCIPLES].
</p>

		</section>
	</section>
	<section id="iana-considerations">
<h2 title="IANA Considerations">9. IANA 考慮点</h2>

<p>
恒久的~message~header登記簿は、次の登録で更新されるべきである：
`RFC3864$r
◎
The permanent message header field registry should be updated with the following registration: [RFC3864]
</p>

		<section id="iana-report-to">
<h3 title="Report-To ">9.1. `Report-To^h</h3>

<div>
<table><tbody><tr><th>~header名前
</th><td>`Report-To^h

</td></tr><tr><th>適用し得る~protocol
</th><td>http

</td></tr><tr><th>~status
</th><td>標準

</td></tr><tr><th>~~著作／変更管理者
</th><td>W3C

</td></tr><tr><th>仕様~文書
</th><td>この仕様（
<a href="#header">`Report-To^h ~HTTP 応答~header 節</a>
を見よ）

</td></tr></tbody></table>

◎
Header field name
• Report-To 
Applicable protocol
• http 
Status
• standard 
Author/Change controller
• W3C 
Specification document
• This specification (see §3.1 The Report-To HTTP Response Header Field) 
</div>

		</section>
	</section>

</main></div>


	<section id="index">
<h2 title="Index">索引</h2>

<p class="trans-note">【
この節の内容は省略（ウィンドウ下端の索引機能を利用されたし）。
】</p>

<!-- 
		<section id="index-defined-here">
<h3 title="Terms defined by this specification">この仕様にて定義される用語</h3>

		</section>
		<section id="index-defined-elsewhere">
<h3 title="Terms defined by reference">他の仕様にて定義される用語</h3>

		</section>
-->

	</section>
	<section id="references">
<h2 title="References">参照文献</h2>

		<section id="normative">
<h3 title="Normative References">文献（規範的）</h3>

<dl>
	<dt>[CSP]</dt>
	<dd>Content Security Policy, Mike West, Adam Barth and Dan Veditz. W3C.</dd>
	<dd>https://w3c.github.io/webappsec-csp/</dd>
	<dd class="trans-note">【
このバージョン（ 3 ）の [CSP] は、この訳による補完。
】</dd>

	<dt>[ECMA-262]</dt>
	<dd>ECMAScript Language Specification.</dd>
	<dd>https://tc39.github.io/ecma262/</dd>

	<dt>[FETCH]</dt>
	<dd>Anne van Kesteren. Fetch Standard. Living Standard.</dd>
	<dd>https://fetch.spec.whatwg.org/</dd>

	<dt>[HTML]</dt>
	<dd>Ian Hickson. HTML Standard. Living Standard.</dd>
	<dd>https://html.spec.whatwg.org/multipage/</dd>

	<dt>[HTTP-JFV]</dt>
	<dd>Julian Reschke. A JSON Encoding for HTTP Header Field Values.</dd>
	<dd>https://greenbytes.de/tech/webdav/draft-reschke-http-jfv-02.html</dd>

	<dt>[RFC3864]</dt>
	<dd>G. Klyne; M. Nottingham; J. Mogul. Registration Procedures for Message Header Fields. September 2004. Best Current Practice.</dd>
	<dd>https://tools.ietf.org/html/rfc3864</dd>

	<dt>[RFC5234]</dt>
	<dd>D. Crocker, Ed.; P. Overell. Augmented BNF for Syntax Specifications: ABNF. January 2008. Internet Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc5234</dd>

	<dt>[RFC6797]</dt>
	<dd>J. Hodges; C. Jackson; A. Barth. HTTP Strict Transport Security (HSTS). November 2012. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc6797</dd>

	<dt>[RFC7159]</dt>
	<dd>T. Bray, Ed.. The JavaScript Object Notation (JSON) Data Interchange Format. March 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7159</dd>

	<dt>[RFC7231]</dt>
	<dd>R. Fielding, Ed.; J. Reschke, Ed.. Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content. June 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7231</dd>

	<dt>[SECURE-CONTEXTS]</dt>
	<dd>Mike West; Yan Zhu. Secure Contexts.</dd>
	<dd>https://w3c.github.io/webappsec-secure-contexts/</dd>

	<dt>[WHATWG-URL]</dt>
	<dd>Anne van Kesteren; Sam Ruby. URL Standard. Living Standard.</dd>
	<dd>https://url.spec.whatwg.org/</dd>
</dl>

		</section>
		<section id="informative">
<h3 title="Informative References">文献（参考）</h3>

<dl>

	<dt>[CSP1]</dt>
	<dd>Brandon Sterne; Adam Barth. Content Security Policy 1.0. 19 February 2015. NOTE.</dd>
	<dd>http://www.w3.org/TR/CSP1/</dd>

	<dt>[HTML-DESIGN-PRINCIPLES]</dt>
	<dd>Anne van Kesteren; Maciej Stachowiak. HTML Design Principles. 26 November 2007. WD.</dd>
	<dd>http://www.w3.org/TR/html-design-principles/</dd>

	<dt>[NETWORK-ERROR-LOGGING]</dt>
	<dd>Ilya Grigorik; et al. Network Error Logging. 25 February 2016. WD.</dd>
	<dd>http://www.w3.org/TR/network-error-logging/</dd>

	<dt>[RFC7469]</dt>
	<dd>C. Evans; C. Palmer; R. Sleevi. Public Key Pinning Extension for HTTP. April 2015. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7469</dd>
</dl>

		</section>
	</section>
	<section id="issues-index">
<h2 title="Issues Index" data-cycling=".issue">課題索引</h2>
<p class="trans-note">【
この節の内容は省略（見出しクリックで巡回）。
】</p>

	</section>
