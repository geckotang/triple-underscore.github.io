<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>RFC 6902 - JavaScript Object Notation (JSON) Patch （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="RFC-common.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>

COMMON_DATA.init = function(expanded){
//	if(!expanded) supply();
	return {
		original_url: 'http://tools.ietf.org/html/rfc6902',
		spec_status: 'IETFPR',
		no_original_dfn: true,
		no_index: true,
		main: 'MAIN',
		toc: 'toc',
		alt_refs: 'section-9',
		word_switch: 'replace_table'
	};
//	del_j(); 検証済み
}

</script>

<style type="text/css">
</style>
</head>

<body>

<div style="display:none;"><input id="_page_config" value="" type="hidden"></div>

<aside class="trans-meta">

<h1>RFC6902 — JavaScript Object Notation (JSON) Patch 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.ietf.org/">IETF</a>
による， 2013 年 4 月発行 PROPOSED STANDARD
<a href="http://www.ietf.org/rfc/rfc6902.txt">RFC 6902</a>
（<a href="http://tools.ietf.org/html/rfc6902">HTML 版</a>）
"JavaScript Object Notation (JSON) Patch"
を日本語に翻訳したものです。
<strong >この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語訳は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p >
更新：<time>2016-01-05</time>
（公開： <time>2013-05-19</time>）
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン
— CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります
— 原文ソース比較 検証済み）。
</p>

<address id="_CONTACT">　</address>

</aside>


<header>

<table class="meta-info"><tbody><tr><th colspan="2">
Internet Engineering Task Force (IETF)

</th></tr><tr><th title="Request for Comments">RFC
</th><td>6902

</td></tr><tr><th title="Category">分類
</th><td>Standards Track

</td></tr><tr><th>ISSN
</th><td>2070-1721

</td></tr></tbody></table>

<table class="meta-info"><tbody><tr><th>編集
</th><td>
P. Bryan, Ed. Salesforce.com;<br />
M. Nottingham, Ed. Akamai;<br />

</td></tr><tr><th>発行
</th><td>2013 年 4 月

</td></tr></tbody></table>

</header>

<h1 title="JavaScript Object Notation (JSON) Patch">JavaScript Object Notation (JSON) Patch</h1>

<h2 title="Abstract">要約</h2>

<p>
JSON Patch は、
JavaScript Object Notation （ JSON ）文書に適用する
一連の演算を表記するための JSON 文書構造を規定する。
これは HTTP PATCH メソッドでの利用に適するものである。
その種のパッチ文書の識別には，
"<code>application/json-patch+json</code>"
メディア型が利用される。
<span lang="en">
JSON Patch defines a JSON document structure for expressing a sequence of operations to apply to a JavaScript Object Notation (JSON) document; it is suitable for use with the HTTP PATCH method. The "application/json-patch+json" media type is used to identify such patch documents.
</span></p>

<h2 title="Status of This Memo">このメモの位置付け</h2>

<p>
これは、 Internet Standards Track 文書である。
<span lang="en">
This is an Internet Standards Track document.
</span></p>

<p>
この文書は、
<abbr title="Internet Engineering Task Force">IETF</abbr>
よる成果物であり，
IETF コミュニティの合意を表現するものである。
それは、公開の評価を受け，
<abbr title="Internet Engineering Steering Group">IESG</abbr>
から発行が承認されたものである。
Internet 標準についての更なる情報は
<a href="http://tools.ietf.org/html/rfc5741#section-2">RFC5741 2 節</a>
に見られる。
<span lang="en">
This document is a product of the Internet Engineering Task Force (IETF). It represents the consensus of the IETF community. It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG). Further information on Internet Standards is available in Section 2 of RFC 5741.
</span></p>

<p>
この文書の現在の位置付け, 正誤表, フィードバックの仕方についての情報は、
<a href="http://www.rfc-editor.org/info/rfc6902">http://www.rfc-editor.org/info/rfc6902</a>
から得られる。
<span lang="en">
Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at http://www.rfc-editor.org/info/rfc6902.
</span></p>


<h5 title="Copyright Notice">著作権の告知</h5>
<p>
Copyright (c) 2013 IETF Trust and the persons identified as the document authors. All rights reserved.
</p>

<p>
この文書は、その発行の日付から有効な、
<a href="http://tools.ietf.org/html/bcp78">BCP 78</a>,
および IETF Trust の IETF Documents に対する Legal Provisions Relating の対象になる（
<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>
）。
これらの文書には，この文書に関するあなたの権利と制約条項が述べらているので、入念に査読されたし。
この文書から取り出された Code Components は、
Trust Legal Provisions の Section 4.e
に述べられるように， Simplified BSD License テキストを含んでいなければならず、
Simplified BSD License に記されるように，無保証で提供される。
<span lang="en">
This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
</span></p>

<nav class="toc" id="toc">
<h2 title="Table of Contents">目次</h2>
<!-- auto generated -->
</nav>

<main id="MAIN">

<section id="section-1">

<h2 title="Introduction">1. 概要</h2>

<p>
JavaScript Object Notation （ JSON ）
<a href="#ref-RFC4627">[RFC4627]</a>
は、構造データの交換と格納のための共通の形式である。
HTTP PATCH
<a href="#ref-RFC5789">[RFC5789]</a>
は、
Hypertext Transfer Protocol （ HTTP ）
<a href="#ref-RFC2616">[RFC2616]</a>
に，リソースに対する部分的な変更を加えるためのメソッドを追加<!--0-->して それを拡張する。
<span lang="en">
JavaScript Object Notation (JSON) [RFC4627] is a common format for the exchange and storage of structured data. HTTP PATCH [RFC5789] extends the Hypertext Transfer Protocol (HTTP) [RFC2616] with a method to perform partial modifications to resources.
</span></p>

<p>
JSON Patch は、目的の JSON 文書に適用する一連の演算を表記するための（メディア型 "<code>application/json-patch+json</code>" により識別される）文書<!---->形式である。
これは HTTP PATCH メソッドでの利用に適するものである。
<span lang="en">
JSON Patch is a format (identified by the media type "application/json-patch+json") for expressing a sequence of operations to apply to a target JSON document; it is suitable for use with the HTTP PATCH method.
</span></p>

<p>
この形式は、 JSON 文書, あるいは同種の拘束を有するデータ構造（すなわち，JSON 文法を利用して，オブジェクトや配列に直列化し得るもの）に対し 部分的な更新が必要とされるような，他の事例にも有用になり得る。
<span lang="en">
This format is also potentially useful in other cases in which it is necessary to make partial updates to a JSON document or to a data structure that has similar constraints (i.e., they can be serialized as an object or an array using the JSON grammar).
</span></p>
</section>
<section id="section-2">

<h2 title="Conventions">2. 表記規約</h2>

<p>
この文書におけるキーワード：
「〜しなければ（〜しては）<em class="rfc2119">ならない</em>」 = “MUST (NOT)”,
「〜する（〜しない）<em class="rfc2119">ものとする</em>」 = “SHALL (NOT)”,
「〜する<em class="rfc2119">べき</em>である（でない）」 = “SHOULD (NOT)”
は、
RFC2119 <a href="#ref-RFC2119">[RFC2119]</a> に則って解釈されるものとする。
<span lang="en">
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 [RFC2119].
</span></p>

</section>
<section id="section-3">

<h2 title="Document Structure">3. 文書<!---->構造</h2>

<p>
JSON Patch 文書は、オブジェクトの配列を表現する JSON
<a href="#ref-RFC4627">[RFC4627]</a>
文書である。
各オブジェクトは、目的 JSON 文書に適用される１個の演算を表現する。
<span lang="en">
A JSON Patch document is a JSON [RFC4627] document that represents an array of objects. Each object represents a single operation to be applied to the target JSON document.
</span></p>

<p>
HTTP PATCH リクエストにより転送される JSON Patch 文書の例を示す：
<span lang="en">
The following is an example JSON Patch document, transferred in an HTTP PATCH request:
</span></p>

<pre class="example">
PATCH /my/data HTTP/1.1
Host: example.org
Content-Length: 326
Content-Type: application/json-patch+json
If-Match: "abc123"</pre>

<pre class="example">
[
  { "op": "test", "path": "/a/b/c", "value": "foo" },
  { "op": "remove", "path": "/a/b/c" },
  { "op": "add", "path": "/a/b/c", "value": [ "foo", "bar" ] },
  { "op": "replace", "path": "/a/b/c", "value": 42 },
  { "op": "move", "from": "/a/b/c", "path": "/a/b/d" },
  { "op": "copy", "from": "/a/b/d", "path": "/a/b/e" }
]</pre>

<p>
JSON Patch 文書の評価は、最初は目的 JSON 文書に対するものとして開始される。
各<!---->演算は、配列<!---->内に現れる順に，逐次的に適用され、適用される度に，その結果の文書が次の演算の目的文書になる。
評価は、すべての演算が成功裡に適用されるか, またはエラー状態に遭遇するまで継続される。
<span lang="en">
Evaluation of a JSON Patch document begins against a target JSON document. Operations are applied sequentially in the order they appear in the array. Each operation in the sequence is applied to the target document; the resulting document becomes the target of the next operation. Evaluation continues until all operations are successfully applied or until an error condition is encountered.
</span></p>

</section>
<section id="section-4">

<h2 title="Operations">4. 演算</h2>

<p>
演算オブジェクトは、きっかり１個の "<code>op</code>" メンバを持たなければ<em class="rfc2119">ならない</em>。
このメンバは，目的文書にて遂行される演算の種類を指示するものであり、その値は
"<code>add</code>",
"<code>remove</code>",
"<code>replace</code>",
"<code>move</code>",
"<code>copy</code>",
"<code>test</code>"
のいずれかでなければ<em class="rfc2119">ならず</em>，他の値はエラーである。
各種オブジェクトの意味論は後続の節にて規定される。
<span lang="en">
Operation objects MUST have exactly one "op" member, whose value indicates the operation to perform. Its value MUST be one of "add", "remove", "replace", "move", "copy", or "test"; other values are errors. The semantics of each object is defined below.
</span></p>

<p>
加えて、演算オブジェクトは，きっかり１個の "<code>path</code>" メンバを持たなければ<em class="rfc2119">ならない</em>。
そのメンバの値は、目的文書の中で演算が遂行される地点（ “目的地点” ）を指す， JSON-Pointer 値
<a href="#ref-RFC6901">[RFC6901]</a>
を与える文字列である。
<span lang="en">
Additionally, operation objects MUST have exactly one "path" member. That member's value is a string containing a JSON-Pointer value [RFC6901] that references a location within the target document (the "target location") where the operation is performed.
</span></p>

<p>
演算オブジェクトの他のメンバの意味は，演算の種別ごとに規定される（後続の下位節にて述べる）。
明示的に 当該の演算に関わるものと規定されていないメンバは、無視されなければ<em class="rfc2119">ならない</em>（すなわち，演算は、その演算に無関係なメンバについては オブジェクトに元々無かったかのように，遂行されることになる）。
<span lang="en">
The meanings of other operation object members are defined by operation (see the subsections below). Members that are not explicitly defined for the operation in question MUST be ignored (i.e., the operation will complete as if the undefined member did not appear in the object).
</span></p>

<p>
JSON オブジェクトの中でのメンバの順序付けは、有意でないことに注意。
したがって、次の演算オブジェクトは，いずれも等価である：
<span lang="en">
Note that the ordering of members in JSON objects is not significant; therefore, the following operation objects are equivalent:
</span></p>

<pre class="example">
{ "op": "add", "path": "/a/b/c", "value": "foo" }
{ "path": "/a/b/c", "op": "add", "value": "foo" }
{ "value": "foo", "path": "/a/b/c", "op": "add" }</pre>

<p>
演算は、 JSON 文書が表現するデータ構造に（すなわち エスケープ（
<a href="http://tools.ietf.org/html/rfc4627#section-2.5">[RFC4627], 2.5 節</a>
）が展開された後に），適用される。
<span lang="en">
Operations are applied to the data structures represented by a JSON document, i.e., after any unescaping (see [RFC4627], Section 2.5) takes place.
</span></p>
	<section id="section-4.1">

<h3 title="add">4.1. <code>add</code></h3>

<p>
"<code>add</code>" 演算は、目的地点が指しているものに応じて，次のいずれかを遂行する：
<span lang="en">
The "add" operation performs one of the following functions, depending upon what the target location references:
</span></p>
<ul>
	<li><p>
目的地点が 配列 index を指定している場合、その配列の中の 指定された index の位置に，新たな値が挿入される。
<span class="trans-note">【
index 0 が先頭を指す：
<a href="#ref-RFC6901">[RFC6901]</a>
の 4 節
<a href="http://tools.ietf.org/html/rfc6901#section-4">Evaluation</a>
（<a href="RFC6901-ja.html#section-4">和訳</a>）
】</span>
<span lang="en">
If the target location specifies an array index, a new value is inserted into the array at the specified index.
</span></p></li>

	<li><p>
目的地点が 存在しないオブジェクト<!---->メンバを指定している場合、そのオブジェクトに新たなメンバが追加される。
<span lang="en">
If the target location specifies an object member that does not already exist, a new member is added to the object.
</span></p></li>

	<li><p>
目的地点が 既存のオブジェクト<!---->メンバを指定している場合、そのメンバの値が置換される。
<span lang="en">
If the target location specifies an object member that does exist, that member's value is replaced.
</span></p></li>

</ul>

<p>
演算オブジェクトは、追加のための値をとる， "<code>value</code>" メンバを持っていなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The operation object MUST contain a "value" member whose content specifies the value to be added.
</span></p>

<p>
例：
<span lang="en">
For example:
</span></p>

<pre class="example">
{ "op": "add", "path": "/a/b/c", "value": [ "foo", "bar" ] }</pre>

<p>
目的地点は、演算が適用される時点で，次のいずれかを参照していなければ<em class="rfc2119">ならない</em>：
<span lang="en">
When the operation is applied, the target location MUST reference one of:
</span></p>
<ul>
	<li>
<p>
目的文書のルート — その結果，目的文書の内容全体が，指定された値に置き換わる†。
<span lang="en">
The root of the target document - whereupon the specified value becomes the entire content of the target document.
</span></p>

<p class="trans-note">【†
指定された値がオブジェクトでも配列でもない場合の結果は、
RFC 4627 では，合法でない JSON 文書にされていたが、
RFC 4627 を置き換える RFC 7159 により，
<a href="https://tools.ietf.org/html/rfc7159#appendix-A">合法にされた</a>。
<!-- 
指定された値がオブジェクトでも配列でもない場合の結果は，不正な JSON 文書になってしまうが、その場合は（ HTTP PATCH メソッドの下では）<a href="#section-5">5. エラーの取り扱い</a>に従うことになると見られる（ RFC5789 “Unprocessable request”）。
ただし、途中経過として一時的にそのような状態にはなるが最終的な結果は合法，のようなケースはどうなるのか、よくわからない。
 -->
】</p>

	</li>

	<li><p>
既存のオブジェクトに追加するメンバ
—
その結果、そのオブジェクトの中の指示された地点に，指定された値が追加される。
そのメンバが既存のものであった場合、それは指定された値に置換される。
<span lang="en">
A member to add to an existing object - whereupon the supplied value is added to that object at the indicated location. If the member already exists, it is replaced by the specified value.
</span></p></li>

	<li><p>
既存の配列に追加する要素
—
その結果、その配列の中の指示された地点に，指定された値が追加される。
指定された index 以上に位置する要素は，１つずつ後ろへずらされる。
指定された index が配列の要素数を超えては<em class="rfc2119">ならない</em>
<span class="trans-note">【
index が要素数に等しければ，末尾に付加
】</span>
。
配列の末尾 index を表す文字 "<code>-</code>" が利用された場合（
<a href="#ref-RFC6901">[RFC6901]</a>
を参照）、値は配列の末尾に付加されることになる。
<span lang="en">
An element to add to an existing array - whereupon the supplied value is added to the array at the indicated location. Any elements at or above the specified index are shifted one position to the right. The specified index MUST NOT be greater than the number of elements in the array. If the "-" character is used to index the end of the array (see [RFC6901]), this has the effect of appending the value to the array.
</span></p></li>
</ul>

<p>
この演算は，既存のオブジェクトや配列に値を追加するためにあるので、目的地点に値が存在しないことも度々あり得る。
したがって，
<span class="trans-note">【 RFC6901 の規定により】</span>
ポインタのエラーを取り扱うアルゴリズムが呼び出されることになるが、この仕様は、 "<code>add</code>" の下での，ポインタのエラーの際のふるまいを、そのエラーを無視し, 指定された値を追加するものと定める。
<span lang="en">
Because this operation is designed to add to existing objects and arrays, its target location will often not exist. Although the pointer's error handling algorithm will thus be invoked, this specification defines the error handling behavior for "add" pointers to ignore that error and add the value as specified.
</span></p>

<p>
しかしながら、それを含むオブジェクト自身または配列は，存在する必要があり、不在の場合はエラーになる。
例えば、次の文書から演算が開始されるときの，目的地点 "<samp>/a/b</samp>" による "<code>add</code>" は：
<span lang="en">
However, the object itself or an array containing it does need to exist, and it remains an error for that not to be the case. For example, an "add" with a target location of "/a/b" starting with this document:
</span></p>

<pre class="example">
{ "a": { "foo": 1 } }</pre>

<p>
"<samp>a</samp>" が存在するのでエラーではなく，その値に "<samp>b</samp>" に追加されることになる一方、次の文書の場合は：
<span lang="en">
is not an error, because "a" exists, and "b" will be added to its value. It is an error in this document:
</span></p>

<pre class="example">
{ "q": { "bar": 2 } }</pre>

<p>
"<samp>a</samp>" が存在しないのでエラーになる。
<span lang="en">
because "a" does not exist.
</span></p>

	</section>
	<section id="section-4.2">

<h3 title="remove">4.2. <code>remove</code></h3>

<p>
"<code>remove</code>" 演算は、目的地点から値を除去する。
<span lang="en">
The "remove" operation removes the value at the target location.
</span></p>

<p>
演算が成功とされるためには、目的地点が存在しなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The target location MUST exist for the operation to be successful.
</span></p>

<p>
例：
<span lang="en">
For example:
</span></p>

<pre class="example">
{ "op": "remove", "path": "/a/b/c" }</pre>

<p>
配列から要素が除去される際には、指定された index より先の要素は１つずつ先頭へずらされる。
<span lang="en">
If removing an element from an array, any elements above the specified index are shifted one position to the left.
</span></p>
	</section>
	<section id="section-4.3">

<h3 title="replace">4.3. <code>replace</code></h3>

<p>
"<code>replace</code>" 演算は、目的地点の値を新たな値で置換する。
演算オブジェクトは、置換のための値をとる "<code>value</code>" メンバを持っていなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The "replace" operation replaces the value at the target location with a new value. The operation object MUST contain a "value" member whose content specifies the replacement value.
</span></p>

<p>
演算が成功とされるためには、目的地点が存在しなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The target location MUST exist for the operation to be successful.
</span></p>

<p>
例：
<span lang="en">
For example:
</span></p>

<pre class="example">
{ "op": "replace", "path": "/a/b/c", "value": 42 }</pre>

<p>
この演算は、 "<code>remove</code>" 演算の直後に，同じ地点に，置換のための値を "<code>add</code>" 演算により追加するのと、機能的に同一である。
<span lang="en">
This operation is functionally identical to a "remove" operation for a value, followed immediately by an "add" operation at the same location with the replacement value.
</span></p>


	</section>
	<section id="section-4.4">

<h3 title="move">4.4. <code>move</code></h3>

<p>
"<code>move</code>" 演算は、指定された地点から値を除去して，目的地点にその値を追加する。
<span lang="en">
The "move" operation removes the value at a specified location and adds it to the target location.
</span></p>

<p>
演算オブジェクトは、目的文書<!---->内の，値の移動<!---->元の地点を指す JSON Pointer 文字列<!---->値をとる， "<code>from</code>" メンバを含んでいなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The operation object MUST contain a "from" member, which is a string containing a JSON Pointer value that references the location in the target document to move the value from.
</span></p>

<p>
演算が成功とされるためには、 "from" 地点が存在しなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The "from" location MUST exist for the operation to be successful.
</span></p>

<p>
例：
<span lang="en">
For example:
</span></p>

<pre class="example">
{ "op": "move", "from": "/a/b/c", "path": "/a/b/d" }</pre>

<p>
この演算は、 "from" 地点に対する "<code>remove</code>" 演算の直後に，その除去された値を， "<code>add</code>" 演算により目的地点に追加するのと、機能的に同一である。
<span lang="en">
This operation is functionally identical to a "remove" operation on the "from" location, followed immediately by an "add" operation at the target location with the value that was just removed.
</span></p>

<p class="trans-note">【
従って、移動<!---->先の目的地点は，除去された後の状態を基に適用されることになる（特に配列<!---->要素を移動させる場合に注意：用例 <a href="#appendix-A.7" >A.7</a> を参照）。
】</p>

<p>
値をその子孫へ移動させることはできない。
すなわち， "<code>from</code>" が指す地点が "<code>path</code>" が指す地点の適正な真の接頭辞になっては<em class="rfc2119">ならない</em>。
<span lang="en">
The "from" location MUST NOT be a proper prefix of the "path" location; i.e., a location cannot be moved into one of its children.
</span></p>

<p class="trans-note">【
“真の接頭辞” （ proper prefix ） —
上の例で述べるなら， "<code>from</code>" が "<code>path</code>" の先頭部分 "<samp>/a/b</samp>" や "<samp>/a</samp>" になってはならないが， "<code>path</code>" と同じ "<samp>/a/b/d</samp>" は許容される。
（文字列として先頭一致する場合でも，例えば "<code>from</code>" が "<samp>/a</samp>" で "<code>path</code>" が "<samp>/ab/c</samp>" のような場合は、子孫ではないので “真の接頭辞” とはみなされない。）
】</p>

	</section>
	<section id="section-4.5">

<h3 title="copy">4.5. <code>copy</code></h3>

<p>
"<code>copy</code>" 演算は、指定された地点から目的地点へ値を複製する。
<span lang="en">
The "copy" operation copies the value at a specified location to the target location.
</span></p>

<p>
演算オブジェクトには、目的文書の中の複製<!---->元の値の地点を指す JSON Pointer 文字列<!---->値をとる， "<code>from</code>" メンバが含まれていなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The operation object MUST contain a "from" member, which is a string containing a JSON Pointer value that references the location in the target document to copy the value from.
</span></p>

<p>
演算が成功とされるためには、 "from" 地点が存在しなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The "from" location MUST exist for the operation to be successful.
</span></p>

<p>
例：
<span lang="en">
For example:
</span></p>

<pre class="example">
{ "op": "copy", "from": "/a/b/c", "path": "/a/b/e" }</pre>

<p>
この演算は、 "<code>from</code>" メンバにより指定される値を， "<code>add</code>" 演算により目的地点に追加するのと、機能的に同一である。
<span lang="en">
This operation is functionally identical to an "add" operation at the target location using the value specified in the "from" member.
</span></p>
	</section>
	<section id="section-4.6">

<h3 title="test">4.6. <code>test</code></h3>

<p>
"<code>test</code>" 演算は、目的地点の値が指定された値に等しいかどうかテストする。
<span lang="en">
The "test" operation tests that a value at the target location is equal to a specified value.
</span></p>

<p>
演算オブジェクトには、目的地点の値と比較するための値をとる， "<code>value</code>" メンバが含まれていなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The operation object MUST contain a "value" member that conveys the value to be compared to the target location's value.
</span></p>

<p>
演算が成功と見なされるためには、目的地点の値が "<code>value</code>" の値と等しくなければ<em class="rfc2119">ならない</em>。
<span lang="en">
The target location MUST be equal to the "value" value for the operation to be considered successful.
</span></p>

<p>
ここで “等しい” とは、目的地点の値と "<code>value</code>" の値が同じ JSON 型であって, かつ
その型に応じて、次の規則に則って等しいとされることを意味する：
<span lang="en">
Here, "equal" means that the value at the target location and the value conveyed by "value" are of the same JSON type, and that they are considered equal by the following rules for that type:
</span></p>

<dl>
	<dt>文字列の場合</dt>
	<dd><p>
互いに同じ個数の Unicode 文字からなり，それぞれの符号位置がバイトごとに等しいとき、等しいとされる。
<span lang="en">
strings: are considered equal if they contain the same number of Unicode characters and their code points are byte-by-byte equal.
</span></p>

<p class="trans-note">【
バイトごとに（ byte-by-byte ） —
Unicode の正準等価などの文字の等価性についての種々の概念は適用せずに，単に符号単位<!-- Unicode 符号化形式 -->に基づく比較を行うことを指しているものと見られる。
】</p>
</dd>

	<dt>数値の場合</dt>
	<dd><p>
互いの値が数値的に等しいとき、等しいとされる。
<span lang="en">
numbers: are considered equal if their values are numerically equal.
</span></p></dd>

	<dt>配列の場合</dt>
	<dd><p>
互いの要素数が同じであり、かつ
互いの配列の中の同じ位置の値それぞれが，この型<!-- -->別の比較規則リストの下に 等しいとされるとき、等しいとされる。
<span lang="en">
arrays: are considered equal if they contain the same number of values, and if each value can be considered equal to the value at the corresponding position in the other array, using this list of type-specific rules.
</span></p></dd>

	<dt>オブジェクトの場合</dt>
	<dd><p>
(1) 同じ個数のメンバからなり, かつ
(2) それらのメンバの（文字列としての）キー名の集合が同じであり, かつ
(3) それらのメンバの同じ名前のキーに対応する値が，この型<!---->別の比較規則リストの下に 等しいとされるとき、等しいとされる。
<span lang="en">
objects: are considered equal if they contain the same number of members, and if each member can be considered equal to a member in the other object, by comparing their keys (as strings) and their values (using this list of type-specific rules).
</span></p>

<!-- 
【
同じ名前のキーが重複して存在する場合の扱いに，はっきりしない部分がある。
】
 -->
</dd>

	<dt>リテラル（ <code>false</code>, <code>true</code>, <code>null</code> ）の場合</dt>
	<dd><p>
２つの値が同じとき，等しいとされる。
<span lang="en">
literals (false, true, and null): are considered equal if they are the same.
</span></p></dd>

</dl>

<p>
比較は論理的に
<span class="trans-note">【
すなわち， JSON オブジェクトとして解釈された後に
】</span>
行われることに注意。
例えば、配列のメンバ値の合間の空白類は，比較においては有意でない。
<span lang="en">
Note that the comparison that is done is a logical comparison; e.g., whitespace between the member values of an array is not significant.
</span></p>

<p>
オブジェクトメンバの直列化における順序付けも有意でないことに注意。
<span lang="en">
Also, note that ordering of the serialization of object members is not significant.
</span></p>

<p>
例：
<span lang="en">
For example:
</span></p>

<pre class="example">
{ "op": "test", "path": "/a/b/c", "value": "foo" }</pre>
	</section>
</section>
<section id="section-5">

<h2 title="Error Handling">5. エラーの取り扱い</h2>

<p>
JSON Patch 文書の規範的な要件に違反している場合, あるいは
演算が成功裡に終わらなかった場合、 JSON Patch 文書の評価は終了される<em class="rfc2119">べき</em>であり，パッチ文書全体の適用は成功とは見なされない<em class="rfc2119">ものとする</em>。
<span lang="en">
If a normative requirement is violated by a JSON Patch document, or if an operation is not successful, evaluation of the JSON Patch document SHOULD terminate and application of the entire patch document SHALL NOT be deemed successful.
</span></p>

<p class="trans-note">【
“べき” —
HTTP PATCH メソッドの下での利用では，下記により “中途半端な成功” は明確に排除されているが、他の状況下では，選択の余地が残された記述になっている。
】</p>

<p>
<a href="http://tools.ietf.org/html/rfc5789#section-2.2">[RFC5789], 2.2 節</a>
にて、 JSON Patch が HTTP PATCH メソッドに利用されたときに，エラー状態に遭遇した際の取り扱いが（種々のエラー状態を指示するための，推薦される応答コードなども含め）挙げられている。
<span lang="en">
See [RFC5789], Section 2.2 for considerations regarding handling errors when JSON Patch is used with the HTTP PATCH method, including suggested status codes to use to indicate various conditions.
</span></p>

<p>
<a href="#ref-RFC5789">[RFC5789]</a>
に則り， HTTP PATCH メソッドは不可分的（ atomic ）になることに注意。
したがって，次のようなパッチでは、いかなる変更も文書に加えられないことになる（ "<code>test</code>" 演算の結果がエラーになるので）：
<span lang="en">
Note that the HTTP PATCH method is atomic, as per [RFC5789]. Therefore, the following patch would result in no changes being made to the document at all (because the "test" operation results in an error):
</span></p>

<pre class="example">
[
  { "op": "replace", "path": "/a/b/c", "value": 42 },
  { "op": "test", "path": "/a/b/c", "value": "C" }
]</pre>


</section>
<section id="section-6">

<h2 title="IANA Considerations">6. IANA 考慮点</h2>

<p>
JSON Patch 文書の Internet メディア型は
<code>application/json-patch+json</code>
である。
<span lang="en">
The Internet media type for a JSON Patch document is application/ json-patch+json.
</span></p>

<dl>
	<dt>型名<span lang="en">Type name</span></dt>
	<dd><code>application</code><span lang="en">application</span></dd>


	<dt>下位型名<span lang="en">Subtype name</span></dt>
	<dd><code>json-patch+json</code><span lang="en">json-patch+json</span></dd>


	<dt>必須パラメタ<span lang="en">Required parameters</span></dt>
	<dd>なし<span lang="en">none</span></dd>


	<dt>オプションのパラメタ<span lang="en">Optional parameters</span></dt>
	<dd>なし<span lang="en">none</span></dd>


	<dt>符号化方式についての考慮点<span lang="en">Encoding considerations</span></dt>
	<dd>バイナリ<span lang="en">binary</span></dd>


	<dt>保安上の考慮点<span lang="en">Security considerations</span></dt>
	<dd><a href="#section-7">7 節</a>，保安上の考慮点を見よ。<span lang="en">See Security Considerations in Section 7.</span></dd>


	<dt>相互運用性についての考慮点<span lang="en">Interoperability considerations</span></dt>
	<dd>N/A</dd>


	<dt>発行仕様<span lang="en">Published specification</span></dt>
	<dd><a href="http://tools.ietf.org/html/rfc6902">RFC 6902</a></dd>


	<dt>このメディア型のアプリケーション<span lang="en">Applications that use this media type</span></dt>
	<dd>JSON 文書を操作するアプリケーション。<span lang="en">Applications that manipulate JSON documents.</span></dd>


	<dt>追記情報<span lang="en">Additional information</span></dt>
	<dd>
		<ul>
			<li>マジックナンバー：N/A<span lang="en">Magic number(s):  N/A</span></li>
			<li>ファイル名拡張子： <code>.json-patch</code><span lang="en">File extension(s):  .json-patch</span></li>
			<li>Macintosh ファイルタイプコード： <code>TEXT</code><span lang="en">Macintosh file type code(s):  TEXT</span></li>
		</ul>
	</dd>

	<dt>更なる情報についての連絡先<span lang="en">Person &amp; email address to contact for further information</span></dt>
	<dd>Paul C. Bryan &lt;pbryan@anode.ca&gt;<span lang="en">Paul C. Bryan &lt;pbryan@anode.ca&gt;</span></dd>

	<dt>意図されている用途<span lang="en">Intended usage</span></dt>
	<dd>COMMON<span lang="en">COMMON</span></dd>

	<dt>利用における制約<span lang="en">Restrictions on usage</span></dt>
	<dd>なし<span lang="en">none</span></dd>

	<dt>著作者<span lang="en">Author</span></dt>
	<dd>Paul C. Bryan &lt;pbryan@anode.ca&gt;<span lang="en">Paul C. Bryan &lt;pbryan@anode.ca&gt;</span></dd>

	<dt>変更管理<span lang="en">Change controller</span></dt>
	<dd>IETF</dd>
</dl>



</section>
<section id="section-7">

<h2 title="Security Considerations">7. 保安上の考慮点</h2>

<p>
この仕様の保安上の考慮点は、
JSON
<a href="#ref-RFC4627">[RFC4627]</a>
と JSON Pointer
<a href="#ref-RFC6901">[RFC6901]</a>
と同じである。
<span lang="en">
This specification has the same security considerations as JSON [RFC4627] and JSON-Pointer [RFC6901].
</span></p>

<p>
少数の旧式ウェブブラウザにおいては、認証アクセスの下でも，ルートが配列であるような任意の JSON 文書の読み込みにおいて，
機密を要する情報が含まれている JSON Patch 文書が攻撃者に公開され得る。
これは Cross-Site Request Forgery （ CSRF ）
<a href="#ref-CSRF">CSRF</a>]
として知られている。
<span lang="en">
A few older Web browsers can be coerced into loading an arbitrary JSON document whose root is an array, leading to a situation in which a JSON Patch document containing sensitive information could be exposed to attackers, even if access is authenticated. This is known as a Cross-Site Request Forgery (CSRF) attack [CSRF].
</span></p>

<p>
しかしながら、その種のブラウザは限られた範囲でしか利用されていない（この仕様が書かれた時点での利用率は，概算で市場の 1% に満たないものと推定されている）。
にも拘らず，この攻撃について懸念があるならば、その種の文書が HTTP GET から利用されるのを避けるよう忠告する。
<span lang="en">
However, such browsers are not widely used (at the time of writing, it is estimated that they are used in less than 1% of the market). Publishers who are nevertheless concerned about this attack are advised to avoid making such documents available with HTTP GET.
</span></p>
</section>
<section id="section-8">

<h2 title="Acknowledgements">8. 謝辞</h2>

<p>
提案, フィードバック, 言い回しなど，この仕様に寄与された次の方々に感謝する：
<span lang="en">
The following individuals contributed ideas, feedback and wording to this specification:
</span></p>
   Mike Acar, Mike Amundsen, Cyrus Daboo, Paul Davis, Stefan Koegl,
   Murray S. Kucherawy, Dean Landolt, Randall Leeds, James Manger,
   Julian Reschke, James Snell, Eli Stevens, and Henry S. Thompson.

<p>
JSON Patch 文書の構造は、 XMLPatch 文書<!---->仕様
<a href="#ref-RFC5261">[RFC5261]</a>
から影響を受けている。
<span lang="en">
The structure of a JSON Patch document was influenced by the XML Patch document specification [RFC5261].
</span></p>
</section>
<section id="section-9">

<h2 title="References">9. 参照文献</h2>

	<section id="section-9.1">

<h3 title="Normative References">9.1. 文献（規範的）</h3>

<dl>
	<dt id="ref-RFC2119">[RFC2119]</dt>
	<dd>
Bradner, S., "Key words for use in RFCs to Indicate Requirement Levels",
<a href="./bcp14">BCP 14</a>,
<a href="http://tools.ietf.org/html/rfc2119">RFC 2119</a>, March 1997.
	</dd>

	<dt id="ref-RFC4627">[RFC4627]</dt>
	<dd>
Crockford, D.,
"The application/json Media Type for JavaScript Object Notation (JSON)",
<a href="http://tools.ietf.org/html/rfc4627">RFC 4627</a>, July 2006.
<span class="trans-note">【
<a href="http://tools.ietf.org/html/rfc7159">RFC 7159</a>
に置き換えられた。
】</span>

	</dd>

	<dt id="ref-RFC6901">[RFC6901]</dt>
	<dd>
 Bryan, P., Ed., Zyp, K., and M. Nottingham, Ed.,
"JavaScript Object Notation (JSON) Pointer",
<a href="http://tools.ietf.org/html/rfc6901">RFC 6901</a>,
April 2013.
	</dd>
</dl>

	</section>
	<section id="section-9.2">

<h3 title="Informative References">9.2. 文献（参考）</h3>

<dl>
	<dt id="ref-CSRF">[CSRF]</dt>
	<dd>
Barth, A., Jackson, C., and J. Mitchell,
"Robust Defenses for Cross-Site Request Forgery",
ACM Conference on Computer and Communications Security, October 2008,
&lt;<a href="http://seclab.stanford.edu/websec/csrf/csrf.pdf">http://seclab.stanford.edu/websec/csrf/csrf.pdf</a>&gt;.
	</dd>


	<dt id="ref-RFC2616">[RFC2616]</dt>
	<dd>
Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee,
"Hypertext Transfer Protocol -- HTTP/1.1",
<a href="http://tools.ietf.org/html/rfc2616">RFC 2616</a>, June 1999.
	</dd>

	<dt id="ref-RFC5261">[RFC5261]</dt>
	<dd>
Urpalainen, J.,
"An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML Path Language (XPath) Selectors",
<a href="http://tools.ietf.org/html/rfc5261">RFC 5261</a>, September 2008.
	</dd>

	<dt id="ref-RFC5789">[RFC5789]</dt>
	<dd>
Dusseault, L. and J. Snell,
"PATCH Method for HTTP",
<a href="http://tools.ietf.org/html/rfc5789">RFC 5789</a>, March 2010.
	</dd>
</dl>

	</section>
</section>

<section id="appendix-A">
<h2 title="Appendix A. Examples">付録 A. 用例集</h2>

	<section id="appendix-A.1">

<h3 title="Adding an Object Member">A.1. オブジェクトメンバの追加</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": "bar"}</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "add", "path": "/baz", "value": "qux" }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{
  <mark>"baz": "qux",</mark>
  "foo": "bar"
}</pre>
	</section>
	<section id="appendix-A.2">

<h3 title="Adding an Array Element">A.2. 配列<!---->要素の追加</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": [ "bar", "baz" ] }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "add", "path": "/foo/<mark>1</mark>", "value": "qux" }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{ "foo": [ "bar", <mark>"qux"</mark>, "baz" ] }</pre>
	</section>
	<section id="appendix-A.3">

<h3 title="Removing an Object Member">A.3. オブジェクトメンバの除去</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{
  <mark>"baz": "qux"</mark>,
  "foo": "bar"
}</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "remove", "path": "<mark>/baz</mark>" }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{ "foo": "bar" }</pre>
	</section>
	<section id="appendix-A.4">

<h3 title="Removing an Array Element">A.4. 配列<!---->要素の除去</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": [ "bar", <mark>"qux"</mark>, "baz" ] }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "remove", "path": "/foo/<mark>1</mark>" }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{ "foo": [ "bar", "baz" ] }</pre>
	</section>
	<section id="appendix-A.5">

<h3 title="Replacing a Value">A.5. 値の置換</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{
  "baz": <mark>"qux"</mark>,
  "foo": "bar"
}</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "replace", "path": "/baz", "value": <mark>"boo"</mark> }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{
  "baz": <mark>"boo"</mark>,
  "foo": "bar"
}</pre>

	</section>
	<section id="appendix-A.6">

<h3 title="Moving a Value">A.6. 値の移動</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{
  "foo": {
    "bar": "baz",
    <mark>"waldo": "fred"</mark>
  },
  "qux": {
    "corge": "grault"
  }
}</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "move", "from": "<mark>/foo/waldo</mark>", "path": "<mark>/qux/thud</mark>" }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{
  "foo": {
    "bar": "baz"
  },
  "qux": {
    "corge": "grault",
    <mark>"thud": "fred"</mark>
  }
}</pre>
	</section>
	<section id="appendix-A.7">

<h3 title="Moving an Array Element">A.7. 配列<!---->要素の移動</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": [ "all", <mark>"grass"</mark>, "cows", "eat" ] }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "move", "from": "/foo/<mark>1</mark>", "path": "/foo/<mark>3</mark>" }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{ "foo": [ "all", "cows", "eat", <mark>"grass"</mark> ] }</pre>

	</section>
	<section id="appendix-A.8">

<h3 title="Testing a Value: Success">A.8. 値のテスト（成功）</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{
  "baz": <mark>"qux"</mark>,
  "foo": [ "a", <mark>2</mark>, "c" ]
}</pre>

<p>
次の JSON Patch 文書は成功裡に評価される：
<span lang="en">
A JSON Patch document that will result in successful evaluation:
</span></p>

<pre class="example">
[
  { "op": "test", "path": "/baz", "value": <mark>"qux"</mark> },
  { "op": "test", "path": "/foo/1", "value": <mark>2</mark> }
]</pre>
	</section>
	<section id="appendix-A.9">

<h3 title="Testing a Value: Error">A.9. 値のテスト（エラー）</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "baz": <mark>"qux"</mark> }</pre>

<p>
次の JSON Patch 文書はエラー状態になる：
<span lang="en">
A JSON Patch document that will result in an error condition:
</span></p>

<pre class="example">
[
  { "op": "test", "path": "/baz", "value": <mark>"bar"</mark> }
]</pre>
	</section>
	<section id="appendix-A.10">

<h3 title="Adding a Nested Member Object">A.10. 入れ子のメンバ<!---->オブジェクトの追加</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": "bar" }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "add", "path": "<mark>/child</mark>", "value": { "<mark>grandchild</mark>": { } } }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{
  "foo": "bar",
  "<mark>child</mark>": {
    "<mark>grandchild</mark>": {
    }
  }
}</pre>
	</section>
	<section id="appendix-A.11">

<h3 title="Ignoring Unrecognized Elements">A.11. 認識されない要素の無視</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": "bar" }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "add", "path": "/baz", "value": "qux", <mark>"xyz": 123</mark> }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{
  "foo": "bar",
  "baz": "qux"
}</pre>
	</section>
	<section id="appendix-A.12">

<h3 title="Adding to a Nonexistent Target">A.12. 存在しない目的地点を伴う追加</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": "bar" }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "add", "path": "<mark>/baz/bat</mark>", "value": "qux" }
]</pre>

<p>
この JSON Patch 文書が上の目的 JSON 文書に適用されたときの結果は，エラーになる（したがって，適用されない）。
"<code>add</code>" 演算の目的地点は［
文書のルート,
既存のオブジェクトのメンバ,
既存の配列のメンバ
］のいずれも指していないので。
<span lang="en">
This JSON Patch document, applied to the target JSON document above, would result in an error (therefore, it would not be applied), because the "add" operation's target location that references neither the root of the document, nor a member of an existing object, nor a member of an existing array.
</span></p>

	</section>
	<section id="appendix-A.13">

<h3 title="Invalid JSON Patch Document">A.13. 無効な JSON Patch 文書</h3>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "<mark>op</mark>": "add", "path": "/baz", "value": "qux", "<mark>op</mark>": "remove" }
]</pre>

<p>
この JSON Patch 文書は、 "<code>add</code>" 演算を持つものとは見なされない。
後続に <samp>"op":"remove"</samp> があるので。
JSON のオブジェクトメンバ名は一意的である “<em class="rfc2119">べき</em>” とされているので、メンバ名の重複の際の取り扱いは標準的な意味ではエラーにはされないが。
<span lang="en">
This JSON Patch document cannot be treated as an "add" operation, because it contains a later "op":"remove" element. JSON requires that object member names be unique with a "SHOULD" requirement, and there is no standard error handling for duplicates.
</span></p>
	</section>
	<section id="appendix-A.14">

<h3 title="~ Escape Ordering">A.14. “~” エスケープの取り扱い</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{
  "/": 9,
  "<mark>~1</mark>": 10
}</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  {"op": "test", "path": "<mark>/~01</mark>", "value": 10}
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{
  "/": 9,
  "<mark>~1</mark>": 10
}</pre>

<p class="trans-note">【
JSON Pointer "<samp>/~01</samp>" の “~” エスケープは "<samp>~0</samp>" のみ展開され，それ以上は展開されない（ "<code>~0</code>" の展開は "<code>~1</code>" の後なので — <a href="#ref-RFC6901">[RFC6901]</a>
の 4 節
<a href="http://tools.ietf.org/html/rfc6901#section-4">Evaluation</a>
（<a href="RFC6901-ja.html#section-4">和訳</a>）。
】</p>
	</section>
	<section id="appendix-A.15">

<h3 title="Comparing Strings and Numbers">A.15. 文字列と数値の比較</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{
  "/": 9,
  "~1": <mark>10</mark>
}</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  {"op": "test", "path": "/~01", "value": <mark>"10"</mark>}
]</pre>

<p>
この結果はテストが失敗するのでエラーになる。
文書の方の値は数値である一方，テストされる値は文字列なので。
<span lang="en">
This results in an error, because the test fails. The document value is numeric, whereas the value being tested for is a string.
</span></p>

	</section>
	<section id="appendix-A.16">

<h3 title="Adding an Array Value">A.16. 配列<!---->値の追加</h3>

<p>
目的 JSON 文書の例：
<span lang="en">
An example target JSON document:
</span></p>

<pre class="example">
{ "foo": ["bar"] }</pre>

<p>
JSON Patch 文書：
<span lang="en">
A JSON Patch document:
</span></p>

<pre class="example">
[
  { "op": "add", "path": "/foo/<mark>-</mark>", "value": ["abc", "def"] }
]</pre>

<p>
結果の JSON 文書：
<span lang="en">
The resulting JSON document:
</span></p>

<pre class="example">
{ "foo": ["bar"<mark>, ["abc", "def"]</mark>] }</pre>

	</section>
</section>

</main><!--  id="MAIN" -->

<footer>
<h4 title="Authors’ Addresses">著作者アドレス</h4>

<dl >
	<dt>Paul C. Bryan (editor), Salesforce.com</dt>
	<dd>
Phone: +1 604 783 1481, EMail: pbryan@anode.ca
</dd>

	<dt>Mark Nottingham (editor), Akamai</dt>
	<dd>
EMail: mnot@mnot.net
</dd>
</dl>

</footer>


<!--% DATA SECTION -->
<div style="display:none;">

<input type="hidden" id="_page_config" value="" />

<script type="text/plain" id="replace_table">
目的地点:target location
地点:location
目的:target
目的文書:target document
符号位置:code point
演算:operation
エラー:error
エラー状態:error condition
評価:evaluation
文書:document
メンバ:member
オブジェクト:object
オブジェクトメンバ:object member
配列:array
文字列:string
数値:number
	要素:element
型:type
	値:value
パッチ:patch
ポインタ:pointer
ルート:root
メソッド:method
エスケープ:escape

除去:remove
移動:move
複製:copy
置換:replace
追加:add
挿入:insert
テスト:test
	数値:number
	index:index
	成功裡:successful
	等しい:equal

リクエスト:request
応答:responce
	遂行-:perform
	バイト:byte
	リスト:list
	比較:comparison
	要件:requirement
	考慮点:considerations
	ブラウザ:browser
	攻撃者:attacker
	文字:character
	コード:code
	指示-:indicate
メディア型:media type
形式:format
データ:data
	有意:significant
	置換のための値:replacement value
	内容:content
	同一:identical
	規則:rule
	アプリケーション:application
	取り扱い:handling
	仕様:specification
	構造:structure
	連結:containing

</script>

</div>

</body></html>
