<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Resource Hints（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>
var source_data;

COMMON_DATA.init = function(expanded){
	var options = {
		original_url: 'https://w3c.github.io/resource-hints/',
//		original_url: 'https://www.w3.org/TR/resource-hints/',
		spec_status: 'ED',
		main: 'MAIN',
		fill_text_link: '#_versions > dd',
		ref_data: '.ref_data',
		ref_id_prefix: 'bib-', //＊
//		ref_id_lowercase: true,
	};

	if(expanded) return options;

	source_data = {
		html: E('MAIN').innerHTML,
		link_map: Util.getMapping('_link_map'),
		toc_main: 'MAIN0',
		levels: 'ほぼ英語:英語主体:漢字+英語:漢字主体:カナ主体',
		level: 3,
		generate: expand
	};
	Util.switchWordsInit(source_data);

//	Util.del_j(); // checked: 170504 spec

	return options;
}

function expand(mapping1){

	var class_map = {
		l: 'literal',
		E: 'error',
		e: 'element',
		a: 'attr',
		h: 'header',
		M: 'method',
		st: 'attr-state',
		et: 'event-type',
		v: 'value',
	};

	var tag_map = {
		I: 'code',
		m: 'code',
		e: 'code',
		a: 'code',
		c: 'code',
		et: 'code',
		h: 'code',
		E: 'code',
		l: 'code',
		v: 'code',
		M: 'code',
		st: 'span',
		i: 'i',
	};

	var link_map = this.link_map;

	E('MAIN').innerHTML = Util.generateSource(this, mapping1, function(source){
		return source.replace(
			/%[\w~一-鿆]+|`(.+?)([$@\^])(\w*)/g,
			create_html
		);
	});
	return;

	function create_html(match, key, indicator, klass){

if(!key) {//%
	return '<var>' + match.slice(1) + '</var>';
}

var text = key;
var href = '';
var classname = class_map[klass];
var tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = '#bib-' + key;
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"'
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}

return text;


	}
}

</script>



<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
</script>

<!--%links -->
<script type="text/plain" id="_link_map">

I.XMLHttpRequest:~XHR#xmlhttprequest
I.HTMLLinkElement:~HEmetadata#htmllinkelement

m.visibilityState:~PAGE-VISIBILITY#dom-visibilitystate
	#visibilitystate-attribute
m.pr:#dom-htmllinkelement-pr

e.link:~HEmetadata#the-link-element

a.pr:#dfn-pr
a.href:~HEmetadata#attr-link-href
a.crossorigin:~HEmetadata#attr-link-crossorigin
a.as:~HEmetadata#attr-link-as

v.dns-prefetch:#dfn-dns-prefetch
v.preconnect:#dfn-preconnect
v.prefetch:#dfn-prefetch
v.prerender:#dfn-prerender

st.Anonymous:~HTMLurl#attr-crossorigin-anonymous

h.Link:http://tools.ietf.org/html/rfc5988


相対的に構文解析-:~HTMLurl#parse-a-url
結果の~URL文字列:~HTMLurl#resulting-url-string

文書:~HTMLdom#document
	文書~木~内:~DOM4#in-a-document-tree
文書~内にある:~DOM4#in-a-document-tree
	~TR/html5/infrastructure.html#in-a-document
文書の中に挿入され:~HTMLINFRA#insert-an-element-into-a-document
~load~eventを遅延-:~HTMLparsing#delay-the-load-event

資源~hint~link:#dfn-resource-hint-link
~preconnectを起動-:#dfn-initiate-a-preconnect
投機的~fetch:#dfn-speculative-fetch

~CORS設定群~属性:~HTMLurl#cors-settings-attribute
資源を得る:~HEmetadata#concept-link-obtain
随意に阻止可能な内容:~MIXED-CONTENT#category-optionally-blockable

url.生成元:~URLSpec#concept-url-origin
url.~scheme:~URLSpec#concept-url-scheme
接続を得る:~FETCH#concept-connection-obtain
生成元:~ORIGIN#concept-origin
~node文書:~DOM4#concept-node-document
反映-:~HTMLcdom#reflect
</script>

<!--%置換語 -->

<script type="text/plain" id="words_table1">
PAGE-VISIBILITY:page-visibility-ja.html
CSP2:CSP-ja.html
</script>

<!--%語彙 -->
<script type="text/plain" id="words_table">

preconnect:
prefetch:
prerender:
hint::::ヒント
beacon:
link::::リンク
asset::::アセット
資源:resource::~:リソース
下位資源:subresource::~:下位リソース
	sub-resource
関係:relation::~
関係性:relationship::~
必須の:critical::~
具現化-:render::~
具現化:rendering::~
可用:available:~
可用性:availability:~
頁:page:::ページ
	一連の頁に分けられた:paginated
内容:content::~
解析:analytics::~

	●最適化／処理
front-end::::フロントエンド
back-end::::バックエンド
signal:
CPU:
GPU:
access::::アクセス
cost::::コスト
投機的:speculative::~
確率:probability::~
最適:optimal::~
最適化-:optimize::~
最適化:optimization::~
処理-:process::~
処理:processing::~
前処理:preprocessing::~
前処理-:preprocess::~
処理能:performance::~
先送り:defer::~
追跡-:track::~
遅延:latency::~
遅延-:delay::~
高速:fast::~
	より高速:faster
並列的:parallel::~
優先度:priority::~
取消して:cancel して::取り消して::キャンセルして
取消す:cancel する::取り消す::キャンセルする
中止-:abort:~
作成-:create:~
実行-:execute:~
実行時:runtime::~
待機-:wait::~
時機:time:~
時間:time:~
受動的:reactive::~::リアクティブ
動作:action::~::アクション
活動:activity::~
動的:dynamic::~
発火-:fire::~
読込み:loading::読み込み
配送-:dispatch::~
走らせ:run し:~
楽観的:optimistic:~
飛ばす:skip する:~
高価:expensive:~
率:rate:~
未終了:outstanding:~
	事前に:ahead of time
	見込まれる／見込み:likelihood
見越して:anticipate して:~
策:strategy::~
降格-:downgrade::~
	~~落とす:degrade
即時的:instant:即時の
排-:eliminate:~
	より低く:lower:~
	低い:low
可視:visible::~
可視性:visibility::~
履歴:history::~
未来:future:~
情報:information:~
隠す:hide する:~
覆隠して:mask して:覆い隠して
覆隠せる:mask できる:覆い隠せる
	早くに:as early as
	早期に:early
	より早く:sooner
	可能な限り:as far as possible
	低い:low
	見込まれる:likely
	されるであろう〜:〜 that might be

	●network
network::::ネットワーク
HTTP:
URL:
DNS:
TCP:
TLS:
CORS:
HTTPS:
IP:
CSP:
method::::メソッド
	~HTTP~method:verb
navi:navigation:::ナビ
network::::ネットワーク
networking::::ネットワーク処理
open::::
protocol::::プロトコル
redirect::::リダイレクト
referrer::::リファラ
scheme::::スキーム
server::::サーバ
service::::サービス
session::::セッション
site::::サイト
transport::::トランスポート
cache::::キャッシュ
download::::ダウンロード
fetch::::
fetching::::fetch 処理
handshake::::ハンドシェイク
header::::ヘッダ
host::::ホスト
hostname::::ホスト名
要請:request::~::リクエスト
応答:response::~::レスポンス
認証:authentication::~
起動-:initiate::~
送達-:deliver::~
送達:delivery::~
通信-:communicate::~
資格証:credential::~
冪等:idempotent::~
	冪等でないnon-idempotent
生成-:generate::~
生成:generation::~
生成元:origin::~::オリジン
内容型:content-type::~
持続化-:persist::~
折衝-:negotiate::~
折衝:negotiation::~
接続-:connect::~
接続:connection::~
接続性:connectivity::~
確立-:establish::~
確立:establishment::~
行先:destination::~
検索:lookup::~


	●保安
policy::::ポリシー
secure::::セキュア
平文:plain-text::~
security::::セキュリティ
privacy::::プライバシー
私的:private:~
malware::::マルウェア
匿名化-:anonymize::~
保護:protection:~
阻止-:block::~::ブロック
阻止可能:blockable::~::ブロック可能
軽減-:mitigate::~
露わに:reveal::~
複雑化:complications:~
予防策:precautions:~

	●UI
click::::クリック
dialog::::ダイアログ
error::::エラー
event::::イベント
listen::::リッスン
prompt:
alert:
確認:confirmation::~
体験:experience::~

	●仕様
API:
UA:user agent:UA
IANA:
logic::::ロジック
custom::::カスタム
特質:property:::~:プロパティ
risk::::リスク
事例:case:~
事由:reason:~
互換性:compatibility:~
仕様:specification:~
	例:example:~
副作用:side-effect:~
特有の:specific な:~
特色機能:feature:~
現今の:modern:~
経験則:heuristics:~
経験的:heuristic:~
網羅的:exhaustive:~
要因:factor:~
自動的:automatic:~
規則:rule:~
随意:optional:~
任意選択の:optional:~
	任意選択の:OPTIONAL
任意選択:option:~
	任意選択で外す:opt-out
関連する:relevant な:~
意図:intent:~
	不必要な:unnecessary:~
	必要:need:~
	必要とされ:necessary:~
	加えて:additionally:~
	~~委ねられる:left to:~
	しかしながら，:however:~
	べき:should:~
	因り:due
	含-:include
	なども含まれる:includes, but is not limited to
妥当:valid:~
	妥当でない:invalid:~
	足りている:sufficient
	さらには、worse,
	課す対象:class of product that can claim
	ものとする:ought
	よって、:As a result
	すなわち，:i.e.
	可能:possible
	〜側においては:In turn,

	●仕様（動詞
app:application:::アプリ
browser::::ブラウザ
support::::サポート
fallback::::フォールバック
作業:work:~
作者:author:~
依存-:depend:~
依拠-:rely:~
保証-:guarantee:~
公開-:expose:~
利用-:use:~
利用事例:use case::~::ユースケース
利用者:user:~
制御:control:~
制約:restriction:~
制限-:limit:~
取組む:address する:~
委ねら:defer さ:~
定義-:define:~
実装-:implement:~
実装:implementation:~
干渉-:interfere:~
	扱う:treat:~
抑制-:reduce:~
拘束-:constrain:~
拘束:constraints:~
拡張:extension:~
指定-:specify:~
指示-:indicate:~
挙動:behavior:ふるまい
推奨:recommendation:~
提供-:provide:~
改善-:improve:~
放棄-:abandon:~
既定の:default::~::デフォルト
既知:known:~

	序論:introduction
影響0:impact:影響
手段:means:~
手続き:steps:~
技法:technique:~
文脈:context:~
最善の:best:~
労:effort:~
	最善の労に基づいて:best effort basis
条件:condition:~
条件付き:conditional:~


期待-:expect:~
最小化-:minimize:~
無視-:ignore:~
相互運用可能:interoperable:~
欲され:desire され:~
求めら:want さ:~
	求められない:unwanted
知識:knowledge:~
概して:typical に:~

決める:decide する:~
決めて:decide して:~
	決めるのは:decision:~
決定-:determine:~
活用-:leverage:~
確保-:ensure:~
競合-:conflict:~
競合:contention::~
考慮点:considerations:~
要件:requirements:~
要求-:require:~
	見よ:see:~
観測-:observe:~
	許可-:permit:~
許容-:allow:~
	できるようにする:allow／enable
可能化-:enable:~
試みる:attempt する:~
遂行-:perform:~
達成-:achieve:~
適切:appropriate:~
適合-:conform:~
適合性:conformance:~
適用-:apply:~
適用可能:applicable:~
	選ぶ:choose
選好:preference:~
避ける:avoid する:~
開発者:developer:~
防止-:prevent:~
黙示-:imply:~
依頼-:ask:~
誘発-:trigger:~
支援-assist:~
織込む:account する:織り込む
立証-:prove:~
適応力:adaptation:~
補助-:help:~

	●未分類（動詞
~load:load:~
〜し始め:begin:~
あてがう:assign:~
入力:input:~
共用:shared::~
呼出す:invoke する:呼び出す
変更-:change:~
変異:mutation::~
宣言-:declare::~
解決-:resolve::~
成功:success::~
成功-:succeed::~
	成功した:successful
挿入-:insert::~
省略-:omit:~
構築-:construct:~
結果:result:~
登録-:register::~
継続-:continue:~
識別-:identify:~
表示-:display:~
計算:compute:~
設定-:set:~
設定群:settings:~
除去-:remove:~
追加-:add:~
追加の:additional:~
	送る:send:~
構文解析-:parse::~::パース
構文解析:parsing::~::パース処理
参照:reference:~
探索:search:検索
呈-:exhibit:~
	指す:points to
	とる:take
	終える:finish
割振る:allocate する:割り振る
	段階を踏んでいく流れ:step-driven flow

	●未分類
web:
HTML:
	-:JavaScript
data::::データ
interface::::インタフェース
level::::レベル
list::::リスト
markup::::マークアップ
media::::メディア
memory::::メモリ
node::::ノード
primitive::::
profile::::プロファイル
storage::::ストレージ
plugin::::プラグイン
target::::
text::::テキスト
IDL:
load:
値:value:~
名:name:~
記述:description:~
大域的:global::~::グローバル
局所的:local::~::ローカル
属性:attribute::~
文書:document::~
要素:element::~
型:type::~
変数:variable:~
文字列:string:~
新たな:new:~
構造:structure:~
機器:device::~
浮動小数点数:float:~
省略可:optional:~
取得子:getter::~
設定子:setter::~
反映-:reflect::~

状態:state::~
画像展示:image gallery:~
写真:photo:~

相対的:relative:~
空:empty:~
範囲:range:~
集成-:aggregate::~
	負の:negative:~
	少なくする:fewer
	指す:points to
	使用量:usage
	-:elect
	using
pipeline:


	●指示語
全部的:full:~
部分的:partial:~
現在の:current:~
次回の:next:~
自前の:own:~
過去の:past:~
	あるいは:alternatively
	個の:one
	〜し次第:once
	いくつの how many
	この:this
	これらの:these
	ごとの:per-
	すでに:already
	すべての:all
	その:that
	そのような:such
	それら:they
	それらの:their
	それらを:them
	上:above
	下:below
	両者:both
	介:via
	他の:other
	個々の:individual
	前:before
	各:each
	同じ:same
	多い:often
	最後に、:finally
	多数の:a lot of
	多くの:many
	数:number
	次の:the-following
	次回の／:next
	等々:etc
	〜に基づく:based
	についての:about
	に加えて:In addition
	最初の:first
	後続の:subsequent:~
	更なる:further:~
	一部:some of
	等々:and so on
	間:during
	多様な:wide variety of
	様々な:variety of
	に対し:against
	ごとの: per
	最終的な:final
	次へ向かう所を:is heading next
	総:overall
	まるごと:entirely
	先立って:prior to
	逆に:conversely
	節:Section
	複数〜にまたがって:across
	高い／高:high
	こともある:sometimes

</script>

<style>
.attr-state {
	font-family: sans-serif0, sans-serif;
}

</style>

</head>

<body>

<div style="display:none;">
<input type="hidden" id="_page_config" value="" />
</div>


<aside class="trans-meta">
<h1>Resource Hints 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.w3.org/">W3C</a> により，副題の日付にて<strong>編集者草案</strong>として公開された
<a id="_SPEC_URL">Resource Hints</a>
を日本語に翻訳したものです。
<strong >この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語版は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p >
更新：<time>2017-08-18</time>
（公開：<time>2017-08-18</time> ）
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>

<header>
<a href="https://www.w3.org/" id="_W3C">W3C</a>
	<hgroup>
<h1>Resource Hints</h1>
<h2>2017 年 5 月 4 日付 編集者草案</h2>
	</hgroup>
<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dt title="Latest editor’s draft:">最新の編集者草案</dt>
	<dd>https://w3c.github.io/resource-hints/</dd>

	<dt title="Latest published version:">最新発行バージョン</dt>
	<dd>https://www.w3.org/TR/resource-hints/</dd>

	<dt title="Editors:">編集</dt>
	<dd><a href="https://www.igvita.com/">Ilya Grigorik</a>, Google, igrigorik@gmail.com</dd>

	<dt title="Repository:">Repository:</dt>
	<dd><a href="https://github.com/w3c/resource-hints/">We are on Github.</a></dd>
	<dd><a href="https://github.com/w3c/resource-hints/issues">File a bug</a></dd>
	<dd><a href="https://github.com/w3c/resource-hints/commits/gh-pages/index.html">Commit history.</a></dd>
</dl>

<small class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
2017
<a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
(<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
<a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
<a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). 
<abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
<a rel="license" href="http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a>
rules apply.
</small>

</header>

<div id="MAIN" style="display:none;">

	<section id="abstract">

<p>
この仕様は、~HTML `link$e 要素の［
`dns-prefetch$v,
`preconnect$v,
`prefetch$v,
`prerender$v
］関係性を定義する。
これらの~primitiveにより，［
開発者や, 資源を生成-あるいは送達している~server
］は、~UAが頁~処理能を改善するために［
どの生成元へ接続するべきか／
どの資源を~fetchして前処理するべきか
］について決める処理-を支援できるようになる。
◎
This specification defines the dns-prefetch, preconnect, prefetch, and prerender relationships of the HTML Link Element (&lt;link&gt;). These primitives enable the developer, and the server generating or delivering the resources, to assist the user agent in the decision process of which origins it should connect to, and which resources it should fetch and preprocess to improve page performance.
</p>
	</section>

	<section id="sotd">
<h2 title="Status of This Document">この文書の位置付け</h2>

<p>
これは編集者草案の公開の複製です…
<!-- 
この節では、発行時点における…
-->
【以下、この節の他の内容は <a href="w3c-common-ja.html#status" >W3C 日本語訳 共通ページ</a>に委譲。】
</p>

<p>
この文書は
<a href="https://www.w3.org/webperf/">Web Performance</a>
Working Group により編集者草案として制作されました。
コメントは、
<a href="mailto:public-web-perf@w3.org">public-web-perf@w3.org</a>
宛まで（
<a href="mailto:public-web-perf-request@w3.org">subscribe</a>,
<a href="https://lists.w3.org/Archives/Public/public-web-perf/" >archives</a>
）。
◎
 This document was published by the Web Performance Working Group as an Editor's Draft. Comments regarding this document are welcome. Please send them to public-web-perf@w3.org (subscribe, archives).
</p>

	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

<p>
現今の~browserは、利用者による入力や意図を見越して投機的に最適化する多様な技法を活用している。
それは、後続の~naviのために［
~preconnectする ／
資源を~prefetchする ／
資源を~prerenderする
］ことにより，［
~networking ／
資源の処理 ／
資源の具現化
］における遅延の一部を隠すことを可能にする。
◎
Modern browsers leverage a wide variety of speculative optimization techniques to anticipate user input and intent, which allows them to hide some of the networking, processing, and rendering latencies: preconnects, prefetching of resources, and prerendering of resources for subsequent navigation.
</p>

<p>
上の最適化のどれを起動するか決めるのは、概して［
文書の［
~markupと構造
］ ／
~navi履歴 ／ 利用者の文脈
］に基づく経験的な規則に基づく
— 例：［
機器の型 ／
可用な計算~資源 ／
可用な~memory資源 ／
~network接続性 ／
利用者~選好 ／
等々。
これらの技法が成功したことは，立証されているが、［［
~front-end／~back-end
］による生成 ／
~web~appを成す資源の送達
］について開発者が有する知識を活用すれば，更に改善できる。
◎
The decision to initiate one or more of the above optimizations is typically based on heuristic rules based on document markup and structure, navigation history, and context of the user - e.g., type of device, available compute and memory resources, network connectivity, user preferences, and so on. These techniques have proven to be successful, but can be further improved by leveraging the knowledge a developer has about the front-end and back-end generation and delivery of the resources of a web application.
</p>

<p>
例えば~appは、次の資源~hintを~UAに提供できる：
◎
For example, the application may provide the following resource hints to the user agent:
</p>

<ul>
	<li>
資源をどこから~fetchするかを与える，生成元~list。
◎
The list of origins from which resources will be fetched.
</li>
	<li>
次回に見込まれる［
利用者~動作／~navi~target
］
◎
The next likely user action or navigation target, and＼
</li>
	<li>
次に挙げるものなどに基づいて要求されることになる資源
⇒
現在の頁や~appの状態 ／
個々の利用者の履歴 ／
集成された~session~data
◎
the resources that will be required, based on current page or application state, individual user history, or aggregated session data.
</li>
</ul>

<p>
多くの~web~appは、様々な~prefetchする技法を，すでに活用している。
これには、必要になる前に  `XMLHttpRequest^I を用いて~assetを~fetchして~cacheすることなども含まれる。
しかしながら，これらの実装は~appに特有であり、相互運用可能でない上に，~browserにより提供される~primitiveと同じ~levelの処理能は提供しない。
さらには，これらの実装は、~browser~logicと競合して，その結果による遅延-や不必要な資源~fetchにより，頁の総~処理能を~~落とすこともある。
◎
Many web applications already leverage a variety of prefetching techniques. This includes, but is not limited to, using XMLHttpRequest to fetch and cache assets before they are needed. However, these implementations are application specific, are not interoperable, and do not provide the same level of performance as the browser-provided primitives. Worse, these implementations sometimes conflict with the browser logic and result in delayed or unnecessary resource fetches that degrade overall page performance.
</p>

<p>
この仕様は、 ~HTML `link$e 要素の［
`dns-prefetch$v, `preconnect$v, `prefetch$v, `prerender$v
］関係性を定義する。
これらの~primitiveは、［
~UAが、頁~処理能を改善するために，どの生成元に接続して, どの資源を~fetchして前処理するべきか決める処理-
］を，開発者や資源を［
生成-／送達-
］している~serverが支援できるようにする。
◎
This specification defines the dns-prefetch, preconnect, prefetch, and prerender relationships of the HTML Link Element (&lt;link&gt;). These primitives enable the developer, and the server generating or delivering the resources, to assist the user agent in the decision process of which origins it should connect to, and which resources it should fetch and preprocess to improve page performance.
</p>

	</section>
	<section id="resource-hints">
<h2 title="Resource Hints">2. 資源~hint</h2>

<p>
`資源~hint~link@
とは、~UAにより［
接続されるべき生成元 ／~fetchされるべき資源
］を指示するために利用されるような，［
`dns-prefetch$v ／
`preconnect$v ／
`prefetch$v ／
`prerender$v
］（順不同）関係性の総称である。
◎
A resource hint link is a dns-prefetch, preconnect, prefetch, or prerender relationship that is used to indicate an origin or resource that should be connected to, or fetched, by the user agent.
</p>

<p>
`投機的~fetch@
とは、［
`prefetch$v ／ `prerender$v
］関係性を介して起動される~fetchの総称である。
◎
A speculative fetch is a fetch initiated via a prefetch or prerender relationship.
</p>


		<section id="dns-prefetch">
<h2 title="DNS Prefetch">2.1. `dns-prefetch^v</h2>

<p>
~link関係~型
`dns-prefetch@v
は、［
要求される資源を~fetchするために利用することになる生成元
］を指示するために利用される
— ~UAは、可能な限り早くに解決する~SHOULDである。
◎
The dns-prefetch link relation type is used to indicate an origin that will be used to fetch required resources, and that the user agent SHOULD resolve as early as possible.
</p>

<pre class="example html">
&lt;link rel="`dns-prefetch$v" href="//example.com"&gt;
</pre>

		</section>
		<section id="preconnect">
<h2 title="Preconnect">2.2. `preconnect^v</h2>

<p>
~link関係~型
`preconnect@v
は、［
要求される資源を~fetchするために利用することになる生成元
］を指示するために利用される。
［
~DNS検索, ~TCP~handshake, ~TLS折衝（任意選択）
］も含む，接続を早期に起動しておけば、~UAは，接続を確立する際の高い遅延~costを覆隠せるようになる。
◎
The preconnect link relation type is used to indicate an origin that will be used to fetch required resources. Initiating an early connection, which includes the DNS lookup, TCP handshake, and optional TLS negotiation, allows the user agent to mask the high latency costs of establishing a connection.
</p>

<pre class="example html">
&lt;link rel="`preconnect$v" href="//example.com"&gt;
&lt;link rel="`preconnect$v" href="//cdn.example.com" crossorigin&gt;
</pre>

<p>
`~preconnectを起動-@
するときは、所与の %要素 に対し次の手続きを走らせ~MUST：
◎
To initiate a preconnect, the user agent MUST run these steps:
</p>

<ol>
	<li>
~Assert：
%要素 は `href$a 属性を有する
【この段はこの訳による補完】
</li>
	<li>
%文書 ~LET %要素 の`~node文書$
</li>
	<li>
<p>
%~preconnect~URL ~LET %要素 の `href$a 属性の値を
%文書 に`相対的に構文解析-$した`結果の~URL文字列$
</p>

<p class="trans-note">【
この段の %文書 はこの訳による補完／推定。
原文は、過去の `HTML$r 仕様の 現在は廃された用語を参照していて，記述が整合していないので。
】</p>
◎
Resolve the URL given by the href attribute.
◎
If that is successful, let preconnect URL be the resulting absolute URL, and＼
</li>
	<li>
~IF［
%~preconnect~URL ~EQ `~error^i
］
⇒
~RET
◎
otherwise abort these steps.
</li>
	<li>
~IF［
%~preconnect~URL の`~scheme$url ~NIN { `http^l, `https^l }
］
⇒
~RET
◎
If preconnect URL's scheme is not one of "http" or "https" then abort these steps.
</li>
	<li>
%生成元 ~LET  %~preconnect~URL の`生成元$url
◎
Let origin be preconnect URL's origin.
</li>
	<li>
%~CORS属性~状態 ~LET %要素 の `crossorigin$a 内容~属性の現在の状態
◎
Let corsAttributeState be the current state of the element's crossorigin content attribute.
</li>
	<li>
%資格証 ~LET ~T
◎
Let credentials be a boolean value set to true.
</li>
	<li>
~IF［
%~CORS属性~状態 ~EQ `Anonymous$st
~AND
%生成元 ~NEQ %文書 の`生成元$
］
⇒
%資格証 ~SET ~F
◎
If corsAttributeState is Anonymous and origin is not equal to current Document's origin, set credentials to false.
</li>
	<li>
`接続を得る$( %生成元,  %資格証 )
◎
Attempt to obtain connection with origin and credentials.
</li>
</ol>

<p>
~UAは、`~preconnectを起動-$する, および
可能なときは全部的な接続~handshake（
生成元に応じて，~HTTPならば~DNSと~TCP ／ ~HTTPSならば ~DNSと~TCPと~TLS
）を遂行するよう試みる~SHOULDである
— が、資源~拘束その他の事由に因り，~handshakeを部分的に遂行する（
生成元に応じて，~HTTPならば~DNSのみ ／ ~HTTPSならば ~DNSのみ, または~DNSと~TLS
）, あるいは まるごと飛ばすことも許容される。
◎
The user agent SHOULD attempt to initiate a preconnect and perform the full connection handshake (DNS+TCP for HTTP, and DNS+TCP+TLS for HTTPS origins) whenever possible, but is allowed to elect to perform a partial handshake (DNS only for HTTP, and DNS or DNS+TCP for HTTPS origins), or skip it entirely, due to resource constraints or other reasons.
</p>

<p>
生成元ごとの最適な接続~数は［
折衝される~protocol ／
利用者の現在の接続性~profile ／
機器に可用な資源 ／
大域的な接続~制限- ／
他の文脈に特有の変数
］に依存する。
よって、いくつの接続を~openするべきか決めるのは，~UAに委ねられる。
◎
The optimal number of connections per origin is dependent on the negotiated protocol, users current connectivity profile, available device resources, global connection limits, and other context specific variables. As a result, the decision for how many connections should be opened is deferred to the user agent.
</p>
		</section>
		<section id="prefetch">
<h2 title="Prefetch">2.3. `prefetch^v</h2>

<p>
~link関係~型
`prefetch@v
は、次回の~naviにより要求されるであろう資源を識別するために利用される
— ~UAは、［
未来に資源が要請され次第，より高速に応答を送達できる
］よう，~fetchする~SHOULDである。
◎
The prefetch link relation type is used to identify a resource that might be required by the next navigation, and that the user agent SHOULD fetch, such that the user agent can deliver a faster response once the resource is requested in the future.
</p>


<pre class="example html">
&lt;link rel="`prefetch$v" href="//example.com/next-page.html" as="html" crossorigin="use-credentials"&gt;
  &lt;link rel="`prefetch$v" href="/library.js" as="script"&gt;
</pre>

<ul>
	<li>
~UAは、応答に前処理を適用する~SHOULDでない。
また、現在の頁~文脈に対し，それを自動的に［
実行-／適用-
］しては~MUST_NOT。
◎
The user agent SHOULD NOT apply preprocessing on the response and MUST NOT automatically execute or apply it against the current page context.
</li>
	<li>
`as^a 属性は、任意選択の属性であり， `PRELOAD$r に定義される要件に適合し~MUST。
◎
The as attribute is an OPTIONAL attribute that must conform to requirements defined in [PRELOAD].
</li>
	<li>
`~CORS設定群~属性$ `crossorigin$a は、任意選択の属性であり、指定された資源の~CORS~policyを指示する。
◎
The crossorigin CORS setting attribute is an OPTIONAL attribute that indicates the CORS policy of the specified resource.
</li>
</ul>

<p class="note">注記：
`as$a 属性を利用すれば、~appは，~UAが~fetchingを最適化できるように，資源~行先~文脈と通信できる
— 例：
要請~header, ~transport優先度, 等々を適切に設定するなど。
◎
The as attribute can be used by the application to communicate the resource destination context, such that the user agent can optimize the fetching process - e.g. set appropriate request headers, transport priority, and so on.
</p>

		</section>
		<section id="prerender">
<h2 title="Prerender">2.4. `prerender^v</h2>

<p>
~link関係~型
`prerender@v
は、次回の~naviに要求されるであろう資源を識別するために利用される
— ~UAは、［
未来に資源が要請され次第，より高速に応答を送達できる
］よう，~fetchして実行する~SHOULDである。
◎
The prerender link relation type is used to identify a resource that might be required by the next navigation, and that the user agent SHOULD fetch and execute, such that the user agent can deliver a faster response once the resource is requested in the future.
</p>

<pre class="example html">
&lt;link rel="`prerender$v" href="//example.com/next-page.html"&gt;
</pre>

<p>
~UAは、必要とされる下位資源も~fetchして，それらを実行することにより，~HTML応答を前処理して~MAY
（すなわち，頁を~prerenderする）。
~prerenderする手続きを遂行するかどうか決めるのは、~UAに委ねられる。
~UAは、次を行っても~MAY：
◎
The user agent MAY preprocess the HTML response by also fetching the necessary subresources and executing them (i.e. prerender the page). The decision for which prerendering steps are performed is deferred to the user agent. The user agent MAY:
</p>

<ul>
	<li>
~prerenderされた内容に割振る［
~CPU ／ ~GPU ／~memory
］資源を少なくする。
◎
Allocate fewer CPU, GPU, or memory resources to prerendered content.
</li>
	<li>
要請された~HTML資源が可視になるまで、一部の要請を遅延する
— 例：
~mediaの~download, ~plugin内容, 等々。
◎
Delay some requests until the requested HTML resource is made visible - e.g. media downloads, plugin content, and so on.
</li>
	<li>
可用な資源が制限されている下では、起動されている~prerenderを防止する。
◎
Prevent prerendering from being initiated when there are limited resources available.
</li>
	<li>
要求される［
~cost／資源
］が高いときは、~prerenderするのを放棄する
— 例：
~CPUや~memoryの使用量が高い, 高価な~data~access, 等々。
◎
Abandon prerendering due to high cost or resource requirements - e.g. high CPU or memory usage, expensive data access, and so on.
</li>
	<li>
<p>
~fetchされる内容の型や特質に因り，~prerenderするのを放棄する：
◎
Abandon prerendering due to the type or properties of the fetched content:
</p>
		<ul>
			<li>
~targetは、冪等でない挙動を呈する場合
— 例：局所的な共用~storageに対する変異, ［
`GET^M, `HEAD^M, `OPTION^M
］以外の~HTTP~methodを伴う `XMLHttpRequest$I 等々。
◎
If the target exhibits non-idempotent behavior: mutations to shared local storage, XMLHttpRequest with a verb other than GET, HEAD, or OPTION, and so on.
</li>
			<li>
~targetが利用者~入力
— 確認~dialog, 認証~prompt, ~alert, 等々 —
を要求するような条件を誘発する場合。
◎
If the target triggers a condition that requires user input: confirmation dialogs, authentication prompts, alerts, and so on.
</li>
		</ul>
	</li>
	<li>
上に挙げた処理~策は、網羅的ではない。
~UAは、他の策を実装しても~MAY。
◎
The above processing strategies are not an exhaustive list. The user agent may implement other strategies.
</li>
</ul>

<p>
~UAは、`文書$を~prerenderするときは，`文書$の `visibilityState$m 取得子は `prerender^l を返すようにし~MUST。
`PAGE-VISIBILITY$r
◎
When prerendering a document the user agent MUST set the document's visibilityState ([PAGE-VISIBILITY]) value to prerender.
</p>


<p class="note">注記：
`prerender$v ~hintを利用すれば、~appは，次回に見込まれる~HTML~navi~targetを指示できる
— ~UAは、指定された資源を~fetchした上で，~HTML応答として処理することになる。
適切な要請~headerを伴う他の内容型を~fetchする場合や,
~HTML前処理は欲されない場合、~appは `prefetch$v ~hintを利用できる。
◎
The prerender hint can be used by the application to indicate the next likely HTML navigation target: the user agent will fetch and process the specified resource as an HTML response. To fetch other content-types with appropriate request headers, or if HTML preprocessing is not desired, the application can use the prefetch hint.
</p>

<p class="note">注記：
互換性を確保する, あるいは~prerenderする要請の成功~率を改善するためには、~target頁は，具現化され次第 Page Visibility ~APIを利用して，頁の可視性~状態を決定して、［
~prerenderを放棄させ得るような動作（例： 冪等でない要請）／
求められない副作用が誘発される（例： 表示される頁に先立って発火される解析~用~beacon）
］を避けるための適切な~logicを実装できる。
◎
To ensure compatibility and improve the success rate of prerendering requests the target page can use the Page Visibility API to determine the visibility state of the page as it is being rendered and implement appropriate logic to avoid actions that may cause the prerender to be abandoned (e.g. non-idempotent requests), or unwanted side-effects from being triggered (e.g. analytics beacons firing prior to the page being displayed).
</p>

		</section>
	</section>
	<section id="process">
<h2 title="Process">3. 処理-</h2>

		<section id="hint-probability-(&quot;pr&quot;)-attribute">
<h2 title="Hint probability attribute">3.1. ~hint確率： `pr^a 内容~属性</h2>

<p>
~hint型を指定することに加えて、~appは，期待される［
指定した資源~hintが利用されることになる確率
］を指示して~MAY。
◎
In addition to specifying the hint type, the application MAY indicate the expected probability that the specified resource hint will be used.
</p>


<pre class="example html">
&lt;link rel="`dns-prefetch$v" href="//widget.com" pr="0.75"&gt;
  &lt;link rel="`preconnect$v" href="//cdn.example.com" pr="0.42"&gt;
  &lt;link rel="`prefetch$v" href="//example.com/next-page.html" pr="0.75"&gt;
  &lt;link rel="`prerender$v" href="//example.com/thankyou.html" pr="0.25"&gt;
</pre>

<p>
`pr@a
内容~属性は、 0.0 以上 1.0 以下の浮動小数点数~値をとり、次の事例に利用されて~MAY／できる：
◎
The pr attribute is a float value in the [0.0-1.0] range that MAY be used in the following cases:
</p>

<ul>
	<li>
［
`dns-prefetch$v ／ `preconnect$v
］関係との併用で、現在の, または次回の~navi文脈の中で［
指定された生成元に対し~fetchが起動される確率
］を指示する。
◎
With dns-prefetch and preconnect relations to indicate probability of initiating a fetch against the specified origin, either within the current navigation context, or within the next navigation context.
</li>
	<li>
`投機的~fetch$ 関係との併用で、次回の~navi文脈の中で［
指定された資源が利用される確率
］を指示する。
◎
With a speculative fetch relation to indicate probability of using the specified resource within the next navigation context.
</li>
</ul>

<p>
上の事例にて， `pr$a 内容~属性が省略された場合、~UAは［
自前の経験則, 過去の~navi~data, その他の~signal
］に基づいて，既定の確率~値をあてがっても~MAY。
◎
If the pr attribute is omitted for above cases, the user agent MAY assign a default probability value based on own heuristics, past navigation data, and other signals.
</p>

<p>
~hint確率 1.0 は、~UAにより~hintが実行されるのを保証するものではない。
~UAは、指定された~hintに対し：
◎
A hint probability of 1.0 does not guarantee that the hint will be executed by the user agent. Specified hints＼
</p>

<ul>
	<li>
最善の労に基づいて処理して~MAY。
◎
MAY be processed on a best effort basis by the user agent, and＼
</li>
	<li>
<p>
~hintを処理するかどうかを，次に基づいて決めても~MAY：
</p>

<ul ><li>~UAの実行時~文脈
— ［
~CPU ／ ~GPU ／ ~memory ／ ~networking資源
］の可用性
</li><li>開発者が指定した資源が利用される見込みを指示している確率
</li><li>指定されている利用者~選好
</li><li>その他の変数
</li></ul>
◎
decision to process the hint MAY be based on the runtime context of the user agent — availability of CPU, GPU, memory, and networking resources — developer specified probability indicating the likelihood of that resource being used, specified user preferences, and other variables.＼
</li>
	<li>
<p>
次のように決めても~MAY：
◎
The user agent MAY decide to:
</p>
		<ul>
			<li>
資源~hintにより黙示される最適化のうち，ある部分
— 皆無から全部まで —
を行い、自前の経験則に基づいて，追加の最適化も呼出す。
◎
Execute some, none, or all of the optimizations implied by the resource hint, and may also invoke additional optimizations based on its own heuristics.
</li>
			<li>
<p>
資源~拘束その他の事由に因り、指定された~hintに相対的な最適化を部分的に実行すること。
◎
Execute a partial optimization relative to the specified hint due to resource constraints or other reasons.
</p>
				<ul>
					<li>
`preconnect$v に対しては、部分的な~handshake（生成元に応じて，~HTTPなら~DNSのみ, ~HTTPSならば~DNSと~TCPのみ）に~fallbackして~MAY。
◎
preconnect MAY fallback to a partial handshake (DNS only, or DNS+TCP for HTTPS origins).
</li>
					<li>
`投機的~fetch$は、~target資源~用に~custom前処理~策を適用して~MAY。
◎
↓</li>
					<li>
<p>
`投機的~fetch$は、指定された生成元に対し `preconnect$v に~fallbackして~MAY
— その場合、適用可能ならば：
</p>
<ul><li>~target資源は~fetchしつつ, その下位資源は~fetchするのを先送りする, あるいは
</li><li>下位資源も~fetchしつつ，それらの処理は遅延する, 等々。
</li></ul>

◎
speculative fetch MAY fallback to preconnect for specified origin, or apply a custom preprocessing strategy for the target resource, and if applicable, its sub-resources: preconnect only; fetch the target resource but defer fetch of sub-resources; fetch sub-resources but delay their processing, and so on.
</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>


<p class="note">注記：
利用者の総~体験を最適化するためには、~UAは［
局所的な文脈 ／
投機的な~hintを成す指定された確率
］を織込むべきである。
例えば、資源が拘束されている機器~上の~UAは、
高~確率の~hintのみ実行することに決めても~MAY。
あるいは、~hintの部分的な処理を遂行することに決めても~MAY
— `投機的~fetch$の前処理を部分的に遂行する, `preconnect$v に降格する, 等々。
全部的な最適化を遂行できない場合でも、最適化を部分的に遂行することで，~UAは処理能を改善できるようになる。
逆に，資源が足りている機器~上の~UAは、指定された~hintを，可能な限りすべて実行しても~MAY。
◎
To optimize the overall user experience the user agent should account for local context and specified probability of a speculative hint. For example, on a resource constrained device the user agent may decide to only execute high probability hints. Alternatively, it may decide to perform partial processing of the hint, such as downgrading speculative fetch to a preconnect, performing partial preprocessing, and so on. Performing a partial optimization allows the user agent to improve performance even if a full optimization cannot be performed. Conversely, on a device with sufficient resources, the user agent may execute all of the specified hints as far as possible.
</p>

			<section id="link-element-interface-extensions">
<h2 title="Link element interface extensions">3.1.1. `link^e 要素~interfaceに対する拡張</h2>


<pre class="idl">
partial interface `HTMLLinkElement$I {
  attribute DOMString `pr$m;
};
</pre>

<dl class="idl-def">
	<dt>`pr@m</dt>
	<dd>
取得子はこの要素の `pr$a 内容~属性の値を返す。
値は、 0.0 以上 1.0 以下の浮動小数点数で~MUST。
設定子は妥当でない値を無視し~MUST。
◎
The value of this element's pr attribute. The value of the attribute MUST be a float in the [0.0-1.0] range. Invalid values MUST be ignored by the user agent.
</dd>
	<dd class="trans-note">【
“取得子”, “設定子”, “内容~属性”
は、この訳による補完。
この~IDL属性は，明らかに `pr$a 内容~属性を`反映-$すると思われるが、原文は，この内容~属性を参照すらしておらず，どう反映するか明らかでない。
】</dd>
</dl>

	    	</section>
		</section>
		<section id="fetching-the-resource-hint-link">
<h2 title="Fetching the resource hint link">3.2. 資源~hint~linkの~fetch法</h2>


<p>
`資源~hint~link$は、文書~markup内に指定されることも,
~HTTP `Link$h ~headerを介して提供されることも,
文書に動的に追加されたり除去されることもある
— あるいは、されてもよい。
◎
The resource hint link's may be specified in the document markup, MAY be provided via the HTTP Link header, and MAY be dynamically added to and removed from the document.
</p>


<pre class="example">
Link: &lt;https://widget.com&gt;; rel=`dns-prefetch$v
Link: &lt;https://example.com&gt;; rel=`preconnect$v
Link: &lt;https://example.com/next-page.html&gt;; rel=`prerender$v;
Link: &lt;https://example.com/logo-hires.jpg&gt;; rel=`prefetch$v; as=image;
</pre>

<pre class="example js">
&lt;link rel="`dns-prefetch$v" href="//widget.com" pr="0.75"&gt;
&lt;link rel="`preconnect$v" href="//cdn.example.com" pr="0.42"&gt;
&lt;link rel="`prerender$v" href="//example.com/next-page.html" pr="0.75"&gt;
&lt;link rel="`prefetch$v" href="//example.com/logo-hires.jpg" as="image"&gt;
</pre>

<pre class="example js">
var %hint = document.createElement("link");
%hint.rel = "prefetch";
%hint.as = "html";
%hint.href = "/article/part3.html";
document.head.appendChild(%hint);
</pre>

<p>
［
~hostへ接続する ／ 指定された`資源を得る$
］適切な時機は：
◎
The appropriate times to connect to a host, or obtain the specified resource are:
</p>

<ul>
	<li>
~UAが `RFC5988$r を~supportしている場合には、
`Link$h ~headerを介して指定される`資源~hint~link$を処理するとき。
◎
When the user agent that supports [RFC5988] processes resource hint link specified via the Link HTTP header.
</li>
	<li>
`資源~hint~link$を与える `link$e 要素が`文書の中に挿入され$たとき。
◎
When the resource hint link's link element is inserted into a document.
</li>
	<li>
`link$e 要素が`文書~内にある$下で，要素~上に`資源~hint~link$が作成されたとき。
◎
When the resource hint link is created on a link element that is already in a Document.
</li>
	<li>
`資源~hint~link$を与える `link$e 要素が`文書~内にある$下で、要素の `href$a 属性~値が変更されたとき。
◎
When the href attribute of the link element of an resource hint link that is already in a Document is changed.
</li>
</ul>

<p>
~UAは、現在の~navi文脈~用の資源との競合を最小化するためとして，`投機的~fetch$による~fetchを遅延して~MAY。
◎
The user agent MAY delay the fetch of speculative fetch to minimize resource contention for the current navigation context.
</p>

<p>
`preconnect$v ／ `投機的~fetch$
 を取消すかどうか決めるのは、~UAに委ねられる
— ~UAは、［
局所的~文脈 その他の~signal
］を利用して，最適化が中止されるべきである［
とき／場合
］を決定して~MAY：
◎
The decision to cancel a preconnect or speculative fetch is deferred to the user agent, which MAY use local context and other signals to determine if and when the optimization should be aborted:
</p>

<ul>
	<li>
~UAは、［
`資源~hint~link$を与える `link$e 要素~上の `href$a 属性
］が除去された ／ その値が空~文字列に設定されたときには、要請を中止する~SHOULDである。
◎
The user agent SHOULD abort the request if the href attribute on the link element of an resource hint link is removed, or its value is set to an empty string.
</li>
	<li>
~UAは、`資源~hint~link$ を介して起動された要請が，複数~naviにまたがって継続するのを許容する~SHOULDである。
しかしながら，そのような要請が新たな行先には要求されないものと決定したときには、それを取消しても~MAY
—  <a href="#reactive-resource-prefetching-(prefetch)">受動的な資源の~prefetch法</a>
を見よ。
◎
The user agent SHOULD allow the requests initiated via the resource hint link to continue across navigations. However, the user agent MAY cancel these requests once it determines that they are not required by the new destination - see .
</li>
</ul>

<p>
次回の~naviに要求され得る資源~fetchは、現在の~navi文脈における処理能に負の影響0を及ぼし得る
— ［
~CPU, ~GPU, ~memory, ~network資源
］用の追加の競合に因り。
これに取組むため、~UAは，そのような競合を［
抑制する／排する
］ような~logicを実装する~SHOULDである：
◎
Resource fetches that may be required for the next navigation can negatively impact the performance of the current navigation context due to additional contention for the CPU, GPU, memory, and network resources. To address this, the user agent SHOULD implement logic to reduce and eliminate such contention:
</p>

<ul>
	<li>
次回の~naviに要求される資源~fetchの優先度は、相対的に低くされる~SHOULDであり，現在の~navi文脈に要求される資源~fetch［
を阻止する／に干渉する
］~SHOULDでない。
◎
Resource fetches required for the next navigation SHOULD have lower relative priority and SHOULD NOT block or interfere with resource fetches required by the current navigation context.
</li>
	<li>
<p>
次回の~naviに要求される資源~fetchを起動する最適な時機は、［
折衝された~transport~protocol,
利用者の現在の接続性~profile,
機器に可用な資源,
その他の文脈に特有の変数
］に依存する。
この最適な時機を決定するのは~UAに~~委ねられる
— 例えば，~UAは、次のようにしても~MAY：
</p>
<ul><li>他の~downloadをすべて終えるまで待機することにする
</li><li>折衝されている~protocolが必要とされる~primitiveを~supportするならば，要請を低い優先度で~pipelineすることを選ぶ
</li><li>資源~拘束, 利用者~選好, その他の要因に因り，~fetchを起動するのを任意選択で外す。
</li></ul>

◎
The optimal time to initiate a resource fetch required for the next navigation is dependent on the negotiated transport protocol, users current connectivity profile, available device resources, and other context specific variables. The user agent is left to determine the optimal time at which to initiate the fetch - e.g. the user agent MAY decide to wait until all other downloads are finished, or MAY choose to pipeline requests with low priority if the negotiated protocol supports the necessary primitives. Alternatively, the user agent MAY opt-out from initiating the fetch due to resource constraints, user preferences, or other factors.
</li>
</ul>

		</section>
		<section id="load-and-error-events">
<h2 title="Load and error events">3.3.  `load^et, `error^et ~event</h2>

<p>
~UAは、［
`preconnect$v ／
`投機的~fetch$
］により起動された要請が未終了であっても、それに因り文書の`~load~eventを遅延-$しては~MUST_NOT。
◎
The user agent MUST NOT delay the load event of the document due to outstanding preconnect or speculative fetch initiated requests.
</p>

<p>
資源~hintが実行されるかどうか, および
その場合に処理を［
全部的／部分的
］に適用するかどうか決めるのは、~UAに委ねられる。
よって、［
`load^et ／ `error^et
］~eventが要素に向けて発火されることは，保証されないし、発火されても，処理が全部的に適用されることは保証されない。
しかしながら，~UAは、可能ならこれらの~eventのうち適切な方を発火して，［
 ~appが，どの~hintがいつ実行されるか追跡できる
 ］ようにする~SHOULDである。
◎
The decision on whether a resource hint is executed, and if so, whether full or partial processing is applied is deferred to the user agent. As a result, element-level load and error JavaScripts events are not guaranteed to fire, and if they do, do not guarantee that full processing was applied. However, the user agent SHOULD fire the appropriate load and error events when possible, to allow the application to track which hints were executed and when.
</p>
		</section>
	</section>
	<section id="use-cases">
<h2 title="Use cases">4. 利用事例</h2>

		<section id="dynamic-request-url-(preconnect)">
<h2 title="Dynamic request URL (preconnect)">4.1. 動的な要請~URL （ `preconnect^v ）</h2>

<p>
全部的な資源~URLは、~UAが頁を構築するまで既知でないこともある
— 例： 条件付き読込み~logic, ~UAの適応力, 等々。
しかしながら，~fetchされることになる資源の生成元は、［
開発者／ 応答を生成している~server
］にとっては，事前に既知なことは多い。
そのような事例では、 `preconnect$v ~hintを利用して，早期に接続~handshakeを起動できる：
~UAは、資源~URLが決定されたとき，すぐに
— 接続~折衝により先ず阻止されることなく —
要請を配送できるようになる。
◎
The full resource URL may not be known until the page is being constructed by the user agent - e.g. conditional loading logic, UA adaptation, etc. However, the origin from which one or more of these resources will be fetched is often known ahead of time by the developer or the server generating the response. In such cases, a preconnect hint can be used to initiate an early connection handshake such that when the resource URL is determined, the user agent can dispatch the request without first blocking on connection negotiation.
</p>
		</section>
		<section id="anonymizing-redirect-(preconnect)">
<h2 title="Anonymizing redirect (preconnect)">4.2. ~redirectの匿名化-法（ `preconnect^v ）</h2>


<p>
利用者を最終的な行先へ送る前に、［
解析 ／
~malware保護 ／
<a href="https://www.facebook.com/notes/facebook-engineering/protecting-privacy-with-referrers/392382738919">~referrerを匿名化する</a>
］ために，~redirect~serviceに依拠する~siteは多い。
行先は事前に既知なので， `preconnect$v ~hintを利用すれば、行先~生成元との接続~handshakeを起動できる（私的な情報は露わにすることなく）
~redirectの処理とは並列的に
— これは、~redirect遅延を覆隠して，最終的な行先への~navi時間を抑制する。
◎
Many sites rely on redirect services for analytics, malware protection, and to anonymize the referrer before sending the user to the final destination. Because the destination is known ahead of time, a preconnect hint can be used to initiate the connection handshake with the destination origin (without revealing any private information) in parallel with the processing of the redirect - this masks the redirect latency and reduces navigation time to final destination.
</p>
		</section>
		<section id="speculative-resource-prefetching-(prefetch)">
<h2 title="Speculative resource prefetching (prefetch)">4.3. 投機的な資源の~prefetch法（ `prefetch^v ）</h2>


<p>
`prefetch$v ~hintを利用すれば、［
内容, 構造, 解析, その他の~signal
］
— 例：
見込みが高い探索~結果,
一連の頁に分けられた内容や 段階を踏んでいく流れ,
集成された解析,
利用者ごとの挙動,
等々 —
に基づく，次回の~naviについての~appに特有の知識を活用して、~prefetch策を実装できる。
◎
The prefetch hint can be used to implement a prefetch strategy that leverages app-specific knowledge about the next navigation based on content, structure, analytics, or other signals - e.g. high-likelihood search results, paginated content or step-driven flows, aggregated analytics or per-user behavior, and so on.
</p>

<p>
例えば画像展示は、利用者から次回に要請されると見込まれる写真や頁についての知識を有し得る。
~appは、次回の~naviが誘発される前に，要求される資源（個々の写真 ／ 必須の資源 ／ 全部的な頁）を~fetchし始めるよう~UAに依頼して，利用者~体験を改善できる。
◎
For example, an image gallery may have knowledge about the likelihood of the next photo or page that may be requested by the user. To provide an improved experience the application can ask the user agent to begin fetching required resources (individual photos, critical resources, or the full page) before the next navigation is triggered.
</p>

<p>
~appは、利用している各~資源に対し， `prefetch$v 関係, および
（ `pr$a 内容~属性を介して）任意選択の確率を指定して，上の挙動を達成できる。
◎
To achieve the above behavior the application can specify one or more prefetch relations and optionally specify the probability (via pr attribute) of each resource being used.
</p>

			</section>
    		<section id="reactive-resource-prefetching-(prefetch)">
<h2 title="Reactive resource prefetching (prefetch)">4.4. 受動的な資源の~prefetch法（ `prefetch^v ）</h2>

<p>
`prefetch$v 利用すれば、利用者が次へ向かう所についての知識を活用するような，  “受動的~prefetch策” を実装できる
— ~appは、~navi要請と並列的に，必須の資源を~prefetchし始められるようにする。
◎
The prefetch can be used to implement a "reactive prefetch strategy" that leverages the knowledge of where the user is heading next and enables the application to begin prefetching critical resources in parallel with the navigation request.
</p>

<p>
~appは、利用者／~appから生成される~clickその他の~eventを~listenして，次回の~naviに要求される必須の資源に関連する `prefetch$v 関係を動的に挿入することで、上の挙動を達成できる。
~UA側においては、~hintされた資源を~navi要請と並列的に~fetchして，必須の資源より早く可用にできる。
◎
To achieve the above behavior the application can listen for click, or other user and application generated events, and dynamically insert relevant prefetch relations for critical resources required by the next navigation. In turn, the user agent can fetch the hinted resources in parallel with the navigation request, making the critical resources available sooner.
</p>

<p>
この策は、［
`prefetch$v  関係を介して起動された要請が，複数~naviにまたがって持続化する
］のを許容する特色機能を，可能化する。
◎
The enabling feature of this strategy is that requests initiated via prefetch relation may be allowed to persist across navigations.
</p>

		</section>
		<section id="prerendering-(prerender)">
<h2 title="Prerendering (prerender)">4.5. ~prerender法（ `prerender^v ）</h2>

<p>
`prerender$v ~hintを利用すれば、利用者が~naviを誘発したとき即時的~navi体験を可能化できるよう，行先~頁を~prerenderできる。
◎
The prerender hint can be used to prerender the destination page, enabling an instant navigation experience once the user triggers the navigation.
</p>

<p>
~appは、各が行先~頁（~HTML資源）を指すような
`prerender$v 関係を 1 つ以上~指定して，即時的~navi体験を送達できる。
~UA側において、即時的~naviを送達する
— すなわち，頁を “~prerender” する —
ためとして，そのような~HTML文書を［
~fetchして処理する, その下位資源も~fetchする, その他の作業を遂行する
］ようにしても~MAY。
◎
To deliver an instant navigation experience the application can specify one or more prerender relations, each of which points to a destination page (an HTML resource). In turn, the user agent may fetch and process the HTML document, fetch its subresources, and perform other work to deliver an instant navigation - i.e. "prerender" the page.
</p>


<p>
最後に，~prerender時には多数の資源が要求され得るので、~appは，各~targetに（ `pr$a 内容~属性を介して ）確率を指定して，~UAが最善の利用者~体験を送達するのを補助できる。
◎
Finally, because prerendering may require a lot of resources, the application can specify the probability (via pr attribute) of each target to help the user agent deliver the best user experience.
</p>
		</section>
	</section>
	<section id="security-and-privacy">
<h2 title="Security and Privacy">5. ~securityと~privacy</h2>

<p>
`資源~hint~link$の利用-は、現在の頁, 利用者の活動
両者についての情報を公開するような，新たな手段を提供し得る。
［
~secure, 平文
］両~接続とも、例えば，［［
~prefetch／~prerender
］された資源の内容 ／
接続を確立する間に公開される［
~DNS ／ ~IP ／ ~hostname
］情報
］を観測することにより、そのような要請を起動している頁についての情報, および
資源~hintが動的に利用される所では利用者の活動も，露わにされ得る。
◎
The use of resource hints can provide new means to expose information about both the current page and user's activity on it. For example, observing the content of prefetched or prerendered resources, or observing the DNS, IP, and hostname information exposed during connection establishment, both for secure and plain-text connections, can reveal information about the page initiating such requests, and where dynamic resource hints are used, user's activity on it.
</p>

<p>
これらの~risk一部を軽減するため、~UAは，次をし~MUST：
◎
To mitigate some of the above risks, the user agent MUST:
</p>

<ul>
	<li>
`資源~hint~link$が指す内容を，`随意に阻止可能な内容$ `MIXED-CONTENT$r として扱う。
◎
Treat resource hint link's as Optionally-blockable Content, as defined by [MIXED-CONTENT].
</li>
	<li>
楽観的な資源~fetching用に、関連する
<a href="~CSP2#complications">処理の複雑化に際しての推奨</a>
`CSP3$r
を適用する。
◎
Apply relevant Processing Complications recommendations for optimistic resource fetching, as defined by [CSP3].
</li>
	<li>
`資源~hint~link$が指す内容に，関連する~referrer~policy制約 `REFERRER-POLICY$r を適用する。
◎
Apply relevant Referrer policy restrictions for resource hint link's, as defined by [REFERRER-POLICY].
</li>
</ul>

<p>
加えて，~UAは、`資源~hint~link$の利用を制御する設定群を利用者に提供して~MAY
◎
Additionally, the user agent MAY provide user setting to control the use of resource hints.
</p>

<p>
~site作者は、必要とされる予防策をとる~SHOULDである
—
`MIXED-CONTENT$r, `CSP3$r, `REFERRER-POLICY$r による関連する各種~policyを指定して、~UAが，`資源~hint~link$を処理するに先立って，それらを登録して適用できるようにするため：
◎
The site author SHOULD take necessary precautions to specify the relevant [MIXED-CONTENT], [CSP3], and [REFERRER-POLICY] policies to allow the user agent to register and apply them prior to processing a resource hint link:
</p>

<ul>
	<li>
`資源~hint~link$を~HTML~markupを介して提供する場合、事前に，関連する `meta^e による~policyが宣言される~SHOULDである
— 例：
~CSP用の <a href="~CSP2/#delivery-html-meta-element">`meta^e 推奨</a>
を見よ。
◎
If resource hint link is provided via HTML markup, then the relevant &lt;meta&gt; policies SHOULD be declared ahead of them - e.g. see &lt;meta&gt; recommendations for CSP.
</li>
	<li>
`資源~hint~link$は `Link$h ~HTTP応答~headerを介して提供される場合、関連する~policyも~HTTP応答~headerとして送達されるべきである
— 例：
~CSP用の
<a href="~CSP2#complications">処理の複雑化</a>
を見よ。
◎
If resource hint link is provided via the Link HTTP response header, then the relevant policies should also be delivered as an HTTP response header - e.g. see Processing Complications for CSP.
</li>
</ul>

	</section>
	<section id="conformance">
<h2 title="Conformance">6. 適合性</h2>

<p>
この仕様が適合性を課す対象は、~UAのみである。
◎
There is only one class of product that can claim conformance to this specification: a user agent.
</p>

	</section>
	<section id="iana-considerations">
<h2 title="IANA Considerations">7. ~IANA考慮点</h2>

<p>
以下に挙げる各種~link関係~型は、 `RFC5988$r,  6.2.1 節により，~IANAにより登録された：
◎
The link relation types below have been registered by IANA per Section 6.2.1 of [RFC5988]:
</p>

		<section id="dns-prefetch-link-relation-type">
<h3 title="dns-prefetch Link Relation Type">7.1. `dns-prefetch^v ~link関係~型</h3>

<dl>
	<dt>関係~名</dt>
	<dd>`dns-prefetch$v</dd>

	<dt>記述</dt>
	<dd>
［［［［［
当の~link文脈~用に要求される資源
］を~fetchする
］ために利用する
］ことになる生成元
］を指示する
］ために利用される
— ~UAは、可能な限り早くに解決するものとする。
◎
Used to indicate an origin that will be used to fetch required resources for the link context, and that the user agent ought to resolve as early as possible.
</dd>

	<dt>参照</dt>
	<dd>
この仕様。
◎
W3C Resource Hints Specification (https://www.w3.org/TR/resource-hints/)
</dd>
</dl>
		</section>
		<section id="preconnect-link-relation-type">
<h3 title="preconnect Link Relation Type">7.2. `preconnect^v ~link関係~型</h3>

<dl>
	<dt>関係~名</dt>
	<dd>`preconnect$v</dd>

	<dt>記述</dt>
	<dd>
［［［［［
当の~link文脈~用に要求される資源
］を~fetchする
］ために利用する
］ことになる生成元
］を指示する
］ために利用される
— ~UAは、接続を確立する際の高い遅延~costを覆隠せるよう，［
~DNS検索, ~TCP~handshake, ~TLS折衝（任意選択）
］を含む，早期に接続を起動して。
◎
Used to indicate an origin that will be used to fetch required resources for the link context. Initiating an early connection, which includes the DNS lookup, TCP handshake, and optional TLS negotiation, allows the user agent to mask the high latency costs of establishing a connection.
</dd>

	<dt>参照</dt>
	<dd>
この仕様。
◎
W3C Resource Hints Specification (https://www.w3.org/TR/resource-hints/)
</dd>
</dl>
		</section>
		<section id="prefetch-link-relation-type">
<h3 title="prefetch Link Relation Type">7.3. `prefetch^v ~link関係~型</h3>

<dl>
	<dt>関係~名</dt>
	<dd>`prefetch$v</dd>

	<dt>記述</dt>
	<dd>
~prefetch~link関係~型は、次回の~naviに際して，当の~link文脈から要求されるであろう資源を識別するために利用される
,
— ~UAは、未来に資源が要請され次第，より高速に応答を送達できるよう~fetchするものとする。
◎
The prefetch link relation type is used to identify a resource that might be required by the next navigation from the link context, and that the user agent ought to fetch, such that the user agent can deliver a faster response once the resource is requested in the future.
</dd>

	<dt>参照</dt>
	<dd>
この仕様。
◎
W3C Resource Hints Specification (https://www.w3.org/TR/resource-hints/)
</dd>
</dl>

		</section>
		<section id="prerender-link-relation-type">
<h3 title="prerender Link Relation Type">7.4. `prerender^v ~link関係~型</h3>

<dl>
	<dt>関係~名</dt>
	<dd>`prerender$v</dd>

	<dt>記述</dt>
	<dd>
次回の~naviに際して，当の~link文脈から要求されるであろう資源を識別するために利用される
— ~UAは、未来に資源が要請され次第 より高速に応答を送達できるよう，~fetchして実行するものとする。
◎
Used to identify a resource that might be required by the next navigation from the link context, and that the user agent ought to fetch and execute, such that the user agent can deliver a faster response once the resource is requested in the future.
</dd>

	<dt>参照</dt>
	<dd>
この仕様。
◎
W3C Resource Hints Specification (https://www.w3.org/TR/resource-hints/)
</dd>
</dl>
		</section>
	</section>

</main></div><!-- id="MAIN"／MAIN0 -->

	<section id="acknowledgments">
<h2 title="Acknowledgments">謝辞</h2>

<p lang="en-x-a0">
This document reuses text from the [HTML] specification, edited by Ian Hickson, as permitted by the license of that specification.
</p>


	</section>
	<section id="references">
<h2 title="References">参照文献</h2>

		<section id="normative-references">
<h2 title="Normative references">文献（規範）</h2>

<script type="text/plain" class="ref_data">
[CSP3]
    Content Security Policy Level 3. Mike West. W3C. 13 September 2016. W3C Working Draft. URL: https://www.w3.org/TR/CSP3/ 
[HTML]
    HTML Standard. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters. WHATWG. Living Standard. URL: https://html.spec.whatwg.org/multipage/ 
[MIXED-CONTENT]
    Mixed Content. Mike West. W3C. 2 August 2016. W3C Candidate Recommendation. URL: https://www.w3.org/TR/mixed-content/ 
[PAGE-VISIBILITY]
    Page Visibility (Second Edition). Jatinder Mann; Arvind Jain. W3C. 29 October 2013. W3C Recommendation. URL: https://www.w3.org/TR/page-visibility/ 
[REFERRER-POLICY]
    Referrer Policy. Jochen Eisinger; Emily Stark. W3C. 26 January 2017. W3C Candidate Recommendation. URL: https://www.w3.org/TR/referrer-policy/ 
[RFC2119]
    Key words for use in RFCs to Indicate Requirement Levels. S. Bradner. IETF. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119 
[RFC5988]
    Web Linking. M. Nottingham. IETF. October 2010. Proposed Standard. URL: https://tools.ietf.org/html/rfc5988 
</script>

		</section>
		<section id="informative-references">
<h2 title="Informative references">文献（参考）</h2>

<script type="text/plain" class="ref_data">
[PRELOAD]
    Preload. Ilya Grigorik; Yoav Weiss. W3C. 18 July 2017. W3C Working Draft. URL: https://www.w3.org/TR/preload/ 
[WEBIDL]
    Web IDL. Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. 15 December 2016. W3C Editor’s Draft. URL: https://heycam.github.io/webidl/ 
</script>

		</section>
	</section>
