<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Navigation Timing 2 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />

<script src="common0.js" ></script>
<script src="common1.js" async></script>


<script>
var source_data;

COMMON_DATA.page_state_key = '___TIMING';
COMMON_DATA.init = function(expanded){
	var options = {
		original_url: 'http://www.w3.org/TR/navigation-timing-2/',
//		original_url: 'https://w3c.github.io/navigation-timing/',
		spec_status: 'WD',
		main: 'MAIN',
		fill_text_link: '#_versions > dd, #references dd',
		alt_refs: 'references',
		ref_id_prefix: 'bib-',
//		ref_id_lowercase: true,
	};

	if(expanded) return options;

	source_data = {
		html: E('MAIN').innerHTML,
		link_map: Util.getMapping('_link_map'),
		levels: '英語主体:英語寄り:漢字主体:カナ主体',
		level: 2,
		generate: expand
	};
	Util.switchWordsInit(source_data);

//	Util.del_j(); // checked: 2016-04-22 spec

	return options;
}

function expand(mapping1){

	var class_map = {
		h: 'header',
		e: 'element',
		a: 'attr',
//		l: 'literal',
		ev: 'event-type',
		css: 'css',
		tnote: 'trans-note'
	};

	var tag_map = {
		I: 'code',
		m: 'code',
		c: 'code',
		h: 'code',
		e: 'code',
		a: 'code',
		ev: 'code',
		st: 'code',
		css: 'code',
//		l: 'code',
		v: 'var',
		i: 'i',
		tnote: 'span'
	};

	var link_map = this.link_map;
	var nesting = '';
	var in_idl = false;
	var idl_ifc = '';

	E('MAIN').innerHTML = Util.replaceWords1(
		this.html.replace(
			/⇒！?|◎[^<◎]*|`(.+?)([$@\^])(\w*)/g,
			create_html
		),
		mapping1
	);
	// 目次構築
	Util.rebuildToc('MAIN0', '_toc_list0');

	function create_html(match, key, indicator, klass){


if(!key) {
	switch(match){
	case '⇒':
		nesting += '</span>';
		return '：<span class="block">';
	case '⇒！':
		in_idl = true;
		nesting += '</pre>';
		return '<pre class="idl">';
	}//◎
	if(in_idl) {
		result = nesting;
		in_idl = false;
	} else {
		result = nesting + '<span lang="en">' + match.slice(1) + '</span>';
	}
	nesting = '';
	return result;
}

var text = key;
var href = '';
var classname = class_map[klass];
var tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = '#bib-' + key;
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"'
	break;
case 'I': // IDL interface
	//href = '#' + key;
	if(in_idl) tag = '';
	break;
case 'm': // IDL member
	//href = '#dom-PerformanceNavigationTiming-' + key;
	if(in_idl) tag = '';
	break;
case 'ev': // event-type
	break;
case 'v': // variables
	break;
case 'tnote': 
	text = '【' + text + '】';
	break;
default: //
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	default:
		console.log(match);
		return match;
	}
}

return text;


	}
}


</script>

<script>
function test1(){
	var result = '';
	try {
		var timing = performance.getEntriesByType("navigation")[0];
		timing.name; // for error logging
		var T = timing;
		result = [
"Name:       " + T.name,
"Entry Type: " + T.entryType,
"Start Time: " + T.startTime,
"Duration:   " + T.duration,
"Unload:     " + (T.unloadEventEnd - T.unloadEventStart),
"Redirect:   " + (T.redirectEnd - T.redirectStart),
"App Cache:  " + (T.domainLookupStart - T.fetchStart),
"DNS:        " + (T.domainLookupEnd - T.domainLookupStart),
"TCP:        " + (T.connectEnd - T.connectStart),
"Request:    " + (T.responseStart - T.requestStart),
"Response:   " + (T.responseEnd - T.responseStart),
"Processing: " + (T.loadEventStart - T.responseEnd),
"Onload:     " + (T.loadEventEnd - T.loadEventStart)
].join('\n');
	} catch(e){
		result = 'エラー（ ' + e.name + ' ）\n' + e.message;
	}

	E('_test_output').textContent = result;
}
</script>



<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
redirect-or-equivalents:
GET-or-equivalents:
time-value:
time-diff:
DOMHighResTimeStamp:
	PerformanceEntry:
PerformanceNavigationTiming:idl-def-PerformanceNavigationTiming
NavigationType:idl-def-NavigationType


	ALPN-Protocol-ID:
DOMContentLoaded:
	HTTP-cache:
asynchronously-closed:
browsing-context:
cause-by-fragment-identifiers:
content-codings:
current-document-readiness:
dom-location-reload:
fetching:
history-traversal:
message-body:
meta-refresh:
navigation:
origin:
persistent-connection:
refresh-pragma-directive:
refused-to-unload:
relaxing-the-same-origin-restriction:
relevant-application-cache:
	same-origin:
sandboxed-navigation-browsing-context-flag:
sandboxed-top-level-navigation-browsing-context-flag:
url-scheme:
unloading-documents:
visibilityState:
dfn-performance-entry-buffer:
</script>
<!-- 
	PerformanceResourceTiming:

 -->

<!--%置換語 -->
<script type="text/plain" id="words_table1">
TIMELINE:performance-timeline-2-ja.html
	http://www.w3.org/TR/performance-timeline-2/
	http://www.w3.org/TR/performance-timeline/
RTiming:resource-timing-ja.html
	http://www.w3.org/TR/resource-timing/
	https://w3c.github.io/resource-timing/
SW:http://www.w3.org/TR/service-workers/
fetch_ev: <code class="event-type">fetch</code> 
</script>
<!-- 
	unload_ev: <code class="event-type">unload</code> 
	load_ev: <code class="event-type">load</code> 
DOMContentLoaded: <code class="event-type">DOMContentLoaded</code> 

-->

<!--%単語 -->
<script type="text/plain" id="words_table">


	●仕様
勧告:Recommendation:~
全部的:full:~
利用者:user:~
仕様:spec:~
仕組み:mechanisms:~
義務:mandatory:~
要件:requirements:~
意図-:intend:~
拡張-:extend:~
拡張:extension:~
	試験的:experimental:~
妥当:valid:~
包括的な:comprehensive:~
定義-:define:~
定義:definition:~
実行-:execute:~
旧来目的:legacy purpose:旧来の目的
	実装-:implement:~
	実装:implementation:~
	実装者:implementers:~
表現-:represent:~
要求-:require:~
試み:attempt する:~
試みる:attempt する:~
適切:appropriate:~
許容-:allow:~
制限-:limit:~
新たな:new:~
特色機能:feature:~
重要な:important:~
側面:aspect:~
様相:picture:~
詳細な:detailed:~
事例:case:~
素朴:naive:~
築かれ:build され:~
	encoded body and decode
見なさ:consider さ:~
導入-:introduce:~
影響-:affect:~
UA:user agent:UA
作者:author:~
制約-:restrict:~
施行:enforcing:~
施行-:enforce:~
明示的:explicit:~
暗黙的:implicit:~
適合:conforming:~
適合性:conformance:~
非標準:non-normative:~
歴史的:historical:~

	●保安
policy:::ポリシー
link-click:link の click::リンクのクリック
login-status:login status::ログイン状態
privacy:::プライバシー
secure:::セキュア
security:::セキュリティ
	接頭辞:prefix:~
	推奨-:recommend:~
第三者:third-party:~::サードパーティ
末端利用者:end-user:~
認証:authentication:~
注意深く:careful に:~
細工-:craft:~
保護:protection:~
信頼-:trust:~
推定-:infer:~
提供-:provide:~
提供者:provider:~
未承認の:unauthorized:~
流出-:disclose:~
流出:disclosure:~
訪問:visit:~
軽減-:mitigate:~
配備:deploy:~
攻撃:attack:~
緩い:relaxed:~

	●fetch／network
load:
unload:
fetch:
fetching:::fetch 処理
reload:::再 load
open:
navigation:::ナビゲーション
host:::ホスト
handshake:::ハンドシェイク
cache:::キャッシュ
client:::クライアント
path:::パス
port:::ポート
protocol:::プロトコル
proxy:::プロキシ
redirect:::リダイレクト
server:::サーバ
site:::サイト
transport:::トランスポート
address:::アドレス
domain:::ドメイン
header:::ヘッダ
資源:resource::~:リソース
要請:request::~:リクエスト
応答:response::~:レスポンス
転送:transfer::~
受信-:receive:~
送信-:send:~
送信:sending:~
持続的:persistent:~
接続:connection::~:コネクション
接続-:connect::~:コネクト
指令:directive::~:ディレクティブ
本体:body::~:ボディ
検索:lookup::~
検索取得-:retrieve::~
検索取得:retrieval::~
素片識別子:fragment:~
生成元:origin::~:オリジン
同一生成元:same origin::~:同一オリジン
非同一生成元:cross-origin::~:クロスオリジン
確立-:establish:~
端点間:end-to-end::~:エンドツーエンド

履歴:history:~
辿り:traversal operation:~
事前具現化-:prerender::事前に具現化:プリレンダー

	●処理能
entry:::エントリ
buffer:::バッファ
処理能:performance::~:パフォーマンス
時刻:time:~
時刻値:time 値:~
時区間:time interval:~
時間:time:~
計時:timing:~::タイミング
計測:measure:~
計量:metric:~
記録:record:~
	ミリ秒:millisecond:~
測定:measure:~
所要時間:duration:~
終了-:finish:~
終了:end:~
	遅延測定:latency measurements:~
開始:start:~
	開始時点:beginning:~
高解像度:high resolution:~


	●未分類
作動中の:active な::~:アクティブな
service-worker:service worker
service:
worker:::
size:::サイズ
access:::アクセス
address-bar:address bar::アドレスバー
app:application::アプリ
byte:::バイト
data:::データ
directory:::ディレクトリ
event:::イベント
form-submission:form submission::フォーム送信
handler:::ハンドラ
inline:::インライン
instance:::インスタンス
interface:::インタフェース
method:::メソッド
model:::モデル
obj:object::オブジェクト
page:::ページ
sandbox:::サンドボックス
script:::スクリプト
support:::サポート
tag:::タグ
top-level:::トップレベル
web:::ウェブ
zero:::ゼロ
memory:::メモリ

hint:::ヒント
flag:::フラグ
中止:abort:~
被取得時:被 get 時:~

	依拠-:rely:~
共有-:share:~
共有:shared:~
内容:content:~
再試行:retry:~
初期化:initializing:~
待入する:queue する::待ち行列に入れる:キューする
行先の:destination:~

型:type:~
失敗-:fail:~
演算:operation:~
完了-:complete:~
完了:completion:~
完全:complete:~
局所:local::~:ローカル
属性:attribute:~

遅延:latency:~

感知:perceive:~
成功:success:~
拒否:refuse:~
文書:document:~
格納-:store:~
検査-:check:~
消費-:consume:~
準備度:readiness::~
環境設定-:configure:~
発火:fire:~
登録:registration:~
直列化:serialization:~::シリアル化
直列化-:serialize:~::シリアライズ
直列化子:serializer:~::シリアライザ
	直列化-可能:serializable:~
種別:type:~
	空白類:whitespace:~
	
継承:inherited:~
継承-:inherit:~
要素:element:~
解像度:resolution:~
設定-:set:~
閲覧文脈:browsing context:~
文脈:context:~
非同期:asynchronous:~
名前:name:~
名:name:~
値:value:~
現在の:current:~
可用:available:~
空文字列:empty string:~

~~既存の:preexist:~
検出:detection:~
検出法:detecting:~


状態:state:~
~~直前:immediately before:~
~~直後:immediately after:~
~~等:or equivalent:~
	し始める:initiate:~
関係-:relate:~
	に関係する:related:~
事由:reason:~
作成-:create:~
再利用:re-use:~
動作-:act:~
動作:action:~
収集-:collect:~
変化:change:~
変更-:change:~
情報:information:~
段:step:~

生成-:generate:~
知識:knowledge:~
等価:equivalent:~
計算-:calculate:~
維持-:maintain:~
関連の:relevant:~
構造:structure:~
既定:default:~

指定-:specify:~
公開-:expose:~
走らせ:run させ::~
特性:characteristics:~
処理-:process:~
処理:processing:~
内部:internal:~
	高速に:faster:
	受け持つ cover
整数:integer:~
定数:constant:~

</script>


<!--%links -->
<script type="text/plain" id="_link_map">
	●I
I.PerformanceNavigationTiming:#idl-def-performancenavigationtiming
I.NavigationType:#idl-def-navigationtype
I.DOMHighResTimeStamp:#_domhighrestimestamp
x.DOMHighResTimeStamp:~HRTIME#dom-domhighrestimestamp
	#dom-domhighrestimestamp
I.PerformanceEntry:~TIMELINE#the-performanceentry-interface
	I.PerformanceEntry:~TIMELINE#idl-def-PerformanceEntry
I.PerformanceResourceTiming:~RTiming#idl-def-performanceresourcetiming
	~RTiming#idl-def-performancenavigationtiming

	x.PerformanceResourceTiming:~RTiming#idl-def-PerformanceResourceTiming

	●m
m.back_forward:#dom-navigationtype-back_forward
m.connectEnd:~RTiming#dom-performanceresourcetiming-connectend
m.connectStart:~RTiming#dom-performanceresourcetiming-connectstart
m.decodedBodySize:~RTiming#dom-performanceresourcetiming-decodedbodysize
m.domComplete:#dom-performancenavigationtiming-domcomplete
m.domContentLoadedEventEnd:#dom-performancenavigationtiming-domcontentloadedeventend
m.domContentLoadedEventStart:#dom-performancenavigationtiming-domcontentloadedeventstart
m.domInteractive:#dom-performancenavigationtiming-dominteractive
m.domainLookupEnd:~RTiming#dom-performanceresourcetiming-domainlookupend
m.domainLookupStart:~RTiming#dom-performanceresourcetiming-domainlookupstart
m.duration:#dom-PerformanceNavigationTiming-duration
m.encodedBodySize:~RTiming#dom-performanceresourcetiming-encodedbodysize
m.entryType:#dom-PerformanceNavigationTiming-entryType
m.fetchStart:~RTiming#dom-performanceresourcetiming-fetchstart
m.initiatorType:#dom-PerformanceNavigationTiming-initiatorType
m.loadEventEnd:#dom-performancenavigationtiming-loadeventend
m.loadEventStart:#dom-performancenavigationtiming-loadeventstart
m.name:#dom-PerformanceNavigationTiming-name
m.navigate:#dom-navigationtype-navigate
m.nextHopProtocol:~RTiming#dom-performanceresourcetiming-nextHopProtocol
m.prerender:#dom-navigationtype-prerender
m.protocol:#dom-PerformanceNavigationTiming-nextHopProtocol
m.redirectCount:#dom-performancenavigationtiming-redirectcount
m.redirectEnd:~RTiming#dom-performanceresourcetiming-redirectend
m.redirectStart:~RTiming#dom-performanceresourcetiming-redirectstart
m.reload:#dom-navigationtype-reload
m.requestStart:~RTiming#dom-performanceresourcetiming-requeststart
m.responseEnd:~RTiming#dom-performanceresourcetiming-responseend
m.responseStart:~RTiming#dom-performanceresourcetiming-responsestart
m.secureConnectionStart:~RTiming#dom-performanceresourcetiming-secureconnectionstart
m.startTime:#dom-PerformanceNavigationTiming-startTime
m.transfer:#dom-PerformanceNavigationTiming-transferSize
m.transferSize:~RTiming#dom-performanceresourcetiming-transfersize
m.type:#dom-performancenavigationtiming-type
m.unloadEventEnd:#dom-performancenavigationtiming-unloadeventend
m.unloadEventStart:#dom-performancenavigationtiming-unloadeventstart
m.workerStart:#dom-PerformanceNavigationTiming-workerStart
	＊m.workerStart:#dom-performanceresourcetiming-workerstart

m.location.reload():#dom-location-reload
	m.location.reload():~HTML50/browsers.html#dom-location-reload

	m.initiatorType:~RTiming#dom-performanceresourcetiming-initiatortype
	m.workerStart:~RTiming#dom-performanceresourcetiming-workerstart
	m.getEntriesByType:#getEntriesByType
x.getEntriesByType:~TIMELINE#dom-Performance-getEntriesByType


	●
ev.DOMContentLoaded:#DOMContentLoaded

l.back_forward:#dom-navigationtype-back_forward
l.navigate:#dom-navigationtype-navigate
l.prerender:#dom-navigationtype-prerender
l.reload:#dom-navigationtype-reload

	l.reload:#idl-def-NavigationType.reload

l.loading:#_readiness-loading
l.interactive:#_readiness-interactive
l.complete:#_readiness-complete
	l.complete:~HTML50/syntax.html#the-end
	l.interactive:~HTML50/syntax.html#the-end
	l.loading:~HTML50/dom.html#current-document-readiness

h.Timing-Allow-Origin:~RTiming#timing-allow-origin





	●
~navigation:#dfn-navigation
~fetching:#fetching
~fetch:#fetching
現在の文書:#dfn-current-document
~redirect等:#redirect-or-equivalents
GET 等:#GET-or-equivalents
時刻値:#time-value
所要時間:#time-duration
閲覧文脈:#browsing-context
関連の~app~cache:#relevant-application-cache
文書の現在の準備度:#current-document-readiness
準備度:#current-document-readiness
履歴の辿り:#history-traversal
緩い同一生成元~policy:#relaxing-the-same-origin-restriction
文書の~unloadを拒否した:#refused-to-unload
refresh pragma 指令:#refresh-pragma-directive
meta refresh:#meta-refresh

ev.unload:#unloading-documents

閲覧文脈~sandbox化( ~navigation )~flag:#sandboxed-navigation-browsing-context-flag
閲覧文脈~sandbox化( ~top-level~navigation )~flag:#sandboxed-top-level-navigation-browsing-context-flag

素片識別子により生じた:#cause-by-fragment-identifiers
生成元:#origin
同一生成元:#same-origin
持続的~接続:#persistent-connection
非同期に閉じられ:#asynchronously-closed
事前具現化-:#rel-prerender
作動中の~service-worker登録:#active-service-worker-registration
~service-worker登録:#service-worker-registration
作動中の~worker:#active-worker
名前~fetch_evの~eventを発火:#on-fetch-request-algorithm
~workerを走らせ:#run-a-worker

	
~objの作成-:#step-create-object
~fetch開始:#step-fetch-start
接続-開始:#step-connect-start
要請~開始:#step-request-start
応答~開始:#step-response-start
応答~終了:#step-response-end

処理能~entry~buffer:#dfn-performance-entry-buffer


	●外部
x.ALPN Protocol ID:~IETF/rfc7301
	x.equivalent:~HTML50/infrastructure.html#concept-http-equivalent-codes
	x.equivalent:~HTML50/infrastructure.html#concept-http-equivalent-get
	x.4.5 Cross-origin Resources:~RTiming#cross-origin-resources
	x.Queue:http://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry

		定義表
x.performance entry buffer:~TIMELINE#dfn-performance-entry-buffer
x.Window object’s newest Document object:~HTML50/browsers.html#dom-document-0
x.act of navigating:~HTML50/browsers.html#navigate
	x.navigation:
x.DOMContentLoaded event:~HTML50/syntax.html#the-end
x."complete":~HTML50/syntax.html#the-end
x."interactive":~HTML50/syntax.html#the-end
x.refresh pragma directive:~HTML50/document-metadata.html#attr-meta-http-equiv-refresh
x.browsing context:~HTML50/browsers.html#browsing-context
x.current document readiness:~HTML50/dom.html#current-document-readiness
x.fetching process:~HTML50/infrastructure.html#fetch
x.caused by fragment identifiers:~HTML50/browsers.html#navigate-fragid-step
x.history traversal:~HTML50/browsers.html#traverse-the-history
x.location.reload():~HTML50/browsers.html#dom-location-reload
x.meta refresh:~HTML50/document-metadata.html#attr-meta-http-equiv-refresh
x.refuses to allow the document to be unloaded:~HTML50/browsers.html#refused-to-allow-the-document-to-be-unloaded
x.relaxed same origin policy:~HTML50/browsers.html#relaxing-the-same-origin-restriction
x.relevant application cache:~HTML50/browsers.html#relevant-application-cache
x.sandboxed navigation browsing context flag:~HTML50/browsers.html#sandboxed-navigation-browsing-context-flag
x.sandboxed top-level navigation browsing context flag:~HTML50/browsers.html#sandboxed-top-level-navigation-browsing-context-flag
x.unload event:~HTML50/browsers.html#unloading-documents

x.active worker:~SW#dfn-active-worker
x.fire an event named fetch:~SW#on-fetch-request-algorithm
x.run a worker:~SW#service-worker-concept
x.service worker registration:~SW#dfn-service-worker-registration
x.active service worker registration:~SW#dfn-containing-service-worker-registration

	x.HTTP cache:~IETF/rfc7234
x.same origin:~IETF/rfc6454#section-5
x.asynchronously closed:~IETF/rfc7230#section-6.5
x.persistent connection:~IETF/rfc7230#section-6.3
x.origin:~IETF/rfc6454
x.prerender:~TR/resource-hints/#prerender

	＊


	number of redirects:#dom-PerformanceNavigationTiming-redirectCount
	JavaScript:#dfn-javascript
	Queue:~TIMELINE#dfn-queue-a-performanceentry
	Timing-Allow-Origin:#timing-allow-origin

</script>




<!--%style -->

<style>

</style>

</head>

<body>

<div style="display:none;">
<input type="hidden" id="_page_config" value="" />
</div>



<aside class="trans-meta">
<h1>Navigation Timing 2 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.w3.org/">W3C</a> により，副題の日付にて
<strong>作業草案</strong>として公開された
<a id="_SPEC_URL">Navigation Timing 2</a>
を日本語に翻訳したものです。
<strong>この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語訳は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p>
更新： <time>2016-05-02</time>
（公開：<time>2013-10-04</time> ）
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>

<header>

<div><a href="http://www.w3.org/" id="_W3C">W3C</a></div>

<h1>ナビゲーションの計時 — Navigation Timing 2</h1>
<h2>2016 年 4 月 22 日付 作業草案</h2>

<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dd>http://www.w3.org/TR/2016/WD-navigation-timing-2-20160422/</dd>

	<dt title="Latest published version:">最新発行バージョン</dt>
	<dd>http://www.w3.org/TR/navigation-timing-2/</dd>

	<dt title="Latest editor's Draft:">最新の編集者草案</dt>
	<dd>https://w3c.github.io/navigation-timing/</dd>

	<dt title="Test suite:">テスト一式</dt>
	<dd>https://github.com/w3c/web-platform-tests/tree/master/navigation-timing</dd>

	<dt title="Previous version:">以前のバージョン</dt>
	<dd>http://www.w3.org/TR/2016/WD-navigation-timing-2-20160225/</dd>

	<dt title="Editors:">編集</dt>
	<dd>Tobin Titus, Microsoft Corp., <a href="mailto:tobint@microsoft.com">tobint@microsoft.com</a></dd>
	<dd>Jatinder Mann, Microsoft Corp.,
<a href="mailto:jmann@microsoft.com">jmann@microsoft.com</a> (Until February 2014)</dd>
	<dd>Arvind Jain, Google Inc.,
<a href="mailto:arvind@google.com">arvind@google.com</a> (Until December 2014)</dd>

	<dt title="Repository:">リポジトリ</dt>
	<dd><a href="https://github.com/w3c/navigation-timing/">We are on Github.</a></dd>
	<dd><a href="https://github.com/w3c/navigation-timing/issues">File a bug.</a></dd>
	<dd><a href="https://github.com/w3c/resource-timing/commits/gh-pages/index.html">Commit history.</a></dd>

	<dt>Mailing list:</dt>
	<dd><a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a></dd>

	<dt title="Implementation:">実装</dt>
	<dd><a href="http://caniuse.com/#feat=nav-timing">Can I use Navigation Timing?</a></dd>
	<dd><a href="http://w3c-test.org/navigation-timing/">Test Suite</a></dd>
	<dd><a href="https://github.com/w3c/web-platform-tests/tree/master/navigation-timing">Test Suite repository</a></dd>

</dl>

<small class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
© 2016
<a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
(<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
<a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
<a href="http://www.keio.ac.jp/">Keio</a>,
<a href="http://ev.buaa.edu.cn/">Beihang</a>).
W3C
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
and
<a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</small>

</header>

<div id="MAIN" style="display:none;">


	<section class="introductory" id="abstract">
<h2 title="Abstract">要約</h2>

<p>
この仕様は、~web~appが文書の~navigationに関する完全な計時~情報に~accessするための~interfaceを定義する。
◎
This specification defines an interface for web applications to access the complete timing information for navigation of a document.
</p>
	</section>

	<section id="sotd" class="introductory">
<h2 title="Status of This Document">この文書の位置付け</h2>

<p>
<em>この節では、発行時点における…</em>
<span class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#status">W3C 日本語訳 共通ページ</a>
に委譲
】</span></p>


<!-- 
This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the W3C technical reports index at http://www.w3.org/TR/.

This is a work in progress and may change without any notices.

Navigation Timing 2 replaces the first version of [NAVIGATION-TIMING] and includes the following changes:

    the definition of Performance interface was moved to [PERFORMANCE-TIMELINE-2];
    support for [PERFORMANCE-TIMELINE-2];
    support for [HR-TIME-2];
    Now builds on top of [RESOURCE-TIMING];
    the number of redirects since the last non-redirect navigation;
    protocol information;
    support for prerender navigation [RESOURCE-HINTS].
    transfer, encoded body and decoded body size information;
    the secureConnectionStart attribute is now mandatory.

Implementers SHOULD be aware that this document is not stable. Implementers who are not taking part in the discussions are likely to find the specification changing out from under them in incompatible ways. Vendors interested in implementing this document before it eventually reaches the Candidate Recommendation stage SHOULD join the aforementioned mailing lists and take part in the discussions.

This document was published by the Web Performance Working Group as a Working Draft. This document is intended to become a W3C Recommendation. If you wish to make comments regarding this document, please send them to public-web-perf@w3.org (subscribe, archives) with [NavigationTiming] at the start of your email's subject. All comments are welcome.

Publication as a Working Draft does not imply endorsement by the W3C Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.

This document was produced by a group operating under the 5 February 2004 W3C Patent Policy. W3C maintains a public list of any patent disclosures made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains Essential Claim(s) must disclose the information in accordance with section 6 of the W3C Patent Policy.

This document is governed by the 1 September 2015 W3C Process Document.

-->

<p>
Navigation Timing 2 は、その最初のバージョンである
`NAVIGATION-TIMING$r
を置き換えるものであり、次に挙げる変更を含んでいます：
◎
Navigation Timing 2 replaces the first version of [NAVIGATION-TIMING] and includes the following changes:
</p>

<ul>
	<li>
Performance ~interfaceの定義は
`PERFORMANCE-TIMELINE-2$r
に移動された。
◎
the definition of Performance interface was moved to [PERFORMANCE-TIMELINE-2];
</li>
	<li>
`PERFORMANCE-TIMELINE-2$r
の~support。
◎
support for [PERFORMANCE-TIMELINE-2];
</li>
	<li>
`HR-TIME-2$r
の~support。
◎
support for [HR-TIME-2];
</li>

	<li>
今や
`RESOURCE-TIMING$r
の上に築かれる。
◎
Now builds on top of [RESOURCE-TIMING];
</li>

	<li>
最後の非~redirect~navigationからの
<a href="#dom-performancenavigationtiming-redirectcount">~redirect数</a>。
◎
the number of redirects since the last non-redirect navigation;
</li>
	<li>
<a href="~RTiming#dom-performanceresourcetiming-nexthopprotocol">~protocol情報</a>
◎
protocol information;
</li>
	<li>
`事前具現化-$させる~navigationの~support。
`RESOURCE-HINTS$r
◎
support for prerender navigation [RESOURCE-HINTS].
</li>
	<li>
［
<a href="~RTiming#dom-performanceresourcetiming-transfersize">転送</a> ／
<a href="~RTiming#dom-performanceresourcetiming-encodedbodysize">符号化された本体</a> ／
<a href="~RTiming#dom-performanceresourcetiming-decodedbodysize">復号された本体</a>
］の~size情報。
◎
transfer, encoded body and decoded body size information;
</li>
	<li>
`secureConnectionStart$m
属性の~supportは、今や，義務とされた。
◎
the secureConnectionStart attribute is now mandatory.
</li>

</ul>

<p>
この文書は
<a href="http://www.w3.org/2010/webperf/">Web Performance Working Group</a>
により，編集者草案として制作されました。
コメントを歓迎します。
件名の先頭に
<samp>[NavigationTiming]</samp>
と記した上で
<a href="mailto:public-web-perf@w3.org?subject=%5BNavigationTiming2%5D">public-web-perf@w3.org</a>
（
<a href="mailto:public-web-perf-request@w3.org?subject=subscribe">subscribe</a>,
<a href="http://lists.w3.org/Archives/Public/public-web-perf/">archives</a>
）
宛まで送られるよう願います。
◎
This document was published by the Web Performance Working Group as a Working Draft. This document is intended to become a W3C Recommendation. If you wish to make comments regarding this document, please send them to public-web-perf@w3.org (subscribe, archives) with [NavigationTiming2] at the start of your email's subject. All comments are welcome.
</p>
	</section>


<nav class="toc" id="table-of-contents">
<h2 title="Table of Contents">目次</h2>
<ol id="_toc_list0"></ol>
</nav>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

~INFORMATIVE


<p>
~web~appの処理能~特性の測定は、~web~appをより高速にするために重要な側面になる。
`JSMEASURE$r
などの， JavaScript に基づく仕組みは、~app内における利用者~遅延の測定のための包括的な~~手段を提供し得る一方で、多くの事例で，それらは端点間における遅延の完全なあるいは詳細な様相を提供できない。
例えば、次の JavaScript は、~pageが全部的に~loadされるまでの時間を，ごく素朴に測定しようと試みる：
◎
Accurately measuring performance characteristics of web applications is an important aspect of making web applications faster. While JavaScript-based mechanisms, such as the one described in [JSMEASURE], can provide comprehensive instrumentation for user latency measurements within an application, in many cases, they are unable to provide a complete or detailed end-to-end latency picture. For example, the following JavaScript shows a naive attempt to measure the time it takes to fully load a page:
</p>


<div class="example">

<pre>
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
var start = new Date().getTime();
function onLoad() {
  var now = new Date().getTime();
  var latency = now - start;
  alert("page loading time: " + latency);
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body onload="onLoad()"&gt;
&lt;!- <span class="comment" title="Main page body goes from here.">~page本体の内容…</span> --&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>

<p>
上の~scriptは head ~tag内の最初の JavaScript コードが実行されて<strong>以降から</strong>，~pageが~loadされるまでの時間は計算するが、~serverから~pageを得るために要した時間や, ~pageの初期化の lifecycle <!-- ＊ -->についての情報は供さない。
◎
The above script calculates the time it takes to load the page after the first bit of JavaScript in the head is executed, but it does not give any information about the time it takes to get the page from the server, or the initialization lifecycle of the page.
</p>

<p>
この仕様は、文書の~navigationに関係する高解像度の処理能~計量~dataを格納する／取得するための，
`PERFORMANCE-TIMELINE-2$r
に関与する `PerformanceNavigationTiming$I ~interfaceを定義する。
`PerformanceNavigationTiming$I ~interfaceは
`HR-TIME-2$r を利用するので、すべての時刻値は，~navigationの開始から計測される。
例えば，HTTP 応答の終了が~navigationの開始から 100ms 後であったとするなら、
`PerformanceNavigationTiming$I
の~dataは次の様になるであろう：
◎
This specification defines the PerformanceNavigationTiming interface which participates in the [PERFORMANCE-TIMELINE-2] to store and retrieve high resolution performance metric data related to the navigation of a document. As the PerformanceNavigationTiming interface uses [HR-TIME-2], all time values are measured from the start of the navigation. For example, if we know that the response end occurs 100ms after the start of navigation, we MAY find data that the PerformanceNavigationTiming data looks like so:
</p>


<div class="example">
<pre>startTime:           0.000  // <span class="comment" title="start time of the navigation request">~navigation要請の開始~時刻</span>
responseEnd:       100.000  // <span class="comment" title="high resolution time of last received byte">高解像度による，最後に受信された~byteの時刻</span>
</pre></div>

<p>
文書の~navigationに関係する正確な計時~dataを得るために，
`PerformanceNavigationTiming$I
~interfaceを用いる例を次の~scriptに示す：
◎
The following script shows how a developer can use the PerformanceNavigationTiming interface to obtain accurate timing data related to the navigation of the document:
</p>

<div class="example">
<pre>
window.onload = function init() {
    var timing = performance.`getEntriesByType$x("navigation")[0];
    if (window.console) {
        console.log(
"Name: "       + timing.name                + "\n" +
"Entry Type: " + timing.entryType           + "\n" +
"Start Time: " + timing.startTime           + "\n" +
"Duration: "   + timing.duration            + "\n" +
"Unload: "     + (timing.unloadEventEnd -
                  timing.unloadEventStart)  + "\n" +
"Redirect: "   + (timing.redirectEnd -
                  timing.redirectStart)     + "\n" +
"App Cache: "  + (timing.domainLookupStart -
                  timing.fetchStart)        + "\n" +
"DNS: "        + (timing.domainLookupEnd -
                  timing.domainLookupStart) + "\n" +
"TCP: "        + (timing.connectEnd -
                  timing.connectStart)      + "\n" +
"Request: "    + (timing.responseStart -
                  timing.requestStart)      + "\n" +
"Response: "   + (timing.responseEnd -
                  timing.responseStart)     + "\n" +
"Processing: " + (timing.loadEventStart -
                  timing.responseEnd)       + "\n" +
"Onload: "     + (timing.loadEventEnd -
                  timing.loadEventStart)    + "\n"
        );
    }
}
</pre>


<div class="_test">
【
利用中のブラウザで、この~script（に等価な処理）を
<button type="button" onclick="test1()">試みる</button>
】
<pre id="_test_output">（結果は console.log ではなく，ここに表示される）</pre>
</div>

	</div>

	</section>

	<section id="conformance">
<h2 title="Conformance">2. 適合性</h2>

<p class="trans-note">【
この節の内容は
<a href="w3c-common-ja.html#conformance">W3C 日本語訳 共通ページ</a>
に委譲
】</p>
<!-- 
As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.

The key words MAY, MUST, MUST NOT, and SHOULD are to be interpreted as described in [RFC2119].

Requirements phrased in the imperative as part of algorithms (such as "strip any leading space characters" or "return false and abort these steps") are to be interpreted with the meaning of the key word ("MUST", "SHOULD", "MAY", etc) used in introducing the algorithm.

Some conformance requirements are phrased as requirements on attributes, methods or objects. Such requirements are to be interpreted as requirements on user agents.

Conformance requirements phrased as algorithms or specific steps MAY be implemented in any manner, so long as the end result is equivalent. (In particular, the algorithms defined in this specification are intended to be easy to follow, and not intended to be performant.)

The IDL fragments in this specification must be interpreted as required for conforming IDL fragments, as described in the Web IDL specification. [WebIDL]
-->

	</section>
	<section id="terminology">
<h2 title="Terminology">3. 各種用語</h2>

<p class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#terminology">W3C 日本語訳 共通ページ</a>,
次の下位節に委譲
】
◎
The construction "a Foo object", where Foo is actually an interface, is sometimes used instead of the more accurate "an object implementing the interface Foo.
◎
The term "navigation" refers to the act of navigating.
◎
The term current document refers to the document associated with the Window object's newest Document object.
◎
The term JavaScript is used to refer to ECMA262, rather than the official term ECMAScript, since the term JavaScript is more widely known. [ECMASCRIPT]
</p>


<p id="_measured-since">
この仕様を通して、時刻は 文書の~navigationの開始を起点としてミリ秒~単位で計測されるものとする。
例えば，文書の~navigationの開始は、時刻 0 で生じる。
語 “<i>〜の時刻</i>” は、文書の~navigationの開始から その時点までに経過した，ミリ秒数による時刻を指す。
この，時刻の定義は、 `HR-TIME-2$r による。
◎
Throughout this work, all time values are measured in milliseconds since the start of navigation of the document. For example, the start of navigation of the document occurs at time 0. The term current time refers to the number of milliseconds since the start of navigation of the document until the current moment in time. This definition of time is based on [HR-TIME-2] specification.
</p>


		<section id="_conventions">
<h3 class="trans-note">【3.1. 日本語訳に固有の表記規約】</h3>
<p>
簡潔に記すため、次の非公式な用語を導入する：
</p>

<ul>
	<li>
`~redirect等@
とは、
HTTP ~redirectまたは（他の~protocolにおける）
<a href="~HTML50/infrastructure.html#concept-http-equivalent-codes">それに等価なもの</a>
を指す総称である。
</li>

	<li>
`GET 等@
とは、 HTTP GET または（他の~protocolにおける）
<a href="~HTML50/infrastructure.html#concept-http-equivalent-get">それに等価なもの</a>
を指す総称である。
</li>

	<li>
<p>
`時刻値@
（もしくは
`所要時間@
）とは、何らかの時刻（もしくは時間~差）を表現する
`DOMHighResTimeStamp$I 型の~instanceを意味する。
</p>

<p>
“`時刻値$ ~zero”
という表記は，値~zeroをとる`時刻値$を意味する。
また、
“〜した時刻値（〜の時刻値）”,
という表記は，
“〜した時刻（〜の時刻）を表現する`時刻値$”
の略記である。
</p>

	</li>

</ul>



<p>
以下の用語も、他の仕様にて定義される：
</p>



<table>
<thead><tr><th>用語
</th><th>参照先
</th><th>仕様
</th></tr></thead>

<tbody><tr><th>`DOMHighResTimeStamp@I
</th><td>
`DOMHighResTimeStamp$x
</td><td>`HR-TIME-2$r

</td></tr><tr><th>`処理能~entry~buffer@
</th><td>
`performance entry buffer$x
</td><td>`PERFORMANCE-TIMELINE-2$r

</td></tr><tr><th>`~navigation@（ページ遷移の動作）
</th><td>`act of navigating$x
</td><td>`HTML5$r

</td></tr><tr><th>`現在の文書@
</th><td>`Window object’s newest Document object$x
</td><td>`HTML5$r

</td></tr><tr><th>`~fetching@
</th><td>`fetching process$x
</td><td>`HTML5$r

</td></tr><tr><th>`閲覧文脈@
</th><td>`browsing context$x
</td><td>`HTML5$r

</td></tr><tr><th>`関連の~app~cache@
</th><td>`relevant application cache$x
</td><td>`HTML5$r

</td></tr><tr><th>`文書の現在の準備度@
</th><td>`current document readiness$x
</td><td>`HTML5$r

</td></tr><tr><th>`interactive@l
</th><td>`"interactive"$x
</td><td>`HTML5$r

</td></tr><tr><th>`complete@l
</th><td>`"complete"$x
</td><td>`HTML5$r

</td></tr><tr><th>`履歴の辿り@
</th><td>`history traversal$x
</td><td>`HTML5$r

</td></tr><tr><th>`DOMContentLoaded@ev ~event
</th><td>`DOMContentLoaded event$x
</td><td>`HTML5$r

</td></tr><tr><th>`location.reload()@m
</th><td>`location.reload()$x
</td><td>`HTML5$r


</td></tr><tr><th>`緩い同一生成元~policy@
</th><td>`relaxed same origin policy$x
</td><td>`HTML5$r

</td></tr><tr><th>`文書の~unloadを拒否した@
</th><td>`refuses to allow the document to be unloaded$x
</td><td>`HTML5$r

</td></tr><tr><th>`refresh pragma 指令@
</th><td>`refresh pragma directive$x
</td><td>`HTML5$r

</td></tr><tr><th>`meta refresh@
</th><td>`meta refresh$x
</td><td>`HTML5$r

</td></tr><tr><th>`unload@ev ~event
</th><td>`unload event$x
</td><td>`HTML5$r

</td></tr><tr><th>`閲覧文脈~sandbox化( ~navigation )~flag@
</th><td>`sandboxed navigation browsing context flag$x
</td><td>`HTML5$r

</td></tr><tr><th>`閲覧文脈~sandbox化( ~top-level~navigation )~flag@
</th><td>`sandboxed top-level navigation browsing context flag$x
</td><td>`HTML5$r

</td></tr><tr><th>`素片識別子により生じた@
</th><td>`caused by fragment identifiers$x
</td><td>`HTML5$r

</td></tr><tr><th>`生成元@
</th><td>`origin$x
</td><td>`RFC6454$r

</td></tr><tr><th>`同一生成元@
</th><td>`same origin$x
</td><td>`RFC6454$r

</td></tr><tr><th>`持続的~接続@
</th><td>`persistent connection$x
</td><td>`RFC7230$r

</td></tr><tr><th>`非同期に閉じられ@
</th><td>`asynchronously closed$x
</td><td>`RFC7230$r

</td></tr><tr><th>`事前具現化-@
</th><td>`prerender$x
</td><td>`RESOURCE-HINTS$r

</td></tr><tr><th>`作動中の~service-worker登録@
</th><td>`active service worker registration$x
</td><td>`SERVICE-WORKERS$r

</td></tr><tr><th>`~service-worker登録@
</th><td>`service worker registration$x
</td><td>`SERVICE-WORKERS$r

</td></tr><tr><th>`作動中の~worker@
</th><td>`active worker$x
</td><td>`SERVICE-WORKERS$r

</td></tr><tr><th>`名前~fetch_evの~eventを発火@
</th><td>`fire an event named fetch$x
</td><td>`SERVICE-WORKERS$r

</td></tr><tr><th>`~workerを走らせ@る
</th><td>`run a worker$x
</td><td>`SERVICE-WORKERS$r

</td></tr></tbody></table>

<!--%用語
</td></tr><tr><th><dfn id="XXXXX">XXXXX</dfn>
</th><td><a href="XXXXX">XXXXX</a>
</td><td><a>[XXXXX]</a>


</td></tr><tr><th><dfn id="XXXXX">$1</dfn>
</th><td><a href="$2">$1</a>
</td><td><a>[XXXXX]</a>

-->

		</section>
	</section>

	<section id="sec-navigation-timing">
<h2 title="Navigation Timing">4. ~navigationの計時</h2>

		<section id="performanceentry">
<h3 title="Relation with the PerformanceEntry interface">4.1. `PerformanceEntry^I ~interfaceとの関係</h3>

<p>
`PerformanceNavigationTiming$I ~interfaceは、
`PERFORMANCE-TIMELINE-2$r
に関与し， `PerformanceEntry$I ~interfaceの以下の属性を拡張する：
◎
The PerformanceNavigationTiming interface participates in the [PERFORMANCE-TIMELINE-2] and extends the following attributes of the PerformanceEntry interface:
</p>

<dl class="attributes">
	<dt>`name@m</dt>
	<dd>
`DOMString^I 値 `document^l を返さなければ~MUST。
◎
The name attribute MUST return the DOMString "document".
</dd>

	<dt>`entryType@m</dt>
	<dd>
`DOMString^I 値 `navigation^l を返さなければ~MUST。
◎
The entryType attribute MUST return the DOMString "navigation".
</dd>

	<dt>`startTime@m</dt>
	<dd>
`時刻値$ ~zeroを返さなければ~MUST。
◎
The startTime attribute MUST return a DOMHighResTimeStamp with a time value of 0. [HR-TIME-2]
</dd>

	<dt>`duration@m</dt>
	<dd>
`startTime$m
から
`loadEventEnd$m
までの`所要時間$を返さなければ~MUST。
<!-- ,~respectively ？-->
◎
The duration attribute MUST return a DOMHighResTimeStamp equal to the difference between loadEventEnd and startTime, respectively.
</dd>

</dl>


		</section>
		<section id="PerformanceResourceTiming">
<h3 title="Relation with the PerformanceResourceTiming interface">4.2. `PerformanceResourceTiming^I ~interfaceとの関係</h3>

<p>
`現在の文書$ 資源のみが、関連の文脈の Performance Timeline における
<em>唯一の</em> `PerformanceNavigationTiming$I ~objとして
含められる。
◎
Only the current document resource gets included as the only PerformanceNavigationTiming object in the Performance Timeline of the relevant context.
</p>

<p>
`PerformanceNavigationTiming$I ~interfaceは、
`PerformanceResourceTiming$I ~interfaceの次の属性を拡張する：
◎
The PerformanceNavigationTiming interface extends the following attributes of the PerformanceResourceTiming interface.
</p>

<dl class="attributes">
	<dt>`initiatorType@m</dt>
	<dd>
被取得時には、空文字列を返さ~MUST。
◎
The initiatorType attribute MUST return the empty DOMString "".
</dd>
	<dd class="note">編集者注記：
これは `navigation^l の様な，何か他の値を返すべきか？
◎
Should it return something else, like "navigation"?
</dd>

	<dt>`workerStart@m</dt>
	<dd>
被取得時には、`現在の文書$に `作動中の~service-worker登録$がある場合
— すなわち，［
要請を~serviceするために `~workerを走らせ$ることが要求されている, または
そのような~workerは すでに可用である場合 —
~UAが［
`作動中の~worker$に向けて，`名前~fetch_evの~eventを発火$する／した
］直前の`時刻値$を返さ~MUST。
他の場合（`作動中の~worker$はない）、~zeroを返さ~MUST。
◎
If the current document has an active service worker registration ([SERVICE-WORKERS]), the workerStart attribute MUST return the time immediately before the user agent ran the worker required to service the request, or if the worker was already available, the time immediately before the user agent fired an event named `fetch` at the active worker. Otherwise, if there is no active worker this attribute MUST return zero.
</dd>

</dl>

		</section>
		<section id="sec-PerformanceNavigationTiming">
<h3 title="The PerformanceNavigationTiming interface">4.3. `PerformanceNavigationTiming^I ~interface</h3>

<p class="note">
HTTP cache `RFC7234$r を検査して，そこから内容を検索取得することは、`~fetching$の一部である。
それは、［
`requestStart$m, `responseStart$m, `responseEnd$m
］属性が受け持つ。
◎
Checking and retrieving contents from the HTTP cache [RFC7234] is part of the fetching process. It's covered by the requestStart, responseStart and responseEnd attributes.
</p>


<pre class="idl" id="_PT">interface `PerformanceNavigationTiming@I : `PerformanceResourceTiming$I {
    readonly    attribute `DOMHighResTimeStamp$I `unloadEventStart$m;
    readonly    attribute `DOMHighResTimeStamp$I `unloadEventEnd$m;
    readonly    attribute `DOMHighResTimeStamp$I `domInteractive$m;
    readonly    attribute `DOMHighResTimeStamp$I `domContentLoadedEventStart$m;
    readonly    attribute `DOMHighResTimeStamp$I `domContentLoadedEventEnd$m;
    readonly    attribute `DOMHighResTimeStamp$I `domComplete$m;
    readonly    attribute `DOMHighResTimeStamp$I `loadEventStart$m;
    readonly    attribute `DOMHighResTimeStamp$I `loadEventEnd$m;

    readonly    attribute `NavigationType$I      `type$m;
    readonly    attribute unsigned short      `redirectCount$m;
    serializer = {inherit, attribute};
};
</pre>



<dl class="attributes">

	<dt>`unloadEventStart@m</dt>
	<dd>
<p>
被取得時には、次を返さ~MUST：
</p>
<ul>
	<li>
前の文書が存在しない，または前の文書が`現在の文書$と`同一生成元$でない場合、`時刻値$ ~zero
</li>
	<li>
他の場合、~UAが［
前の文書の `unload$ev ~eventを開始する
］直前の`時刻値$
</li>
</ul>

◎
If the previous document and the current document have the same origin [RFC6454], the unloadEventStart attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent starts the unload event of the previous document. If there is no previous document or the previous document has a different origin than the current document, this attribute MUST return a DOMHighResTimeStamp with a time value equal to zero.
</dd>


	<dt>`unloadEventEnd@m</dt>
	<dd>
<p>
被取得時には、次を返さ~MUST：
</p>
<ul>
	<li>
前の文書が存在しない，または前の文書が`現在の文書$と`同一生成元$でない場合、`時刻値$ ~zero
</li>
	<li>
他の場合、~UAが［
前の文書の `unload$ev ~eventを終了した
］直後の`時刻値$
</li>
</ul>

◎
If the previous document and the current document have the same origin, the unloadEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately after the user agent finishes the unload event of the previous document. If there is no previous document or the previous document has a different origin than the current document or the unload is not yet completed, this attribute MUST return a DOMHighResTimeStamp with a time value equal to zero.
</dd>
	<dd>
~navigationの際に`~redirect等$があって, かつ その中に`同一生成元$でない`~redirect等$がある場合、
`unloadEventStart$m, `unloadEventEnd$m
はいずれも，`時刻値$ ~zeroを返さなければ~MUST。
◎
If there are HTTP redirects or equivalent when navigating and not all the redirects or equivalent are from the same origin, both unloadEventStart and unloadEventEnd MUST return a DOMHighResTimeStamp with a time value equal to zero.
</dd>


	<dt>`domInteractive@m</dt>
	<dd>
被取得時には、~UAが［
`現在の文書$の`準備度$を `interactive$l に設定する
］直前の`時刻値$を返さなければ~MUST。
◎
The domInteractive attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent sets the current document readiness of the current document to "interactive" [HTML5].
</dd>


	<dt>`domContentLoadedEventStart@m</dt>
	<dd>
被取得時には、~UAが［
`現在の文書$に向けて `DOMContentLoaded$ev ~eventを発火する
］直前の`時刻値$を返さなければ~MUST。
◎
The domContentLoadedEventStart attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent fires the DOMContentLoaded event at the current document.
</dd>


	<dt>`domContentLoadedEventEnd@m</dt>
	<dd>
被取得時には、~UAが［
`現在の文書$の `DOMContentLoaded$ev ~eventが完了した
］直後の`時刻値$を返さなければ~MUST。
◎
The domContentLoadedEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately after the current document's DOMContentLoaded event completes.
</dd>


	<dt>`domComplete@m</dt>
	<dd>
被取得時には、~UAが［
`現在の文書$の`準備度$を `complete$l に設定する
］直前の`時刻値$を返さなければ~MUST。
`HTML5$r
◎
The domComplete attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent sets the current document readiness of the current document to "complete" [HTML5].
</dd>
	<dd>
`文書の現在の準備度$が複数回にわたり同じ状態に変化した場合、［
`domInteractive$m ／
`domContentLoadedEventStart$m ／
`domContentLoadedEventEnd$m ／
`domComplete$m
］は、［
最初に生じた `文書の現在の準備度$の変化
］に対応している`時刻値$を返さなければ~MUST。
◎
If the current document readiness changes to the same state multiple times, domInteractive, domContentLoadedEventStart, domContentLoadedEventEnd and domComplete MUST return a DOMHighResTimeStamp with a time value equal to the time of the first occurrence of the corresponding document readiness change [HTML5].
</dd>


	<dt>`loadEventStart@m</dt>
	<dd>
<p>
被取得時には、［
`現在の文書$に向けて， `load^ev ~eventが発火されたかどうか
］に応じて、次を返さなければ~MUST：
</p>

<ul ><li>まだ発火されていないならば、`時刻値$ ~zero
</li><li>すでに発火されたならば、その直前の`時刻値$
</li></ul>

◎
The loadEventStart attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the load event of the current document is fired. It MUST return a DOMHighResTimeStamp with a time value equal to zero when the load event is not fired yet.
</dd>


	<dt>`loadEventEnd@m</dt>
	<dd>
<p>
被取得時には、［
`現在の文書$に向けて， `load^ev ~eventが発火され，完了したかどうか
］に応じて、次を返さなければ~MUST：
</p>

<ul><li>まだ完了していないならば、`時刻値$ ~zero
</li><li>すでに完了したならば、その`時刻値$
</li></ul>

◎
The loadEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time when the load event of the current document is completed. It MUST return a DOMHighResTimeStamp with a time value equal to zero when the load event is not fired or is not completed.
</dd>

	<dt>`type@m</dt>
	<dd>
被取得時には、現在の閲覧文脈における，最後の非~redirect`~navigation$の種別を表す `DOMString^I 値 を返さなければ~MUST。
それは、いずれかの `NavigationType$I 値でなければ~MUST。
◎
The type attribute MUST return a DOMString describing the type of the last non-redirect navigation in the current browsing context. It MUST have one of the NavigationType values.
</dd>

<dd class="note">注記：
`refresh pragma 指令$
を利用する類いの，~client側~redirectは、この仕様においては`~redirect等$とは見なされない。
その場合の `type$m 属性は、
現在の~pageを~reloadしている場合は `reload$l ／
新たな URL への~navigationの場合は `navigate$l
など，適切な値を返す~SHOULDである。
◎
Client-side redirects, such as those using the Refresh pragma directive, are not considered HTTP redirects or equivalent by this spec. In those cases, the type attribute SHOULD return appropriate value, such as reload if reloading the current page, or navigate if navigating to a new URL.
</dd>

	<dt>`redirectCount@m</dt>
	<dd>
被取得時には、現在の`閲覧文脈$の下での，最後の非~redirect~navigationからの~redirect回数を返さなければ~MUST。
そのような~redirectは無い, または 行先の文書と`同一生成元$でない~redirectがある場合、~zeroを返さなければ~MUST。
◎
The redirectCount attribute MUST return the number of redirects since the last non-redirect navigation under the current browsing context. If there is no redirect or there is any redirect that is not from the same origin [RFC6454] as the destination document, this attribute MUST return zero.
</dd>

</dl>


			<section id="sec-performance-navigation-types">
<h4 title="Navigation types">4.3.1 ~navigation種別</h4>

<pre class="idl">
enum `NavigationType@I {
    `navigate$l,
    `reload$l,
    `back_forward$l,
    `prerender$l
};</pre>


<p>
各種 値は以下の定義に従う：
◎
The values are defined as follows:
</p>

<dl class="_PN">
	<dt>`navigate@l</dt>
	<dd>
~navigationが［
~link-click,
~UAの~address-barへの URL 入力,
~form-submission,
［
下に挙げる `reload$l や `back_forward$l
に利用されるもの以外の，~script演算を通した初期化
］］により開始された。
◎
Navigation started by clicking on a link, or entering the URL in the user agent's address bar, or form submission, or initializing through a script operation other than the ones used by reload and back_forward as listed below.
</dd>

	<dt>`reload@l</dt>
	<dd>
~reload演算または
`location.reload()$m
~methodによる~navigation。
◎
Navigation through the reload operation or the location.reload() method.
</dd>

	<dt>`back_forward@l</dt>
	<dd>
`履歴の辿り$による~navigation。
◎
Navigation through a history traversal operation.
</dd>

	<dt>`prerender@l</dt>

	<dd>
`事前具現化-$させる~hintにより生じた~navigation。
◎
Navigation initiated by a prerender hint [RESOURCE-HINTS].
</dd>

</dl>
			</section>
		</section>
	</section>

	<section id="process">
<h3 title="Process">5. 処理</h3>

		<section id="processing-model">
<h3 title="Processing Model">5.1. 処理~model</h3>

<figure style="overflow:auto;">
<!-- 
id="fig-this-figure-illustrates-the-timing-attributes-defined-by-the-performancenavigationtiming-interface.-attributes-in-parenthesis-may-not-be-available-in-navigation-involving-documents-from-different-origins.-user-agents-may-perform-internal-processing-in-between-timings-which-allow-for-non-normative-intervals-between-timings.x"
-->
<figcaption>
<b>図 1.</b>
次の図式は、
`PerformanceNavigationTiming$I
~interfaceにて定義される計時~属性を示すものである。
括弧内の属性は、`同一生成元$でない文書を孕む~navigationでは可用でない。
~UAは、非標準の時区間を許容するために，２つの計時の合間に内部~処理を行っても~MAY。
◎
Fig. 1 This figure illustrates the timing attributes defined by the PerformanceNavigationTiming interface. Attributes in parenthesis may not be available in navigation involving documents from different origins. User agents may perform internal processing in between timings, which allow for non-normative intervals between timings.
</figcaption>

<svg xmlns="http://www.w3.org/2000/svg" width="942" height="501" style="display:block;margin:auto">
	<defs>
<marker refX="0" refY="0" orient="auto" id="Arrow2Mend" style="overflow:visible">
	<path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" transform="scale(-0.6,-0.6)" id="path4234" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"></path>
</marker>
	</defs>
	<style type="text/css">
path { fill:none;stroke:#000080;stroke-width:1.5;stroke-opacity:1;stroke-dasharray:none;marker-end:url(#Arrow2Mend); }
rect { fill:#00ffff;fill-opacity:1;stroke:#0000ff;stroke-width:2; }
text { font-size:12px;font-weight: bold;text-align:center;fill:#000000;fill-opacity:1;stroke:none;font-family:monospace; }
.middle { text-anchor:middle; }
.end { text-anchor:end; }
.highlight { font-style: italic; }
	</style>
<g transform="translate(-4.3,-477.125)">
<rect width="70" height="80" x="100" y="702"></rect>
<rect width="59.999966" height="79.999962" x="880" y="702"></rect>
<rect width="210" height="80" x="660" y="702"></rect>
<rect width="90" height="80" x="560" y="702"></rect>
<rect width="90" height="80" x="470" y="702"></rect>
<rect width="60" height="80" x="400" y="702"></rect>
<rect width="50" height="80" x="340" y="702"></rect>
<rect width="60" height="80" x="270" y="702"></rect>
<rect width="80" height="80" x="180" y="702"></rect>
<rect width="160" height="50" x="690" y="762"></rect>
<rect width="80" height="50" x="200" y="762"></rect>
<text class="middle"><tspan x="135.28711" y="729">Prompt</tspan><tspan x="135.28711" y="747">for</tspan><tspan x="135.28711" y="764">unload</tspan></text>
<text x="219.94189" y="747.12683" class="middle"><tspan>redirect</tspan></text>
<text class="middle"><tspan x="299.95557" y="738">App</tspan><tspan x="300" y="755.7572">cache</tspan></text>
<text x="365.25977" y="745" class="middle"><tspan>DNS</tspan></text>
<text x="430.0376" y="745" class="middle"><tspan>TCP</tspan></text>
<text x="514.8667" y="745" class="middle"><tspan>Request</tspan></text>
<text x="605.0752" y="745" class="middle"><tspan>Response</tspan></text>
<text x="765.01025" y="745" class="middle"><tspan>Processing</tspan></text>
<text x="909.77441" y="745" class="middle"><tspan>load</tspan></text>
<text x="769.86328" y="792" class="middle"><tspan>DOMContentLoaded</tspan></text>
<text x="239.97607" y="792.12683" class="middle"><tspan>unload</tspan></text>
<text x="490" y="532" class="highlight"><tspan>startTime</tspan></text>
<text x="490" y="552.60315" class="highlight"><tspan>redirectStart</tspan></text>
<text x="490" y="593.08502"><tspan>fetchStart</tspan></text>
<text x="490" y="572.84412" class="highlight"><tspan>redirectEnd</tspan></text>
<text x="490" y="613.32599"><tspan>domainLookupStart</tspan></text>
<text x="490" y="633.56696"><tspan>domainLookupEnd</tspan></text>
<text x="490" y="653.56866"><tspan>connectStart</tspan></text>
<text x="490" y="674.04889"><tspan>secureConnectionStart</tspan></text>
<text x="490" y="694.28986"><tspan>connectEnd</tspan></text>
<text x="440.20801" y="812" class="end"><tspan>requestStart</tspan></text>
<text x="440.20801" y="838.98895" class="end"><tspan>responseStart</tspan></text>
<text x="440.20801" y="865.85504" class="end"><tspan>responseEnd</tspan></text>
<text x="858.44238" y="952" class="end"><tspan>domComplete</tspan></text>
<text x="852.79004" y="612" class="end"><tspan>loadEventEnd</tspan></text>
<text x="852.79004" y="644.65131" class="end"><tspan>loadEventStart</tspan></text>
<text x="439.83203" y="919.10858" class="end"><tspan>domInteractive</tspan></text>
<text x="439.83203" y="945.73541" class="end"><tspan>domContentLoadedEventStart</tspan></text>
<text x="439.83203" y="972" class="end"><tspan>domContentLoadedEventEnd</tspan></text>
<text x="144.81705" y="846" class="end highlight"><tspan>unloadEventStart</tspan></text>
<text x="143.46094" y="872" class="end highlight"><tspan>unloadEventEnd</tspan></text>
<path d="m 480,532 -280,0 -30,170"></path>
<path d="m 480,552 -270,0 -30,150"></path>
<path d="m 480,572 -200,0 -20,130"></path>
<path d="m 480,592 -180,0 -30,110"></path>
<path d="m 480,612 -110,0 -30,90"></path>
<path d="m 480,632 -70,0 -20,70"></path>
<path d="m 480,652 -50,0 -30,50"></path>
<path d="m 480,672 -40,0 -20,30"></path>
<path d="m 480,692 -10,0 -10,10"></path>
<path d="m 450,812 10,0 10,-30"></path>
<path d="m 450,832 50,0 60,-50"></path>
<path d="m 450,862 100,0 100,-80"></path>
<path d="m 450,922 150,0 80,-120"></path>
<path d="m 450,942 190,0 50,-130"></path>
<path d="m 450,972 220,0 180,-160"></path>
<path d="m 870,952 50,0 -60,-160"></path>
<path d="m 860,642 10,0 10,60"></path>
<path d="m 860,612 40,0 40,90"></path>
<path d="m 150,842 30,0 20,-30"></path>
<path d="m 150,872 80,0 50,-60"></path>
</g>
</svg></figure>

<ol>
<li>
<p>
`~navigation$が次の事由で中止された場合、この手続きを中止する。
◎
If the navigation is aborted for any of the following reasons, abort these steps.
</p>

		<ul>
			<li>
~navigationは
`閲覧文脈~sandbox化( ~navigation )~flag$
または
`閲覧文脈~sandbox化( ~top-level~navigation )~flag$
により中止されたか,
または~~既存の`閲覧文脈$への~navigationの試みがある。
◎
The navigation is aborted due to the sandboxed navigation browsing context flag or the sandboxed top-level navigation browsing context flag, or a preexist attempt to navigate the browsing context.
</li>
			<li>
~navigationが~page内の`素片識別子により生じた$。
◎
The navigation is caused by fragment identifiers within the page.
</li>
			<li>
新たな資源が何らかの種類の~inline内容により処理されている。
◎
The new resource is to be handled by some sort of inline content.
</li>
			<li>
新たな資源が`閲覧文脈$に影響しない仕組みを利用して処理されている。
◎
The new resource is to be handled using a mechanism that does not affect the browsing context.
</li>
			<li>
利用者が`文書の~unloadを拒否した$。
◎
The user refuses to allow the document to be unloaded.
</li>
		</ul>
	</li>


	<li>
`~objの作成-@：
<p>
各種~属性が次の様に設定された，新たな `PerformanceNavigationTiming$I ~objを作成する：
◎
Create a new PerformanceNavigationTiming object.
</p>
		<ul>
			<li>
`name$m ← `DOMString^I 値 `document^l
◎
Set name to the DOMString "document".
</li>

			<li>
`entryType$m ← `DOMString^I 値 `navigation^l
◎
Set entryType to the DOMString "navigation".
</li>

			<li>
`startTime$m ← `時刻値$ ~zero
◎
Set startTime to a DOMHighResTimeStamp with a time value of zero, and nextHopProtocol to the empty DOMString.
</li>
			<li>
`nextHopProtocol$m ← 空 `DOMString^I
◎
↑</li>
		</ul>
	</li>


	<li>
<p>
現在の~navigation種別がまだ設定されていない場合、それを
`type$m
に記録する：
◎
Record the current navigation type in type if it has not been set:
</p>
		<ol style="list-style-type:lower-alpha;">
			<li>
次のいずれか［
~link-click,
~UAの~address-barへの URL 入力,
~form-submission,
`location.reload()$m
~method以外の~script演算を通した初期化
］により，~navigationが開始された場合の~navigation種別は、
`DOMString^I 値 `navigate$l 。
◎
If the navigation was started by clicking on a link, or entering the URL in the user agent's address bar, or form submission, or initializing through a script operation other than the location.reload() method, let the navigation type be the DOMString "navigate".
</li>
			<li>
［
`meta refresh$
の結果, または
`location.reload()$m
~method
］または他の等価な動作により，~navigationが開始された場合の~navigation種別は、
`DOMString^I 値 `reload$l 。
◎
If the navigation was started either as a result of a meta refresh, or the location.reload() method, or other equivalent actions, let the navigation type be the DOMString "reload".
</li>
			<li>
`履歴の辿り$の結果，~navigationが開始された場合の~navigation種別は、
`DOMString^I 値 `back_forward$l 。
◎
If the navigation was started as a result of history traversal, let the navigation type be the DOMString "back_forward".
</li>
		</ol>
	</li>

	<li>
`現在の文書$と前の文書が`同一生成元$でない場合、
`unloadEventStart$m
と
`unloadEventEnd$m
を 0 にして，`~fetch開始$段へ進む。
他の場合、 `unload$ev ~eventの直前の時刻を
`unloadEventStart$m
に記録する。
◎
If the current document and the previous document are from different origins, set both unloadEventStart and unloadEventEnd to 0 then go to step 9. Otherwise, record unloadEventStart as the time immediately before the unload event.
</li>

	<li>
<p>
`unload$ev ~eventが完了した直後の時刻を
`unloadEventEnd$m
に記録する。
</p>

<p>
次を `workerStart$m に記録する：
</p>
		<ul>
			<li>
<p>
~navigation URL に合致する `~service-worker登録$がある場合：
</p>
				<ul>
					<li>
その worker がすでに可用である場合：
~UAがその `作動中の~worker$ に向けて，`名前~fetch_evの~eventを発火$した直前の時刻。
</li>
					<li>
~UAが，その `~workerを走らせ$た直前の時刻。
</li>
				</ul>
			</li>

			<li>
他の場合：
~zero
</li>
		</ul>

◎
Immediately after the unload event is completed, record the current time as unloadEventEnd. If the navigation URL has an active worker registration, immediately before the user agent runs the worker record the time as workerStart, or if the worker is available, record the time before the event named `fetch` is fired at the active worker. Otherwise, if the navigation URL has no matching service worker registration, set workerStart value to zero.

	</li>
	<li><!-- step 9 -->
`~fetch開始@：
<p>
`GET 等$
により，新たな資源の~fetchが行われた場合、~UAは`関連の~app~cache$を検査する直前の時刻を
`fetchStart$m
に記録する。
他の場合、~UAは資源の`~fetching$を開始する直前に現在の時刻を
`fetchStart$m
に記録する。
◎
If the new resource is to be fetched using HTTP GET or equivalent, immediately before a user agent checks with the relevant application caches, record the current time as fetchStart. Otherwise, immediately before a user agent starts the fetching process, record the current time as fetchStart.
</p></li>

	<li>
`domainLookupStart$m,
`domainLookupEnd$m,
`connectStart$m,
`connectEnd$m
を
`fetchStart$m
と同じ値にする。
◎
Let domainLookupStart, domainLookupEnd, connectStart and connectEnd be the same value as fetchStart.
</li>

<li>
資源が（
<a href="~IETF/rfc7234">HTTP cache</a>
`RFC7234$r
も含めた）`関連の~app~cache$や局所~資源から~fetchされる場合、
`要請~開始$段へ進む。
◎
If the resource is fetched from the relevant application cache or local resources, including the HTTP cache [RFC7234], go to step 16.
</li>

	<li>
~domain検索が要求されていない場合、
`接続-開始$段へ進む。
他の場合、
~UAが~domain名~検索を開始する直前の時刻を
`domainLookupStart$m
に記録する。
◎
If no domain lookup is required, go to step 14. Otherwise, immediately before a user agent starts the domain name lookup, record the time as domainLookupStart.
</li>

	<li>
~domain名~検索に成功した場合、その直後の時刻を
`domainLookupEnd$m
に記録する。
~UAはその前に複数回の再試行が必要になり得る。
~domain検索に失敗した場合、残りの手続きを中止する。
◎
Record the time as domainLookupEnd immediately after the domain name lookup is successfully done. A user agent MAY need multiple retries before that. If the domain lookup fails, abort the rest of the steps.
</li>

	<li>
`接続-開始@：
<p>
資源の~fetchに持続的~transport接続が利用されている場合、
`connectStart$m
と
`connectEnd$m
を
`domainLookupEnd$m
と同じ値にする。
他の場合、~serverへ接続し始める直前の時刻を
`connectStart$m
に記録し，~serverまたは~proxyへの接続が確立された直後の時刻を
`connectEnd$m
に記録する。
~UAはその前に複数回の再試行が必要になり得る。
接続が確立されたなら、
`nextHopProtocol$m の値を接続に利用される `ALPN Protocol ID$x にする。
接続が確立できなかった場合、残りの手続きを中止する。
◎
If a persistent transport connection is used to fetch the resource, let connectStart and connectEnd be the same value of domainLookupEnd. Otherwise, record the time as connectStart immediately before initiating the connection to the server and record the time as connectEnd immediately after the connection to the server or the proxy is established. A user agent MAY need multiple retries before this time. Once connection is established set the value of nextHopProtocol to the ALPN ID used by the connection. If a connection can not be established, abort the rest of the steps.
</p></li>


	<li>
<p>
~UAは、 `secureConnectionStart$m 属性を次の様に設定しなければ~MUST：
◎
A user agent MUST also set the secureConnectionStart attribute as follows:
</p>

		<ol>
			<li>
~secure~transportが利用されている場合、
~UAは，接続を~secureにする~handshake処理-を開始する直前の時刻を
`secureConnectionStart$m
に記録する。
◎
When a secure transport is used, the user agent MUST record the time as secureConnectionStart immediately before the handshake process to secure the connection.
</li>

			<li>
他の場合、~UAは
`secureConnectionStart$m
の値を 0 にする。
◎
When a secure transport is not used, the user agent MUST set the value of secureConnectionStart to 0.
</li>
		</ol>
	</li>

	<li>
`要請~開始@：
<p>
~UAが文書の要請の送信を開始する直前の時刻を
`requestStart$m
に記録する。
◎
Immediately before a user agent starts sending request for the document, record the current time as requestStart.
</p></li>

	<li>
`応答~開始@：
<p>
~UAが応答の最初の~byteを受信した直後の時刻を
`responseStart$m
に記録する。
◎
Record the time as responseStart immediately after the user agent receives the first byte of the response.
</p></li>

	<li>
`応答~終了@：
<p>
~UAが応答の最後の~byteを受信した直後の時刻を
`responseEnd$m
に記録する。
◎
Record the time as responseEnd immediately after receiving the last byte of the response.
</p>

		<ol>
			<li>

<p>
~UAが要請の送信または応答~全体の受信-に失敗し，接続の再~openを要する場合、
`接続-開始$段へ戻る。
◎
Return to step 14 if the user agent fails to send the request or receive the entire response, and needs to reopen the connection.
</p>

<div class="note">
<p>注記：
`持続的~接続$が可能化されているときは、
~UAはまず最初に，要請を送信するための~open接続の再利用を（その接続は`非同期に閉じられ$得るが）試行して~MAY。
そのような場合、
`connectStart$m,
`connectEnd$m,
`requestStart$m
は再~open接続において収集された計時~情報を表現する~SHOULDである。
◎
When persistent connection [RFC7230] is enabled, a user agent MAY first try to re-use an open connect to send the request while the connection can be asynchronously closed. In such case, connectStart, connectEnd and requestStart SHOULD represent timing information collected over the re-open connection.
</p>

</div>
			</li>
			<li>
`transferSize$m,
`encodedBodySize$m,
`decodedBodySize$m
の値を，対応する値に設定する。
◎
Set the value of transferSize, encodedBodySize, decodedBodySize to corresponding values.
</li>
		</ol>
	</li>

	<li>
<p>
資源の~fetchの結果が，`~redirect等$になる場合：
◎
If the fetched resource results in an HTTP redirect or equivalent, then
</p>

		<ol style="list-style-type:lower-alpha;">
			<li>
`現在の文書$と~redirect先の文書が`同一生成元$でない場合、
`redirectStart$m,
`redirectEnd$m,
`unloadEventStart$m,
`unloadEventEnd$m,
`redirectCount$m
を 0 にする。
新たな資源の下に、`~fetch開始$段へ戻る。
◎
if the current document and the document that is redirected to are not from the same origin, set redirectStart, redirectEnd, unloadEventStart, unloadEventEnd and redirectCount to 0. Then, return to step 9 with the new resource.
</li>

			<li>
前の~redirectの中に，他と`同一生成元$でない文書を対象にするものがある場合、
`redirectStart$m,
`redirectEnd$m,
`unloadEventStart$m,
`unloadEventStart$m,
`redirectCount$m
を 0 にする。
新たな資源の下に、`~fetch開始$段へ戻る。
◎
if there is previous redirect involving documents that are not from the same origin, set redirectStart, redirectEnd, unloadEventStart, unloadEventStart and redirectCount to 0. Then, return to step 9 with the new resource.
</li>

			<li>
`redirectCount$m
を 1 増やす。
◎
Increment redirectCount by 1.
</li>

			<li>
`redirectStart$m
の値が 0 の場合、
その値 ←
`fetchStart$m
の値とする。
◎
If the value of redirectStart is 0, let it be the value of fetchStart.
</li>

			<li>
`redirectEnd$m
←
`responseEnd$m
の値。
◎
Let redirectEnd be the value of responseEnd.
</li>

			<li>
<p>
`PerformanceNavigationTiming$I ~obj内の属性を次のように設定する：
</p>
				<ul>
					<li>
`nextHopProtocol$m 属性は空 `DOMString^I にする。
</li>
					<li>
他の属性のうち［
`startTime$m,
`redirectStart$m,
`redirectEnd$m,
`redirectCount$m,
`type$m,
`nextHopProtocol$m,
`unloadEventStart$m,
`unloadEventEnd$m
］を除く，すべての属性は、 0 にする：
</li>
				</ul>

◎
Set all of the attributes in the PerformanceNavigationTiming object to 0 except startTime, redirectStart, redirectEnd, redirectCount, type, nextHopProtocol, unloadEventStart and unloadEventEnd. Set nextHopProtocol to the empty DOMString.
</li>

			<li>
新たな資源の下に、`~fetch開始$段へ戻る。
◎
Return to step 9 with the new resource.
</li>
		</ol>
	</li>
	<li>
~UAが`文書の現在の準備度$を `interactive$l に設定する直前の時刻を
`domInteractive$m
に記録する。
◎
Record the time as domInteractive immediately before the user agent sets the current document readiness to "interactive".
</li>

	<li>
~UAが文書に向けて `DOMContentLoaded$ev ~eventを発火する直前の時刻を
`domContentLoadedEventStart$m
に記録する。
◎
Record the time as domContentLoadedEventStart immediately before the user agent fires the DOMContentLoaded event at the document.
</li>

	<li>
`DOMContentLoaded$ev ~eventが完了した直後の時刻を
`domContentLoadedEventEnd$m
に記録する。
◎
Record the time as domContentLoadedEventEnd immediately after the DOMContentLoaded event completes.
</li>

	<li>
~UAが`文書の現在の準備度$を `complete$l に設定する直前の時刻を
`domComplete$m
に記録する。
◎
Record the time as domComplete immediately before the user agent sets the current document readiness to "complete".
</li>

	<li>
~UAが `load^ev ~eventを発火する直前の時刻を
`loadEventStart$m
に記録する。
◎
Record the time as loadEventStart immediately before the user agent fires the load event.
</li>

	<li>
~UAが `load^ev ~eventを完了した直後の時刻を
`loadEventEnd$m
に記録する。
◎
Record the time as loadEventEnd immediately after the user agent completes the load event.
</li>

	<li>
`duration$m の値を，［
`startTime$m から `loadEventEnd$m まで
］の`所要時間$にする。
<!-- ,~respectively ？-->
◎
Set the duration to a DOMHighResTimeStamp equal to the difference between loadEventEnd and startTime, respectively.
</li>

	<li>
新たな `PerformanceNavigationTiming$I ~objを
<a href="~TIMELINE#dfn-queue-a-performanceentry">待入する</a>
◎
Queue the new PerformanceNavigationTiming object.
</li>

	<li>
新たな `PerformanceNavigationTiming$I ~objを`処理能~entry~buffer$に追加する
◎
Add the new PerformanceNavigationTiming object to the performance entry buffer.
</li>

</ol>


<p>
一部の~UAは、“進む”, “戻る” などの~navigation演算の間，文書の DOM 構造を~memory内に維持する。
そのような~navigationの間に，
`PerformanceNavigationTiming$I
~objに変更が加えられては~MUST。
◎
Some user agents maintain the DOM structure of the document in memory during navigation operations such as forward and backward. In those cases, the PerformanceNavigationTiming object MUST NOT be altered during the navigation. 
</p>

		</section>
	</section>
	<section id="privacy">
<h2 title="Privacy">6. ~privacy</h2>

~INFORMATIVE

		<section id="info_disclosure">
<h3 title="Information disclosure">6.1. 情報の流出</h3>
<p>
注意深く細工された計時~攻撃の利用により、末端利用者による
閲覧／行動
の履歴が流出する可能性がある。
例えば、~unload時刻から前の~pageの~unload~handlerに要した時間が明らかにされ，利用者の~login-statusの推定-に利用され得る。
これらの攻撃は、前の~navigationを含む計時~情報が~accessされる際に`同一生成元$~policyの施行により軽減される。
`RFC6454$r
◎
There is the potential for disclosing an end-user's browsing and activity history by using carefully crafted timing attacks. For instance, the unloading time reveals how long the previous page takes to execute its unload handler, which could be used to infer the user's login status. These attacks have been mitigated by enforcing the same origin policy when timing information involving the previous navigation is accessed. [RFC6454]
</p>

<p>
`緩い同一生成元~policy$は、文書~間に渡る，未承認の訪問に対する十分な保護を提供しない。
共有~hostにおいては、信頼できない第三者が，同じ IP ~addressの異なる~port上で HTTP ~serverを~hostし得る。
◎
The relaxed same origin policy doesn't provide sufficient protection against unauthorized visits across documents. In shared hosting, an untrusted third party is able to host an HTTP server at the same IP address but on a different port.
</p>
		</section>

		<section id="cross-directory">
<h3 title="Cross-directory access">6.2. ~directory間をまたがる~access</h3>
<p>
同じ~host名を共有する異なる~page，例えば 同じ~siteに~hostされている，利用者が生成した内容を伴う, 異なる作者による内容は、~path名に基いて~accessを制約するような特色機能が存在しないため，`同一生成元$から来たものと見なされる。
これらの~page間の~navigationに際しては、後の~pageから，~redirectや `unload$ev ~eventに対する計時など，前の~pageの計時~情報への~accessが可能になる。
◎
Different pages sharing one host name, for example contents from different authors hosted on sites with user generated content are considered from the same origin because there is no feature to restrict the access by pathname. Navigating between these pages allows a latter page to access timing information of the previous one, such as timing regarding redirection and unload event.
</p>

		</section>
	</section>

	<section id="security">
<h2 title="Security">7. ~security</h2>

~INFORMATIVE

<p>
`PerformanceNavigationTiming$I
~interfaceは、`現在の文書$により~loadされる どの資源
— ~web~pageや~workerなど —
に対しても，文書の計時~情報を公開する。
`PerformanceNavigationTiming$I ~interfaceへの~accessを制限するため、`同一生成元$ ~policyが施行される
—
`RESOURCE-TIMING$r の
<a href="~RTiming#cross-origin-resources">非同一生成元の資源 節</a>
に述べられるように、一部の属性は，既定で~zeroに設定される。
資源の提供者は、 `Timing-Allow-Origin$h HTTP 応答~headerを追加することにより、`現在の文書$に対する計時~情報すべてが収集されることを明示的に許容できる
— それは、計時~情報への~accessが許容される~domainを指定する。
◎
The PerformanceNavigationTiming interface exposes timing information for the current document to any resource loaded by the document, such as a web page or a worker. To limit the access to the PerformanceNavigationTiming interface, the same origin policy is enforced by default and certain attributes are set to zero, as described in 4.5 Cross-origin Resources [RESOURCE-TIMING]. Resource providers can explicitly allow all timing information to be collected for a current document by adding the Timing-Allow-Origin HTTP response header, which specifies the domains that are allowed to access the timing information.
</p>



		<section id="authentication">
<h3 title="Detecting proxy servers">7.1. ~proxy~serverの検出法</h3>
<p>
~UAと~web~serverとの間に~proxyが配備されている場合、
`connectStart$m 属性と `connectEnd$m 属性との間の時区間は、 ~web~serverではなく，~proxyと~UAとの間の遅延を示すものになる。
それにより、~web~serverは，~proxyの存在を推定できる可能性がある。
SOCKS ~proxyについては、この時区間には~proxy認証に要した時間と~proxyが~web~serverへの接続に要した時間も含まれ，~proxyの検出を難しくする。
HTTP ~proxyの場合、~UAは~proxy~serverについての知識を一切持たないこともあるので、この攻撃を常に軽減できるとは限らない。
◎
In case a proxy is deployed between the user agent and the web server, the time interval between the connectStart and the connectEnd attributes indicates the delay between the user agent and the proxy instead of the web server. With that, web server can potentially infer the existence of the proxy. For SOCKS proxy, this time interval includes the proxy authentication time and time the proxy takes to connect to the web server, which obfuscate the proxy detection. In case of an HTTP proxy, the user agent might not have any knowledge about the proxy server at all so it's not always feasible to mitigate this attack.
</p>

		</section>
	</section>
	<section id="historical">
<h2 title="Historical">A. 歴史的</h2>

<p>
この節では、以前に
`NAVIGATION-TIMING$r
にて導入された属性, ~interfaceを定義し，旧来目的のため，ここに保つ。
作者には、代わりに
`PerformanceNavigationTiming$I ~interfaceを利用することを勧める。
◎
This section defines attributes and interfaces previously introduced in [NAVIGATION-TIMING] and are kept here for legacy purposes. Authors are advised to use the PerformanceNavigationTiming interface instead.
</p>

<p class="trans-note">【
以下、この節の内容の和訳は
`NAVIGATION-TIMING$r の
<a href="navigation-timing-ja.html#sec-navigation-timing">和訳（ 4 節）</a>
に委譲（ただし、細かい点で一部異なる部分がある（整数~型の属性の型, 定数~値, 直列化子（ serializer ）の追加など）。
】</p>

	</section>

</main></div><!-- MAIN -->

	<section id="acknowledgements">
<h2 title="Acknowledgments">B. 謝辞</h2>

<p>
次の方々による協力に感謝する：
</p>

<p>
We would like to offer our sincere thanks to James Simonsen, Tony Gentilcore, Zhiheng Wang, Karen Anderson and Jason Weber for all their contributions to this work.
</p>

	</section>
	<section id="references" class="appendix">
<h2 title="References">C. 参照文献</h2>

		<section id="normative-references">
<h3 title="Normative References">C.1. 文献（規範）</h3>


<dl>

	<dt>[HR-TIME-2]</dt>
	<dd>Ilya Grigorik; James Simonsen; Jatinder Mann. W3C. High Resolution Time Level 2. 25 February 2016. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/hr-time-2/</dd>

	<dt>[HTML5]</dt>
	<dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Silvia Pfeiffer. W3C. HTML5. 28 October 2014. W3C Recommendation.</dd>
	<dd>http://www.w3.org/TR/html5/</dd>

	<dt>[PERFORMANCE-TIMELINE-2]</dt>
	<dd>Ilya Grigorik. W3C. Performance Timeline Level 2. 21 April 2016. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/performance-timeline-2/</dd>

	<dt>[RESOURCE-HINTS]</dt>
	<dd>Ilya Grigorik. W3C. Resource Hints. 25 February 2016. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/resource-hints/</dd>

	<dt>[RESOURCE-TIMING]</dt>
	<dd>Arvind Jain; Todd Reifsteck; Jatinder Mann; Zhiheng Wang; Anderson Quach. W3C. Resource Timing. 21 April 2016. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/resource-timing/</dd>

	<dt>[RFC2119]</dt>
	<dd>S. Bradner. IETF. Key words for use in RFCs to Indicate Requirement Levels. March 1997. Best Current Practice.</dd>
	<dd>https://tools.ietf.org/html/rfc2119</dd>

	<dt>[RFC2616]</dt>
	<dd>R. Fielding; J. Gettys; J. Mogul; H. Frystyk; L. Masinter; P. Leach; T. Berners-Lee. IETF. Hypertext Transfer Protocol -- HTTP/1.1. June 1999. Draft Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc2616</dd>

	<dt>[RFC6454]</dt>
	<dd>A. Barth. IETF. The Web Origin Concept. December 2011. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc6454</dd>

	<dt>[RFC7230]</dt>
	<dd>R. Fielding, Ed.; J. Reschke, Ed.. IETF. Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing. June 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7230</dd>

	<dt>[SERVICE-WORKERS]</dt>
	<dd>Alex Russell; Jungkee Song; Jake Archibald. W3C. Service Workers. 25 June 2015. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/service-workers/</dd>

	<dt>[WebIDL]</dt>
	<dd>Cameron McCormack; Boris Zbarsky. W3C. WebIDL Level 1. 8 March 2016. W3C Candidate Recommendation.</dd>
	<dd>http://www.w3.org/TR/WebIDL-1/</dd>
</dl>


		</section>
		<section id="informative-references">
<h3 title="Informative References">C.2. 文献（参考）</h3>

<dl>
	<dt>[ECMASCRIPT]</dt>
	<dd>Ecma International. ECMAScript Language Specification.</dd>
	<dd>https://tc39.github.io/ecma262/</dd>

	<dt>[JSMEASURE]</dt>
	<dd>Ramakrishnan Rajamony; Mootaz Elnozahy. Measuring Client-Perceived Response Times on the WWW. March 2001. The Proceedings of the 3rd USENIX Symposium on Internet Technologies and Systems (USITS).</dd>
	<dd>http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.69.7329&amp;rep=rep1&amp;type=pdf</dd>

	<dt>[NAVIGATION-TIMING]</dt>
	<dd>Zhiheng Wang. W3C. Navigation Timing. 17 December 2012. W3C Recommendation.</dd>
	<dd>http://www.w3.org/TR/navigation-timing/</dd>

	<dt>[RFC7234]</dt>
	<dd>R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. IETF. Hypertext Transfer Protocol (HTTP/1.1): Caching. June 2014. Proposed Standard.</dd>
	<dd>https://tools.ietf.org/html/rfc7234</dd>
</dl>

		</section>
	</section>


<!--% DATA SECTION -->

</body>
</html>

