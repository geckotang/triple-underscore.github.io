<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>Navigation Timing 2 （日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />

<script src="common0.js" ></script>
<script src="common1.js" async></script>


<script>
var source_data;

COMMON_DATA.page_state_key = '___TIMING';
COMMON_DATA.init = function(expanded){
	var options = {
//		original_url: 'https://www.w3.org/TR/navigation-timing-2/',
		original_url: 'https://w3c.github.io/navigation-timing/',
		spec_status: 'ED',
		main: 'MAIN',
		fill_text_link: '#_versions > dd',
		ref_data: '.ref_data',
		ref_id_prefix: 'bib-',
//		ref_id_lowercase: true,
	};

	if(expanded) return options;

	source_data = {
		html: E('MAIN').innerHTML,
		link_map: Util.getMapping('_link_map'),
		toc_main: 'MAIN0',
		levels: '英語主体:英語寄り:漢字主体:カナ主体',
		level: 2,
		generate: expand
	};
	Util.switchWordsInit(source_data);

//	Util.del_j(); // checked: 2016-04-22 spec

	return options;
}

function expand(mapping1){

	var class_map = {
		h: 'header',
		e: 'element',
		a: 'attr',
//		l: 'literal',
		et: 'event-type',
		css: 'css',
		tnote: 'trans-note'
	};

	var tag_map = {
		I: 'code',
		m: 'code',
		c: 'code',
		h: 'code',
		e: 'code',
		a: 'code',
		et: 'code',
		st: 'code',
		css: 'code',
//		l: 'code',
		v: 'var',
		i: 'i',
		tnote: 'span'
	};

	var link_map = this.link_map;
	var nesting = '';
	var in_idl = false;
	var idl_ifc = '';

	E('MAIN').innerHTML = Util.replaceWords1(
		this.html.replace(
			/⇒|◎[^<◎]*|%[\w\-~一-鿆]+|`(.+?)([$@\^])(\w*)/g,
			create_html
		),
		mapping1
	);

	function create_html(match, key, indicator, klass){


if(!key) {
	switch(match[0]) {
	case '%':
		return '<var>' + match.slice(1) + '</var>'
	case '⇒':
		nesting += '</span>';
		return '：<span class="block">';
	}//◎
	result = nesting + '<span lang="en">' + match.slice(1) + '</span>';
	nesting = '';
	return result;
}

var text = key;
var href = '';
var classname = class_map[klass];
var tag = tag_map[klass];

switch(klass){
case 'r': // ref
	text = '[' + key + ']';
	href = '#bib-' + key;
	break;
case 'l': // literal
	text = '"<code class="literal">' + text + '</code>"'
	break;
case 'tnote': 
	text = '【' + text + '】';
	break;
}

if(tag) {
	text = '<' + tag + (
		classname ? ' class="' + classname + '"' : ''
	) + '>' + text + '</' + tag + '>';
}


if(indicator !== '^'){
	href = link_map[klass ? (klass + '.' + key) : key] || href;
	if(!href){
		console.log(match); // check error
		return match;
	}

	switch(indicator){
	case '$':
		text = '<a href="' + href + '">' + text + '</a>';
		break;
	case '@':
		text = '<dfn id="' + href.slice(1) + '">' + text + '</dfn>';
		break;
	}
}

return text;


	}
}


</script>

<script>
function test1(){
	var result = '';
	try {
		var timing = performance.getEntriesByType("navigation")[0];
		timing.name; // for error logging
		var T = timing;
		result = [
"Name:       " + T.name,
"Entry Type: " + T.entryType,
"Start Time: " + T.startTime,
"Duration:   " + T.duration,
"Unload:     " + (T.unloadEventEnd - T.unloadEventStart),
"Redirect:   " + (T.redirectEnd - T.redirectStart),
"App Cache:  " + (T.domainLookupStart - T.fetchStart),
"DNS:        " + (T.domainLookupEnd - T.domainLookupStart),
"TCP:        " + (T.connectEnd - T.connectStart),
"Request:    " + (T.responseStart - T.requestStart),
"Response:   " + (T.responseEnd - T.responseStart),
"Processing: " + (T.loadEventStart - T.responseEnd),
"Onload:     " + (T.loadEventEnd - T.loadEventStart)
].join('\n');
	} catch(e){
		result = 'エラー（ ' + e.name + ' ）\n' + e.message;
	}

	E('_test_output').textContent = result;
}
</script>



<!--%置換語 -->
<script type="text/plain" id="words_table1">
RTIMING:resource-timing-ja.html
	https://www.w3.org/TR/resource-timing/
	https://w3c.github.io/resource-timing/
SW:https://www.w3.org/TR/service-workers/
fetch_ev: <code class="event-type">fetch</code> 
</script>
<!-- 
	unload_ev: <code class="event-type">unload</code> 
	load_ev: <code class="event-type">load</code> 
DOMContentLoaded: <code class="event-type">DOMContentLoaded</code> 

-->

<!--%単語 -->
<script type="text/plain" id="words_table">


	●仕様
勧告:Recommendation:~
全部的:full:~
利用者:user:~
仕様:spec:~
仕組み:mechanisms:~
義務:mandatory:~
要件:requirements:~
意図-:intend:~
拡張-:extend:~
拡張:extension:~
	試験的:experimental:~
妥当:valid:~
包括的な:comprehensive:~
定義-:define:~
定義:definition:~
実行-:execute:~
旧来目的:legacy purpose:旧来の目的
出荷済み:shipped:~
	実装-:implement:~
実装:implementation:~
	実装者:implementers:~
表現-:represent:~
要求-:require:~
試み:attempt する:~
試みる:attempt する:~
適切:appropriate:~
許容-:allow:~
制限-:limit:~
新たな:new:~
特色機能:feature:~
重要な:important:~
側面:aspect:~
様相:picture:~
詳細な:detailed:~
事例:case:~
素朴:naive:~
築かれ:build され:~
	encoded body and decode
見なさ:consider さ:~
導入-:introduce:~
影響-:affect:~
UA:user agent:UA
作者:author:~
制約-:restrict:~
施行-:enforce:~
明示的:explicit:~
暗黙的:implicit:~
適合:conforming:~
適合性:conformance:~
非標準:non-normative:~
非推奨:obsolete:~

	●保安
policy:::ポリシー
link-click:link の click::リンクのクリック
login-status:login status::ログイン状態
privacy:::プライバシー
保安的:secure::~:セキュア
保安化-:secure に::~:セキュアに
保安:security::~:セキュリティ
	接頭辞:prefix:~
	推奨-:recommend:~
第三者:third-party:~::サードパーティ
末端利用者:end-user:~
認証:authentication:~
注意深く:careful に:~
細工-:craft:~
保護:protection:~
信頼-:trust:~
推定-:infer:~
提供-:provide:~
提供者:provider:~
未承認の:unauthorized:~
流出-:disclose:~
流出:disclosure:~
訪問:visit:~
軽減-:mitigate:~
配備:deploy:~
攻撃:attack:~
緩い:relaxed:~

	●fetch／network
HTTP:
URL:
load:
unload:
fetch:
fetching:::fetch 処理
reload:::再 load
open:
navi:navigation::ナビ
navigate:::ナビゲート
host:::ホスト
handshake:::ハンドシェイク
cache:::キャッシュ
client:::クライアント
path:::パス
port:::ポート
protocol:::プロトコル
proxy:::プロキシ
redirect:::リダイレクト
server:::サーバ
site:::サイト
transport:::トランスポート
address:::アドレス
domain:::ドメイン
header:::ヘッダ
hop:
network:::ネットワーク
prompt:
資源:resource::~:リソース
要請:request::~:リクエスト
応答:response::~:レスポンス
転送:transfer::~
受信-:receive:~
送信-:send:~
送信:sending:~
持続的:persistent:~
接続:connection::~:コネクション
接続-:connect::~:コネクト
指令:directive::~:ディレクティブ
本体:body::~:ボディ
検索:lookup::~
検索取得-:retrieve::~
検索取得:retrieval::~
素片識別子:fragment:~
生成元:origin::~:オリジン
同一生成元:same origin::~:同一オリジン
非同一生成元:cross-origin::~:クロスオリジン
確立-:establish:~
端点間:end-to-end::~:エンドツーエンド

履歴:history:~
辿り:traversal operation:~
事前具現化-:prerender::事前に具現化:プリレンダー

	●処理能
entry:::エントリ
buffer:::バッファ
処理能:performance::~:パフォーマンス
時系列線:timeline:~
時刻:time:~
起点時刻:time origin:~
時刻値:time 値:~
時区間:time interval:~
時間:time:~
計時:timing:~::タイミング
計測:measure:~
計量:metric:~
記録:record:~
	ミリ秒:millisecond:~
測定:measure:~
所要時間:duration:~
終了-:finish:~
終了:end:~
	遅延測定:latency measurements:~
開始:start:~
	開始時点:beginning:~
高解像度:high resolution:~


	●未分類
作動中の:active な::~:アクティブな
service-worker:service worker
service:
worker:::
size:::サイズ
access:::アクセス
address-bar:address bar::アドレスバー
app:application::アプリ
byte:::バイト
data:::データ
directory:::ディレクトリ
event:::イベント
form:::フォーム
提出:submission::~
handler:::ハンドラ
inline:::インライン
instance:::インスタンス
interface:::インタフェース
method:::メソッド
model:::モデル
obj:object::オブジェクト
page:::ページ
sandbox:::サンドボックス
script:::スクリプト
support:::サポート
tag:::タグ
top-level:::トップレベル
web:::ウェブ
zero:::ゼロ
memory:::メモリ

hint:::ヒント
flag:::フラグ
中止:abort:~
取得子:getter:~

	依拠-:rely:~
共有-:share:~
共有:shared:~
内容:content:~
再試行:retry:~
初期化:initializing:~
待入する:queue する::待ち行列に入れる:キューする
行先の:destination:~

型:type:~
失敗-:fail:~
演算:operation:~
完了-:complete:~
完了:completion:~
完全:complete:~
局所:local::~:ローカル
属性:attribute:~

遅延:latency:~

感知:perceive:~
成功:success:~
拒否:refuse:~
文書:document:~
格納-:store:~
検査-:check:~
検査:check:~
消費-:consume:~
準備度:readiness::~
環境設定-:configure:~
発火:fire:~
登録:registration:~
直列化:serialization:~::シリアル化
直列化-:serialize:~::シリアライズ
直列化子:serializer:~::シリアライザ
	直列化-可能:serializable:~
種別:type:~

継承:inherited:~
継承-:inherit:~
要素:element:~
解像度:resolution:~
設定-:set:~
閲覧文脈:browsing context:~
文脈:context:~
非同期:asynchronous:~
名前:name:~
名:name:~
値:value:~
現在の:current:~
可用:available:~
空文字列:empty string:~

~~既存の:preexist:~
検出:detection:~
検出法:detecting:~


状態:state:~
~~直前:immediately before:~
~~直後:immediately after:~
~~等:or equivalent:~
	し始める:initiate:~
関係-:relate:~
	に関係する:related:~
事由:reason:~
作成-:create:~
再利用:re-use:~
動作-:act:~
動作:action:~
収集-:collect:~
変化:change:~
変更-:change:~
情報:information:~
段:step:~

生成-:generate:~
知識:knowledge:~
等価:equivalent:~
計算-:calculate:~
保守-:maintain:~
関連の:relevant:~
構造:structure:~
既定:default:~

指定-:specify:~
公開-:expose:~
走らす:run する::~
特性:characteristics:~
処理-:process:~
処理:processing:~
内部:internal:~
	高速に:faster:
	受け持つ cover
整数:integer:~
定数:constant:~

</script>

<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
redirect-or-equivalents:
GET-or-equivalents:
time-value:
time-diff:
DOMHighResTimeStamp:
	PerformanceEntry:
PerformanceNavigationTiming:idl-def-PerformanceNavigationTiming
NavigationType:idl-def-NavigationType


	ALPN-Protocol-ID:
DOMContentLoaded:
	HTTP-cache:
asynchronously-closed:
browsing-context:
cause-by-fragment-identifiers:
content-codings:
current-document-readiness:
dom-location-reload:
fetching:
history-traversal:
message-body:
meta-refresh:
navigation:
origin:
persistent-connection:
refresh-pragma-directive:
refused-to-unload:
relaxing-the-same-origin-restriction:
relevant-application-cache:
url-scheme:
</script>

<!-- 

https://www.w3.org/TR/hr-time/
	https://www.w3.org/TR/hr-time-2/
#idl-def-PerformanceResourceTiming
	#idl-def-PerformanceResourceTiming

https://www.w3.org/TR/resource-timing/
	https://www.w3.org/TR/resource-timing-2/
idl-def-PerformanceEntry
	dom-performanceresourcetiming
dom-PerformanceNavigationTiming-starttime
	dom-PerformanceNavigationTiming-startTime
idl-def-PerformanceResourceTiming
	dom-performanceresourcetiming
https://www.w3.org/TR/resource-timing/#dom-performanceresourcetiming

-->
<!--%links -->
<script type="text/plain" id="_link_map">
	●I
I.PerformanceNavigationTiming:#dom-performancenavigationtiming
I.NavigationType:#idl-def-navigationtype
	I.DOMHighResTimeStamp:#_domhighrestimestamp
I.DOMHighResTimeStamp:~HRTIME#dom-domhighrestimestamp
	#dom-domhighrestimestamp
I.PerformanceEntry:~TIMELINE#dom-performanceentry
I.PerformanceResourceTiming:~RTIMING#dom-performanceresourcetiming
	~RTIMING#idl-def-performancenavigationtiming

	x.PerformanceResourceTiming:~RTIMING#idl-def-PerformanceResourceTiming

	●m
m.connectEnd:~RTIMING#dom-performanceresourcetiming-connectend
m.connectStart:~RTIMING#dom-performanceresourcetiming-connectstart
m.decodedBodySize:~RTIMING#dom-performanceresourcetiming-decodedbodysize
m.domainLookupEnd:~RTIMING#dom-performanceresourcetiming-domainlookupend
m.domainLookupStart:~RTIMING#dom-performanceresourcetiming-domainlookupstart
m.encodedBodySize:~RTIMING#dom-performanceresourcetiming-encodedbodysize
m.fetchStart:~RTIMING#dom-performanceresourcetiming-fetchstart
m.nextHopProtocol:~RTIMING#dom-performanceresourcetiming-nexthopprotocol
m.redirectEnd:~RTIMING#dom-performanceresourcetiming-redirectend
m.redirectStart:~RTIMING#dom-performanceresourcetiming-redirectstart
m.requestStart:~RTIMING#dom-performanceresourcetiming-requeststart
m.responseEnd:~RTIMING#dom-performanceresourcetiming-responseend
m.responseStart:~RTIMING#dom-performanceresourcetiming-responsestart
m.secureConnectionStart:~RTIMING#dom-performanceresourcetiming-secureconnectionstart
m.transferSize:~RTIMING#dom-performanceresourcetiming-transfersize

m.unloadEventStart:#dom-performancenavigationtiming-unloadeventstart
m.unloadEventEnd:#dom-performancenavigationtiming-unloadeventend
m.domInteractive:#dom-performancenavigationtiming-dominteractive
m.domContentLoadedEventStart:#dom-performancenavigationtiming-domcontentloadedeventstart
m.domContentLoadedEventEnd:#dom-performancenavigationtiming-domcontentloadedeventend
m.domComplete:#dom-performancenavigationtiming-domcomplete
m.loadEventStart:#dom-performancenavigationtiming-loadeventstart
m.loadEventEnd:#dom-performancenavigationtiming-loadeventend
m.type:#dom-performancenavigationtiming-type
m.redirectCount:#dom-performancenavigationtiming-redirectcount

m.name:#dom-PerformanceNavigationTiming-name
m.entryType:#dom-PerformanceNavigationTiming-entryType
m.startTime:#dom-PerformanceNavigationTiming-startTime
m.duration:#dom-PerformanceNavigationTiming-duration


m.initiatorType:~RTIMING#dom-performanceresourcetiming-initiatortype
m.workerStart:~RTIMING#dom-performanceresourcetiming-workerstart

	m.initiatorType:#dom-PerformanceNavigationTiming-initiatorType
	m.workerStart:#dom-PerformanceNavigationTiming-workerStart

	m.location.reload():#dom-location-reload
	m.location.reload():~HTML50/browsers.html#dom-location-reload

m.getEntriesByType:~TIMELINE#dom-performance-getentriesbytype
m.performance:~HRTIME#idl-def-globalperformance-performance

	●
et.DOMContentLoaded:~HTMLindex#event-domcontentloaded
	#DOMContentLoaded
et.unload:~BROWSERS#unloading-documents
	et.unload:#unloading-documents

l.back_forward:#dom-navigationtype-back_forward
l.navigate:#dom-navigationtype-navigate
l.prerender:#dom-navigationtype-prerender
l.reload:#dom-navigationtype-reload


h.Timing-Allow-Origin:~RTIMING#timing-allow-origin

m.location.reload():~BROWSERS#dom-location-reload




	●
~navi:#dfn-navigation
~fetching:#fetching
~fetch:#fetching
~redirect等:#redirect-or-equivalents
GET 等:#GET-or-equivalents
時刻値:#time-value
所要時間:#time-duration

i.~objの作成-:#step-create-object
i.~fetch開始:#step-fetch-start
i.~domain検索:#_step-domain-lookup
i.接続-開始:#step-connect-start
i.要請~開始:#step-request-start
i.応答~開始:#step-response-start
i.応答~終了:#step-response-end

処理能~entry~buffer:#dfn-performance-entry-buffer

	●外部
起点時刻:~HRTIME#time-origin
処理能~時系列線:~TIMELINE#dfn-performance-timeline
計時~許可-検査:~RTIMING#timing-allow-check

x.ALPN Protocol ID:~IETF/rfc7301
	x.equivalent:~HTML50/infrastructure.html#concept-http-equivalent-codes
	x.equivalent:~HTML50/infrastructure.html#concept-http-equivalent-get
	x.4.5 Cross-origin Resources:~RTIMING#cross-origin-resources
	x.Queue:http://w3c.github.io/performance-timeline/#dfn-queue-a-performanceentry

		定義表

	●
処理能~entry~buffer:~TIMELINE#dfn-performance-entry-buffer
閲覧文脈:~BROWSERS#browsing-context
現在の文書:~BROWSERS#concept-document-window
	結付けられている文書:~BROWSERS#concept-document-window
緩い同一生成元~policy:~BROWSERS#relaxing-the-same-origin-restriction
生成元:~BROWSERS#concept-origin
同一生成元:~BROWSERS#same-origin
	同一生成元:~IETF/rfc6454#section-5
閲覧文脈~sandbox化( ~navi )~flag:~BROWSERS#sandboxed-navigation-browsing-context-flag
閲覧文脈~sandbox化( 非~利用者~作動化~top-level~navi )~flag:~BROWSERS#sandboxed-top-level-navigation-without-user-activation-browsing-context-flag
閲覧文脈~sandbox化( 利用者~作動化~top-level~navi )~flag:~BROWSERS#sandboxed-top-level-navigation-with-user-activation-browsing-context-flag

~navi:~NAVI#navigate
履歴の辿り:~NAVI#traverse-the-history
~unloadを拒否-:~NAVI#refused-to-allow-the-document-to-be-unloaded
素片識別子により生じた:~NAVI#navigate-fragid-step

現在の準備度:~HTMLdom#current-document-readiness

持続的~接続:~RFC7230#section-6.3
非同期に閉じられ:~RFC7230#section-6.5
事前具現化-:~TR/resource-hints/#prerender
作動中の~service-worker登録:~SW#dfn-containing-service-worker-registration
~service-worker登録:~SW#dfn-service-worker-registration
作動中の~worker:~SW#dfn-active-worker
名前~fetch_evの~eventを発火:~SW#on-fetch-request-algorithm
~workerを走らす:~SW#service-worker-concept
走らす:~SW#service-worker-concept

関連の~app~cache:~HTML5/browsers.html#relevant-application-cache
~fetching:~FETCH#fetching


	relevant application cache


	＊DOMContentLoaded@et ~event



refresh pragma 指令:~HEmetadata#attr-meta-http-equiv-refresh
meta refresh:~HEmetadata#attr-meta-http-equiv-refresh









</script>

<!-- 


現在の文書:#dfn-current-document
閲覧文脈:#browsing-context
関連の~app~cache:#relevant-application-cache
文書の現在の準備度:#current-document-readiness
準備度:#current-document-readiness
~unloadを拒否-:#refused-to-unload
refresh pragma 指令:#refresh-pragma-directive
meta refresh:#meta-refresh

閲覧文脈~sandbox化( ~navi )~flag:#sandboxed-navigation-browsing-context-flag
閲覧文脈~sandbox化( ~top-level~navi )~flag:#sandboxed-top-level-navigation-browsing-context-flag

素片識別子により生じた:#cause-by-fragment-identifiers
生成元:#origin
同一生成元:#same-origin
持続的~接続:#persistent-connection
非同期に閉じられ:#asynchronously-closed
事前具現化-:#rel-prerender
作動中の~service-worker登録:#active-service-worker-registration
~service-worker登録:#service-worker-registration
作動中の~worker:#active-worker
名前~fetch_evの~eventを発火:#on-fetch-request-algorithm
~workerを走らす:#run-a-worker
走らす:#run-a-worker


	x.performance entry buffer:~TIMELINE#dfn-performance-entry-buffer
	x.Window object’s newest Document object:~HTML50/browsers.html#dom-document-0
	x.navigation:
x.DOMContentLoaded event:~HTML50/syntax.html#the-end
	x."complete":~HTML50/syntax.html#the-end
	x."interactive":~HTML50/syntax.html#the-end
	x.refresh pragma directive:~HTML50/document-metadata.html#attr-meta-http-equiv-refresh
	x.browsing context:~HTML50/browsers.html#browsing-context
	x.current document readiness:~HTML50/dom.html#current-document-readiness
x.fetching process:~HTML50/infrastructure.html#fetch
	x.caused by fragment identifiers:~HTML50/browsers.html#navigate-fragid-step
	x.history traversal:~HTML50/browsers.html#traverse-the-history
	x.location.reload():~HTML50/browsers.html#dom-location-reload
	x.meta refresh:~HTML50/document-metadata.html#attr-meta-http-equiv-refresh
	x.refuses to allow the document to be unloaded:~HTML50/browsers.html#refused-to-allow-the-document-to-be-unloaded
	x.relaxed same origin policy:~HTML50/browsers.html#relaxing-the-same-origin-restriction
	x.relevant application cache:~HTML50/browsers.html#relevant-application-cache
	x.sandboxed navigation browsing context flag:~HTML50/browsers.html#sandboxed-navigation-browsing-context-flag
	x.sandboxed top-level navigation browsing context flag:~HTML50/browsers.html#sandboxed-top-level-navigation-browsing-context-flag
	x.unload event:~HTML50/browsers.html#unloading-documents

	x.active worker:~SW#dfn-active-worker
	x.fire an event named fetch:~SW#on-fetch-request-algorithm
	x.run a worker:~SW#service-worker-concept
	x.service worker registration:~SW#dfn-service-worker-registration
	x.active service worker registration:~SW#dfn-containing-service-worker-registration

	x.~HTTP~cache:~RFC7234
x.same origin:~IETF/rfc6454#section-5
	x.asynchronously closed:~RFC7230#section-6.5
	x.persistent connection:~RFC7230#section-6.3
	x.origin:~IETF/rfc6454
	x.prerender:~TR/resource-hints/#prerender

	＊
	JavaScript:#dfn-javascript
	Queue:~TIMELINE#dfn-queue-a-performanceentry
	Timing-Allow-Origin:#timing-allow-origin

 -->


<!--%style -->

<style>
#_time-table {
	background: #eef1fc;
	padding: 0.5em;
	font-size: smaller;
}
#_time-table > div {
	border: solid gray 1px;
	position: relative;
	padding: 0.5em;
	height: 3em;
	width: 10em;
	margin: 1em 0;
}
#_time-table > div > div {
	position: absolute;
	left: 11.5em;
	min-width: 20em;
	white-space: nowrap;
}


</style>

</head>

<body>

<div style="display:none;">
<input type="hidden" id="_page_config" value="" />
</div>



<aside class="trans-meta">
<h1>Navigation Timing 2 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="https://www.w3.org/">W3C</a> により，副題の日付にて
<strong>編集者草案</strong>として公開された
<a id="_SPEC_URL">Navigation Timing 2</a>
を日本語に翻訳したものです。
<strong>この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語訳は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p>
更新： <time>2017-04-13</time>
（公開：<time>2013-10-04</time> ）
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>

<header>

<a href="https://www.w3.org/" id="_W3C">W3C</a>
	<hgroup>
<h1>ナビの計時 — Navigation Timing 2</h1>
<h2>2017 年 4 月 11 日付 編集者草案</h2>
	</hgroup>
<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dt title="Latest editor’s draft:">最新の編集者草案</dt>
	<dd>https://w3c.github.io/navigation-timing/</dd>

	<dt title="Latest published version:">最新発行バージョン</dt>
	<dd>https://www.w3.org/TR/navigation-timing-2/</dd>

	<dt title="Test suite:">テスト一式</dt>
	<dd>https://github.com/w3c/web-platform-tests/tree/master/navigation-timing</dd>

	<dt title="Editors:">編集</dt>
	<dd><a href="https://www.igvita.com/">Ilya Grigorik</a>, Google, <a href="mailto:igrigorik@gmail.com">igrigorik@gmail.com</a></dd>
	<dd>Tobin Titus, Microsoft Corp., <a href="mailto:tobint@microsoft.com">tobint@microsoft.com</a> (Until January 2015)</dd>
	<dd>Jatinder Mann, Microsoft Corp.,
<a href="mailto:jmann@microsoft.com">jmann@microsoft.com</a> (Until February 2014)</dd>
	<dd>Arvind Jain, Google Inc.,
<a href="mailto:arvind@google.com">arvind@google.com</a> (Until December 2014)</dd>

	<dt title="Repository:">リポジトリ</dt>
	<dd><a href="https://github.com/w3c/navigation-timing/">We are on Github.</a></dd>
	<dd><a href="https://github.com/w3c/navigation-timing/issues">File a bug.</a></dd>
	<dd><a href="https://github.com/w3c/navigation-timing/commits/gh-pages/index.html">Commit history.</a></dd>

	<dt>Mailing list:</dt>
	<dd><a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a> (
<a href="mailto:public-web-perf-request@w3.org?subject=subscribe">subscribe</a>,
<a href="https://lists.w3.org/Archives/Public/public-web-perf/">archives</a>)</dd>

	<dt title="Implementation:">実装</dt>
	<dd><a href="http://caniuse.com/#feat=nav-timing">Can I use Navigation Timing?</a></dd>
	<dd><a href="http://w3c-test.org/navigation-timing/">Test Suite</a></dd>
	<dd><a href="https://github.com/w3c/web-platform-tests/tree/master/navigation-timing">Test Suite repository</a></dd>

</dl>

<small class="copyright">
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
2017
<a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
(<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
<a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
<a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). 
<abbr title="World Wide Web Consortium">W3C</abbr> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
<a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a>
rules apply.
</small>
</header>

<div id="MAIN" style="display:none;">


	<section class="introductory" id="abstract">
<h2 title="Abstract">要約</h2>

<p>
この仕様は、~web~appが文書の~naviに関する完全な計時~情報に~accessするための~interfaceを定義する。
◎
This specification defines an interface for web applications to access the complete timing information for navigation of a document.
</p>
	</section>

	<section id="sotd" class="introductory">
<h2 title="Status of This Document">この文書の位置付け</h2>

<p>
これは編集者草案の公開の複製です…
<!-- 
この節では、発行時点における…
-->
<span class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#status">W3C 日本語訳 共通ページ</a>
に委譲
】</span></p>


<p>
Navigation Timing 2 は、その最初のバージョンである
`NAVIGATION-TIMING$r
を置き換えるものであり、次に挙げる変更を含んでいます：
◎
Navigation Timing 2 replaces the first version of [NAVIGATION-TIMING] and includes the following changes:
</p>

<ul>
	<li>
`Performance^I ~interfaceの定義は
`PERFORMANCE-TIMELINE-2$r
に移動された。
◎
the definition of Performance interface was moved to [PERFORMANCE-TIMELINE-2];
</li>
	<li>
`PERFORMANCE-TIMELINE-2$r
の~support。
◎
support for [PERFORMANCE-TIMELINE-2];
</li>
	<li>
`RESOURCE-TIMING-2$r の上に築かれる。
◎
builds on top of [RESOURCE-TIMING-2];
</li>
	<li>
`HR-TIME-2$r
の~support。
◎
support for [HR-TIME-2];
</li>
	<li>
`事前具現化-$させる~naviの~support。
`RESOURCE-HINTS$r
◎
support for prerender navigations [RESOURCE-HINTS];
</li>
	<li>
最後の非~redirect~naviからの~redirect数
— `redirectCount$m —
を公開する。
◎
exposes number of redirects since the last non-redirect navigation;
</li>
	<li>
次の~hopの~network~protocol
— `nextHopProtocol$m —
を公開する
◎
exposes next hop network protocol;
</li>
	<li>
［
転送 ／ 符号化された本体 ／ 復号された本体
］~size情報
— `transferSize$m ／ `encodedBodySize$m ／ `decodedBodySize$m —
を公開する。
◎
exposes transfer, encoded body and decoded body size information;
</li>
	<li>
`secureConnectionStart$m
属性の~supportは、今や，義務とされた。
◎
secureConnectionStart attribute is now mandatory.
</li>
</ul>

<p>
この文書は
<a href="https://www.w3.org/webperf/">Web Performance Working Group</a>
により，編集者草案として制作されました。
コメントを歓迎します。
件名の先頭に
<samp>[NavigationTiming]</samp>
と記した上で、冒頭に挙げた Mailing list 宛まで送られるよう願います。
◎
This document was published by the Web Performance Working Group as a Working Draft. This document is intended to become a W3C Recommendation. If you wish to make comments regarding this document, please send them to public-web-perf@w3.org (subscribe, archives) with [NavigationTiming2] at the start of your email's subject. All comments are welcome.
</p>
	</section>

<main id="MAIN0">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

~INFORMATIVE


<p>
~web~appの処理能~特性の測定は、~web~appをより高速にするために重要な側面になる。
`JSMEASURE$r
などの， JavaScript に基づく仕組みは、~app内における利用者~遅延の測定のための包括的な~~手段を提供し得る一方で、多くの事例で，それらは端点間における遅延の完全なあるいは詳細な様相を提供できない。
例えば、次の JavaScript は、~pageが全部的に~loadされるまでの時間を，ごく素朴に測定しようと試みる：
◎
Accurately measuring performance characteristics of web applications is an important aspect of making web applications faster. While JavaScript-based mechanisms, such as the one described in [JSMEASURE], can provide comprehensive instrumentation for user latency measurements within an application, in many cases, they are unable to provide a complete or detailed end-to-end latency picture. For example, the following JavaScript shows a naive attempt to measure the time it takes to fully load a page:
</p>


<div class="example">

<pre>
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
var start = new Date().getTime();
function onLoad() {
  var now = new Date().getTime();
  var latency = now - start;
  alert("page loading time: " + latency);
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body onload="onLoad()"&gt;
&lt;!- <span class="comment" title="Main page body goes from here.">~page本体の内容…</span> --&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>

<p>
上の~scriptは head ~tag内の最初の JavaScript コードが実行されて<strong>以降から</strong>，~pageが~loadされるまでの時間は計算するが、~serverから~pageを得るために要した時間や, ~pageの初期化の lifecycle <!-- ＊ -->についての情報は供さない。
◎
The above script calculates the time it takes to load the page after the first bit of JavaScript in the head is executed, but it does not give any information about the time it takes to get the page from the server, or the initialization lifecycle of the page.
</p>

<p>
この仕様は、文書の~naviに関係する高解像度の処理能~計量~dataを格納する／取得するための，
`PERFORMANCE-TIMELINE-2$r
に関与する `PerformanceNavigationTiming$I ~interfaceを定義する。
`PerformanceNavigationTiming$I ~interfaceは
`HR-TIME-2$r を利用するので、すべての時刻値は，
`Window^I ~objの`起点時刻$を~~基準に計測される。
◎
This specification defines the PerformanceNavigationTiming interface which participates in the [PERFORMANCE-TIMELINE-2] to store and retrieve high resolution performance metric data related to the navigation of a document. As the PerformanceNavigationTiming interface uses [HR-TIME-2], all time values are measured with respect to the time origin of the Window object.
</p>


<div class="example">
<p>
例えば，~HTTP応答の終了が~naviの開始から 100ms 後であったとするなら、
`PerformanceNavigationTiming$I
の~dataは次の様になるであろう：
◎
For example, if we know that the response end occurs 100ms after the start of navigation, the PerformanceNavigationTiming data could look like so:
</p>


<pre>
startTime:           0.000  // <span class="comment" title="start time of the navigation request">~navi要請の開始~時刻</span>
responseEnd:       100.000  // <span class="comment" title="high resolution time of last received byte">高解像度による，最後に受信された~byteの時刻</span>
</pre></div>

<p>
文書の~naviに関係する正確な計時~dataを得るために，
`PerformanceNavigationTiming$I
~interfaceを用いる例を次の~scriptに示す：
◎
The following script shows how a developer can use the PerformanceNavigationTiming interface to obtain accurate timing data related to the navigation of the document:
</p>

<div class="example">
<pre>
window.onload = function init() {
    var %timing = `performance$m.`getEntriesByType$m("navigation")[0];
    if (window.console) {
        console.log(
"Name: "       + %timing.name                + "\n" +
"Entry Type: " + %timing.entryType           + "\n" +
"Start Time: " + %timing.startTime           + "\n" +
"Duration: "   + %timing.duration            + "\n" +
"Unload: "     + (%timing.unloadEventEnd -
                  %timing.unloadEventStart)  + "\n" +
"Redirect: "   + (%timing.redirectEnd -
                  %timing.redirectStart)     + "\n" +
"App Cache: "  + (%timing.domainLookupStart -
                  %timing.fetchStart)        + "\n" +
"DNS: "        + (%timing.domainLookupEnd -
                  %timing.domainLookupStart) + "\n" +
"TCP: "        + (%timing.connectEnd -
                  %timing.connectStart)      + "\n" +
"Request: "    + (%timing.responseStart -
                  %timing.requestStart)      + "\n" +
"Response: "   + (%timing.responseEnd -
                  %timing.responseStart)     + "\n" +
"Processing: " + (%timing.loadEventStart -
                  %timing.responseEnd)       + "\n" +
"Onload: "     + (%timing.loadEventEnd -
                  %timing.loadEventStart)    + "\n"
        );
    }
}
</pre>


<div class="_test">
【
利用中のブラウザで、この~script（に等価な処理）を
<button type="button" onclick="test1()">試みる</button>
】
<pre id="_test_output">（結果は console.log ではなく，ここに表示される）</pre>
</div>

	</div>

	</section>

	<section id="conformance">
<h2 title="Conformance">2. 適合性</h2>

<p class="trans-note">【
この節の内容は
<a href="w3c-common-ja.html#conformance">W3C 日本語訳 共通ページ</a>
に委譲
】</p>
<!-- 
As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.

The key words MAY, MUST, MUST NOT, and SHOULD are to be interpreted as described in [RFC2119].

Requirements phrased in the imperative as part of algorithms (such as "strip any leading space characters" or "return false and abort these steps") are to be interpreted with the meaning of the key word ("MUST", "SHOULD", "MAY", etc) used in introducing the algorithm.

Some conformance requirements are phrased as requirements on attributes, methods or objects. Such requirements are to be interpreted as requirements on user agents.

Conformance requirements phrased as algorithms or specific steps MAY be implemented in any manner, so long as the end result is equivalent. (In particular, the algorithms defined in this specification are intended to be easy to follow, and not intended to be performant.)

The IDL fragments in this specification must be interpreted as required for conforming IDL fragments, as described in the Web IDL specification. [WebIDL]
-->

	</section>
	<section id="terminology">
<h2 title="Terminology">3. 各種用語</h2>

<p class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#terminology">W3C 日本語訳 共通ページ</a>,
次の下位節に委譲
】
◎
The construction "a Foo object", where Foo is actually an interface, is sometimes used instead of the more accurate "an object implementing the interface Foo.
◎
The term "navigation" refers to the act of navigating.
◎
The term current document refers to the document associated with the Window object's newest Document object.
◎
The term JavaScript is used to refer to ECMA262, rather than the official term ECMAScript, since the term JavaScript is more widely known. [ECMASCRIPT]
</p>


<p id="_measured-since">
この仕様を通して、時刻は 文書の~naviの開始を起点としてミリ秒~単位で計測されるものとする。
例えば，文書の~naviの開始は、時刻 0 で生じる。
語 “<i>〜の時刻</i>” は、文書の~naviの開始から その時点までに経過した，ミリ秒数による時刻を指す。
この，時刻の定義は、 `HR-TIME-2$r による。
◎
Throughout this work, all time values are measured in milliseconds since the start of navigation of the document. For example, the start of navigation of the document occurs at time 0. The term current time refers to the number of milliseconds since the start of navigation of the document until the current moment in time. This definition of time is based on [HR-TIME-2] specification.
</p>


		<section id="_conventions">
<h3 class="trans-note">【3.1. 日本語訳に固有の表記規約】</h3>
<p>
簡潔に記すため、次の非公式な用語を導入する：
</p>

<ul>
	<li>
`~redirect等@
とは、~HTTP~redirectまたは（他の~protocolにおける）
<a href="~HTML50/infrastructure.html#concept-http-equivalent-codes">それに等価なもの</a>
を指す総称である。
</li>
	<li>
`GET 等@
とは、~HTTP GET または（他の~protocolにおける）
<a href="~HTML50/infrastructure.html#concept-http-equivalent-get">それに等価なもの</a>
を指す総称である。
</li>
	<li>
<p>
`時刻値@
（もしくは
`所要時間@
）とは、何らかの時刻（もしくは時間~差）を表現する
`DOMHighResTimeStamp$I 型~値を意味する。
</p>

<p>
“`時刻値$ %t ”
という表記は，値 %t をとる`時刻値$を意味する。
また、
“〜した時刻値（〜の時刻値）”,
という表記は，
“〜した時刻（〜の時刻）を表現する`時刻値$”
の略記である。
</p>

	</li>
</ul>

<p>
原文が参照する HTML 用語は， `HTML5$r を参照しているが、この訳では WHATWG HTML 仕様（またはその和訳）を参照することにする。
</p>

		</section>
	</section>

	<section id="sec-navigation-timing">
<h2 title="Navigation Timing">4. ~naviの計時</h2>

		<section id="performanceentry">
<h3 title="Relation with the PerformanceEntry interface">4.1. `PerformanceEntry^I ~interfaceとの関係</h3>

<p>
`PerformanceNavigationTiming$I ~interfaceは、
`PerformanceEntry$I ~interfaceの次の属性を拡張する：
◎
PerformanceNavigationTiming interface extends the following attributes of PerformanceEntry interface:
</p>

<dl class="idl-def">
	<dt>`name@m</dt>
	<dd>
`DOMString^I 値 `document^l を返さなければ~MUST。
◎
The name attribute MUST return the DOMString "document".
</dd>

	<dt>`entryType@m</dt>
	<dd>
`DOMString^I 値 `navigation^l を返さなければ~MUST。
◎
The entryType attribute MUST return the DOMString "navigation".
</dd>

	<dt>`startTime@m</dt>
	<dd>
`時刻値$ ~zeroを返さなければ~MUST。
◎
The startTime attribute MUST return a DOMHighResTimeStamp with a time value of 0. [HR-TIME-2]
</dd>

	<dt>`duration@m</dt>
	<dd>
`startTime$m
から
`loadEventEnd$m
までの`所要時間$を返さなければ~MUST。
<!-- ,~respectively ？-->
◎
The duration attribute MUST return a DOMHighResTimeStamp equal to the difference between loadEventEnd and startTime, respectively.
</dd>

</dl>


		</section>
		<section id="PerformanceResourceTiming">
<h3 title="Relation with the PerformanceResourceTiming interface">4.2. `PerformanceResourceTiming^I ~interfaceとの関係</h3>

<p>
`PerformanceNavigationTiming$I ~interfaceは、
`PerformanceResourceTiming$I ~interfaceの次の属性を拡張する：
◎
The PerformanceNavigationTiming interface extends the following attributes of the PerformanceResourceTiming interface.
</p>

<dl class="idl-def">
	<dt>`initiatorType$m</dt>
	<dd>
取得子は、 `navigation^l を返さ~MUST。
◎
The initiatorType attribute MUST return the DOMString "navigation".
</dd>

	<dt>`workerStart$m</dt>
	<dd>
取得子は、`現在の文書$に `作動中の~service-worker登録$
`SERVICE-WORKERS$r
がある場合
— すなわち，［
要請を~serviceするために `~workerを走らす$ことが要求されている, または
そのような~workerは すでに可用である場合 —
~UAが［
`作動中の~worker$に向けて，`名前~fetch_evの~eventを発火$する／した
］直前の`時刻値$を返さ~MUST。
他の場合（`作動中の~worker$はない）、~zeroを返さ~MUST。
◎
The workerStart attribute MUST return the time immediately before the user agent ran the worker (if the current document has an active service worker registration [SERVICE-WORKERS]) required to service the request, or if the worker was already available, the time immediately before the user agent fired an event named `fetch` at the active worker. Otherwise, if there is no active worker this attribute MUST return zero.
</dd>

</dl>

<p class="note">注記：
`処理能~時系列線$に含められるのは
`現在の文書$ 資源に限られる
— `処理能~時系列線$ 内にある `PerformanceNavigationTiming$I ~objは 1 個に限られる。
◎
Only the current document resource is included in the performance timeline; there is only one PerformanceNavigationTiming object in the performance timeline.
</p>


		</section>
		<section id="sec-PerformanceNavigationTiming">
<h3 title="The PerformanceNavigationTiming interface">4.3. `PerformanceNavigationTiming^I ~interface</h3>

<p class="note">注記：
~HTTP~cache `RFC7234$r を検査して，そこから内容を検索取得することは、`~fetching$の一部である。
それは、［
`requestStart$m, `responseStart$m, `responseEnd$m
］属性が受け持つ。
◎
Checking and retrieving contents from the HTTP cache [RFC7234] is part of the fetching process. It's covered by the requestStart, responseStart and responseEnd attributes.
</p>


<pre class="idl" id="_PT">interface `PerformanceNavigationTiming@I : `PerformanceResourceTiming$I {
    readonly    attribute `DOMHighResTimeStamp$I `unloadEventStart$m;
    readonly    attribute `DOMHighResTimeStamp$I `unloadEventEnd$m;
    readonly    attribute `DOMHighResTimeStamp$I `domInteractive$m;
    readonly    attribute `DOMHighResTimeStamp$I `domContentLoadedEventStart$m;
    readonly    attribute `DOMHighResTimeStamp$I `domContentLoadedEventEnd$m;
    readonly    attribute `DOMHighResTimeStamp$I `domComplete$m;
    readonly    attribute `DOMHighResTimeStamp$I `loadEventStart$m;
    readonly    attribute `DOMHighResTimeStamp$I `loadEventEnd$m;

    readonly    attribute `NavigationType$I      `type$m;
    readonly    attribute unsigned short      `redirectCount$m;
    serializer = {inherit, attribute};
};
</pre>



<dl class="idl-def">

	<dt>`unloadEventStart@m</dt>
	<dd>
<p>
取得子は、次を返さ~MUST：
</p>

<ul>
	<li>
前の文書が存在しない場合、`時刻値$ ~zero
</li>
	<li>
他の場合，~naviの際に`~redirect等$があって,
そのいずれかが`計時~許可-検査$に合格しなかった場合、`時刻値$ ~zero
</li>
	<li>
他の場合、~UAが［
前の文書の `unload$et ~eventを開始する
］直前の`時刻値$
</li>
</ul>
◎
If the previous document, and any HTTP redirects or equivalent when navigating, pass the timing allow check algorithm, the unloadEventStart attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent starts the unload event of the previous document.
◎
If there is no previous document or the above timing allow check algorithm does not pass, this attribute MUST return a DOMHighResTimeStamp with a time value equal to zero.
</dd>

	<dt>`unloadEventEnd@m</dt>
	<dd>
<p>
取得子は、次を返さ~MUST：
</p>

<ul>
	<li>
前の文書が存在しない場合、`時刻値$ ~zero
</li>
	<li>
他の場合，~naviの際に`~redirect等$があって,
そのいずれかが`計時~許可-検査$に合格しなかった場合、`時刻値$ ~zero
</li>
	<li>
他の場合、~UAが［
前の文書の `unload$et ~eventを終了した
］直後の`時刻値$
</li>
</ul>

◎
If the previous document, and any HTTP redirects or equivalent when navigating, pass the timing allow check algorithm, the unloadEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately after the user agent finishes the unload event of the previous document.
◎
If there is no previous document or the above timing allow check algorithm does not pass, this attribute MUST return a DOMHighResTimeStamp with a time value equal to zero.
</dd>
	<dd>
~naviの際に`~redirect等$があって, かつ その中に`同一生成元$でない`~redirect等$がある場合、
`unloadEventStart$m, `unloadEventEnd$m
はいずれも，`時刻値$ ~zeroを返さなければ~MUST。
`この段落は冗長？（計時~許可-検査と重複している）^tnote
◎
If there are HTTP redirects or equivalent when navigating and not all the redirects or equivalent are from the same origin, both unloadEventStart and unloadEventEnd MUST return a DOMHighResTimeStamp with a time value equal to zero.
</dd>

	<dt>`domInteractive@m</dt>
	<dd>
取得子は、~UAが［
文書の`現在の準備度$を `interactive^l に設定する
］直前の`時刻値$を返さなければ~MUST。
◎
The domInteractive attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent sets the current document readiness of the current document to "interactive" [HTML5].
</dd>


	<dt>`domContentLoadedEventStart@m</dt>
	<dd>
取得子は、~UAが［
`現在の文書$に向けて `DOMContentLoaded$et ~eventを発火する
］直前の`時刻値$を返さなければ~MUST。
◎
The domContentLoadedEventStart attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent fires the DOMContentLoaded event at the current document.
</dd>


	<dt>`domContentLoadedEventEnd@m</dt>
	<dd>
取得子は、［
`現在の文書$に発火された `DOMContentLoaded$et ~eventが完了した
］直後の`時刻値$を返さなければ~MUST。
◎
The domContentLoadedEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately after the current document's DOMContentLoaded event completes.
</dd>


	<dt>`domComplete@m</dt>
	<dd>
取得子は、~UAが［
文書の`現在の準備度$を `complete^l に設定する
］直前の`時刻値$を返さなければ~MUST。
`HTML5$r
◎
The domComplete attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the user agent sets the current document readiness of the current document to "complete" [HTML5].
</dd>
	<dd>
文書の`現在の準備度$が複数回にわたり同じ状態に変化した場合、［
`domInteractive$m ／
`domContentLoadedEventStart$m ／
`domContentLoadedEventEnd$m ／
`domComplete$m
］は、［
最初に生じた 文書の`現在の準備度$の変化
］に対応している`時刻値$を返さなければ~MUST。
◎
If the current document readiness changes to the same state multiple times, domInteractive, domContentLoadedEventStart, domContentLoadedEventEnd and domComplete MUST return a DOMHighResTimeStamp with a time value equal to the time of the first occurrence of the corresponding document readiness change [HTML5].
</dd>


	<dt>`loadEventStart@m</dt>
	<dd>
<p>
取得子は、［
`現在の文書$に向けて， `load^et ~eventが発火されたかどうか
］に応じて、次を返さなければ~MUST：
</p>

<ul ><li>まだ発火されていないならば、`時刻値$ ~zero
</li><li>すでに発火されたならば、その直前の`時刻値$
</li></ul>

◎
The loadEventStart attribute MUST return a DOMHighResTimeStamp with a time value equal to the time immediately before the load event of the current document is fired. It MUST return a DOMHighResTimeStamp with a time value equal to zero when the load event is not fired yet.
</dd>


	<dt>`loadEventEnd@m</dt>
	<dd>
<p>
取得子は、［
`現在の文書$に向けて， `load^et ~eventが発火され，完了したかどうか
］に応じて、次を返さなければ~MUST：
</p>

<ul><li>まだ完了していないならば、`時刻値$ ~zero
</li><li>すでに完了したならば、その`時刻値$
</li></ul>

◎
The loadEventEnd attribute MUST return a DOMHighResTimeStamp with a time value equal to the time when the load event of the current document is completed. It MUST return a DOMHighResTimeStamp with a time value equal to zero when the load event is not fired or is not completed.
</dd>

	<dt>`type@m</dt>
	<dd>
取得子は、現在の閲覧文脈における，最後の非~redirect`~navi$の種別を表す `DOMString^I 値 を返さなければ~MUST。
それは、いずれかの `NavigationType$I 値でなければ~MUST。
◎
The type attribute MUST return a DOMString describing the type of the last non-redirect navigation in the current browsing context. It MUST have one of the NavigationType values.
</dd>

<dd class="note">注記：
`refresh pragma 指令$
を利用する類いの，~client側~redirectは、この仕様においては`~redirect等$とは見なされない。
その場合の `type$m 属性は、
現在の~pageを~reloadしている場合は `reload$l ／
新たな~URLへの~naviの場合は `navigate$l
など，適切な値を返す~SHOULDである。
◎
Client-side redirects, such as those using the Refresh pragma directive, are not considered HTTP redirects or equivalent by this spec. In those cases, the type attribute SHOULD return appropriate value, such as reload if reloading the current page, or navigate if navigating to a new URL.
</dd>

	<dt>`redirectCount@m</dt>
	<dd>
取得子は、現在の`閲覧文脈$の下での，最後の非~redirect~naviからの~redirect回数（~redirectが生じなければ~zero）を返さなければ~MUST。
ただし、いずれかの~redirectが`計時~許可-検査$に合格しなかった場合は，~zeroを返さなければ~MUST。
◎
The redirectCount attribute MUST return the number of redirects since the last non-redirect navigation under the current browsing context. If there is no redirect or there is any redirect that does not pass the timing allow check algorithm, this attribute MUST return zero.
</dd>

</dl>


			<section id="sec-performance-navigation-types">
<h4 title="Navigation types">4.3.1 ~navi種別</h4>

<pre class="idl">
enum `NavigationType@I {
    `navigate$l,
    `reload$l,
    `back_forward$l,
    `prerender$l
};</pre>


<p>
各種 値は以下の定義に従う：
◎
The values are defined as follows:
</p>

<dl class="idl-def">
	<dt>`navigate@l</dt>
	<dd>
<p>
~naviは次のいずれかにより開始された：
</p>

<ul ><li>~link-click
</li><li>~UAの~address-barへの~URL入力
</li><li>~form提出
</li><li>
下に挙げる `reload$l や `back_forward$l
に利用されるもの以外の，~script演算を通した初期化
</li></ul>

◎
Navigation started by clicking on a link, or entering the URL in the user agent's address bar, or form submission, or initializing through a script operation other than the ones used by reload and back_forward as listed below.
</dd>

	<dt>`reload@l</dt>
	<dd>
~reload演算または
`location.reload()$m
~methodによる~navi。
◎
Navigation through the reload operation or the location.reload() method.
</dd>

	<dt>`back_forward@l</dt>
	<dd>
`履歴の辿り$による~navi。
◎
Navigation through a history traversal operation.
</dd>

	<dt>`prerender@l</dt>
	<dd>
`事前具現化-$させる~hintにより生じた~navi。
◎
Navigation initiated by a prerender hint [RESOURCE-HINTS].
</dd>

</dl>

<p class="note">注記：
上の列挙~値 `back_forward^l は
<a href="~WEBIDL#idl-enums">WebIDL が推奨する列挙~値の形式</a>
に整合していないが、出荷済み実装との後方互換性のため，変更するわけにはいかない。
◎
The format of the above enumeration value is inconsistent with the WebIDL recommendation for formatting of enumeration values. Unfortunately, we are unable to change it due to backwards compatibility issues with shipped implementations.
</p>

			</section>
		</section>
	</section>

	<section id="process">
<h3 title="Process">5. 処理</h3>

		<section id="processing-model">
<h3 title="Processing Model">5.1. 処理~model</h3>

<figure style="overflow:auto;">
<figcaption>
<b>図 1.</b>
次の図式は、
`PerformanceNavigationTiming$I
~interfaceにて定義される計時~属性を示すものである。
括弧内の属性は、`同一生成元$でない文書を孕む~naviでは可用でない。
◎
Fig. 1 This figure illustrates the timing attributes defined by the PerformanceNavigationTiming interface. Attributes in parenthesis indicate that they may not be available for navigations involving documents from different origins. 
</figcaption>

<div id="_time-table">
（時間は下に向かって進行する。）
	<div>
<div style="top:-0.5em">← `startTime$m</div>
<div style="top:0.5em">← ( `unloadEventStart$m )</div>
~unloadに対する~prompt
<div style="bottom:-0.5em">← ( `unloadEventEnd$m )</div>
	</div>
（以降は Resource Timing ）
	<div>
<div style="top:-0.5em">← ( `redirectStart$m )</div>
~redirect
<div style="bottom:-0.5em">← ( `redirectEnd$m )</div>
	</div>
	<div>
<div style="top:-0.5em">← `fetchStart$m</div>
~app~cache
	</div>
	<div>
<div style="top:-0.5em">← `domainLookupStart$m</div>
DNS
<div style="bottom:-0.5em">← `domainLookupEnd$m</div>
	</div>
	<div>
<div style="top:-0.5em">← `connectStart$m</div>
<div style="top:0.5em">← `secureConnectionStart$m</div>
TCP
<div style="bottom:-0.5em">← `connectEnd$m</div>
	</div>
	<div style="margin-bottom:0">
<div style="top:-0.5em">← `requestStart$m</div>
要請
	</div>
	<div style="margin-top:0">
<div style="top:-0.5em">← `responseStart$m</div>
応答
<div style="bottom:-0.5em">← `responseEnd$m</div>
	</div>
（ Resource Timing はここまで）
	<div style="height: 5em">
<div style="top:-0.5em">← `domInteractive$m</div>
<div style="top:0.5em">← `domContentLoadedEventStart$m</div>
処理
<div style="bottom:0.5em">← `domContentLoadedEventEnd$m</div>
<div style="bottom:-0.5em">← `domComplete$m</div>
	</div>
	<div>
<div style="top:-0.5em">← `loadEventStart$m</div>
~load
<div style="bottom:-0.5em">← `loadEventEnd$m</div>
	</div>
</div>

`この訳では、原文の図式（ SVG ）を HTML + CSS による等価な図式に差し替えている。^tnote

</figure>


<ol>
<li>
<p>
~IF［
当の`~navi$は 次のいずれかの事由により中止された
］
⇒
~RET
◎
If the navigation is aborted for any of the following reasons, abort these steps.
</p>

		<ul>
			<li>
~naviは`閲覧文脈~sandbox化( ~navi )~flag$により中止された
◎
↓</li>
			<li>
~naviは`閲覧文脈~sandbox化( 利用者~作動化~top-level~navi )~flag$により中止された
◎
↓</li>
			<li>
~naviは`閲覧文脈~sandbox化( 非~利用者~作動化~top-level~navi )~flag$により中止された
◎
↓</li>
			<li>
当の`閲覧文脈$を~navigateする~~既存の試みがある。
◎
↓</li>
			<li>
利用者が~naviを取り消した
◎
The navigation is aborted due to the sandboxed navigation browsing context flag or the sandboxed top-level navigation browsing context flag, a preexisting attempt to navigate the browsing context, or the user canceling the navigation.
</li>
			<li>
~naviは~page内の`素片識別子により生じた$。
◎
The navigation is caused by fragment identifiers within the page.
</li>
			<li>
~navi先の資源は 何らかの種類の~inline内容により処理される。
◎
The new resource is to be handled by some sort of inline content.
</li>
			<li>
~navi先の資源は `閲覧文脈$に影響しない仕組みを利用して処理される。
◎
The new resource is to be handled using a mechanism that does not affect the browsing context.
</li>
			<li>
利用者が前の文書の`~unloadを拒否-$した。
◎
The user refuses to allow the document to be unloaded.
</li>
		</ul>
	</li>
	<li>
`~objの作成-@i：
<p>
%T ~LET 新たな `PerformanceNavigationTiming$I ~obj
— 以降に現れるこの~interfaceの属性は、すべて %T のそれを表すとする
◎
Create a new PerformanceNavigationTiming object and add it to the performance entry buffer.
</li>
	<li>
%T を`処理能~entry~buffer$に追加する
◎
↑</li>
	<li>
<p>
%T の各種~属性を次の様に設定する：
</p>

<ul ><li>`name$m ← `document^l
</li><li>`entryType$m ← `navigation^l
</li><li>`initiatorType$m ← `navigation^l
</li><li>`startTime$m ← 0
</li><li>`nextHopProtocol$m ← 空 `DOMString^I
</li></ul>
◎
Set name to the DOMString "document".
◎
Set entryType and initiatorType to the DOMString "navigation".
◎
Set startTime to a DOMHighResTimeStamp with a time value of zero, and nextHopProtocol to the empty DOMString.
</li>
	<li>
<p>
~IF［
現在の~navi種別はまだ設定されていない
`この条件は何を意味する？^tnote
］
⇒
`type$m ~SET
~naviがどう開始されたかに応じて，次で与えられる~navi種別
◎
Record the current navigation type in type if it has not been set:
</p>
		<ol style="list-style-type:lower-alpha;">
			<li>
次のいずれか［
~link-click,
~UAの~address-barへの~URL入力,
~form提出,
`location.reload()$m
~method以外の~script演算を通した初期化
］により開始された場合
⇒
`navigate$l 
◎
If the navigation was started by clicking on a link, or entering the URL in the user agent's address bar, or form submission, or initializing through a script operation other than the location.reload() method, let the navigation type be the DOMString "navigate".
</li>
			<li>
［
`meta refresh$
の結果, または
`location.reload()$m
~method
］または他の等価な動作により開始された場合
⇒
`reload$l
◎
If the navigation was started either as a result of a meta refresh, or the location.reload() method, or other equivalent actions, let the navigation type be the DOMString "reload".
</li>
			<li>
`履歴の辿り$の結果，開始された場合
⇒
`back_forward$l
◎
If the navigation was started as a result of history traversal, let the navigation type be the DOMString "back_forward".
</li>
		</ol>
	</li>
	<li>
(
`unloadEventStart$m,
`unloadEventEnd$m
) ~SET ( 0, 0 )
◎
↓</li>
	<li>
<p>
~IF［
前の文書~資源は`計時~許可-検査$に合格した
］：
</p>
		<ol>
			<li>
`unloadEventStart$m ~SET `unload$et ~eventを発火する直前の時刻
</li>
			<li>
`unloadEventEnd$m ~SET `unload$et ~eventが完了した直後の時刻
</li>
			<li>
%workerStart ~LET 0
</li>
			<li>
<p>
~IF［
~navi~URLに合致する `~service-worker登録$ %worker はある
］：
</p>
				<ol>
					<li>
~IF［
%worker はすでに可用である（`作動中の~worker$である）
］
⇒
%workerStart ~SET
~UAが %worker に向けて `名前~fetch_evの~eventを発火$した直前の時刻
</li>
					<li>
~ELSE
⇒
%workerStart ~SET
~UAが %worker を`走らす$直前の時刻
</li>
				</ol>
			</li>
			<li>
`workerStart$m ~SET %workerStart
</li>
		</ol>

◎
If the previous document does not pass the timing allow check algorithm, set both unloadEventStart and unloadEventEnd to 0 then go to step 9. Otherwise, record unloadEventStart as the time immediately before the unload event.
◎
Immediately after the unload event is completed, record the current time as unloadEventEnd. If the navigation URL has an active worker registration, immediately before the user agent runs the worker record the time as workerStart, or if the worker is available, record the time before the event named `fetch` is fired at the active worker. Otherwise, if the navigation URL has no matching service worker registration, set workerStart value to zero.
</li>
	<li><!-- step 9 -->
<p>
`~fetch開始@i：
</p>
		<ol>
			<li>
%fetchStart ~SET 0
</li>
			<li>
~IF［
新たな資源の~fetchは `GET 等$ により行われた
］
⇒
%fetchStart ~SET
~UAが`関連の~app~cache$を検査する直前の時刻
</li>
			<li>
~ELSE
⇒
%fetchStart ~SET
~UAが資源の`~fetching$を開始する直前の時刻
</li>
			<li>
(
`fetchStart$m,
`domainLookupStart$m,
`domainLookupEnd$m,
`connectStart$m,
`connectEnd$m
) ~SET ( %fetchStart, %fetchStart, %fetchStart, %fetchStart, %fetchStart )
</li>
		</ol>
◎
( step 9 )
◎
If the new resource is to be fetched using HTTP GET or equivalent, immediately before a user agent checks with the relevant application caches, record the current time as fetchStart. Otherwise, immediately before a user agent starts the fetching process, record the current time as fetchStart.
◎
Let domainLookupStart, domainLookupEnd, connectStart and connectEnd be the same value as fetchStart.
</li>
	<li>
~IF［
資源は（
<a href="~RFC7234">~HTTP~cache</a>
`RFC7234$r
も含めた）`関連の~app~cache$や局所~資源から~fetchされる
］
⇒
~GOTO `要請~開始$i
◎
If the resource is fetched from the relevant application cache or local resources, including the HTTP cache [RFC7234], go to step 16.
</li>
	<li>
<p>
`~domain検索@i：
</p>
		<ol>
			<li>
~IF［
~domain検索は要求されていない
］
⇒
~GOTO `接続-開始$i
◎
If no domain lookup is required, go to step 14. Otherwise, immediately before a user agent starts the domain name lookup, record the time as domainLookupStart.
</li>
			<li>
`domainLookupStart$m ~SET ~UAが~domain名~検索を開始する直前の時刻
◎
↑</li>
			<li>
~IF［
~domain検索に成功しなかった
］
⇒
~RET
— ~UAは成功するまでに複数回の再試行が必要になり得る
◎
↓</li>
			<li>
`domainLookupEnd$m ~SET ~domain名~検索に成功した直後の時刻
◎
Record the time as domainLookupEnd immediately after the domain name lookup is successfully done. A user agent MAY need multiple retries before that. If the domain lookup fails, abort the rest of the steps.
</li>
		</ol>
	</li>
	<li>
<p>
`接続-開始@i：
</p>
		<ol>
			<li>
~IF［
資源の~fetchに持続的~transport接続が利用されている
］
⇒
( `connectStart$m, `connectEnd$m )
~SET
( `domainLookupEnd$m, `domainLookupEnd$m )；<br />
</li>
			<li>
<p>
~ELSE：
</p>
				<ol>
					<li>
`connectStart$m ~SET ~serverへ接続し始める直前の時刻
</li>
					<li>
~IF［
~serverまたは~proxyへの接続が確立できなかった
］
⇒
~RET
— ~UAは確立される前に複数回の再試行が必要になり得る。
</li>
					<li>
`connectEnd$m ~SET ~serverまたは~proxyへの接続が確立された直後の時刻
</li>
					<li>
`nextHopProtocol$m ~SET 接続に利用される `ALPN Protocol ID$x
</li>
				</ol>
			</li>
		</ol>

◎
If a persistent transport connection is used to fetch the resource, let connectStart and connectEnd be the same value of domainLookupEnd. Otherwise, record the time as connectStart immediately before initiating the connection to the server and record the time as connectEnd immediately after the connection to the server or the proxy is established. A user agent MAY need multiple retries before this time. Once connection is established set the value of nextHopProtocol to the ALPN ID used by the connection. If a connection can not be established, abort the rest of the steps.
</li>
	<li>
`secureConnectionStart$m ~SET 0
◎
↓</li>
	<li>
~IF［
保安的~transportが利用されている
］
⇒
`secureConnectionStart$m ~SET ~UAが接続を保安化する~handshake処理-を開始する直前の時刻
◎
A user agent MUST also set the secureConnectionStart attribute as follows:
◎
When a secure transport is used, the user agent MUST record the time as secureConnectionStart immediately before the handshake process to secure the connection.
◎
When a secure transport is not used, the user agent MUST set the value of secureConnectionStart to 0.
</li>
	<li>
<p>
`要請~開始@i：
</p>
		<ol>
			<li>
`requestStart$m ~SET ~UAが文書への要請の送信を開始する直前の時刻
◎
Immediately before a user agent starts sending request for the document, record the current time as requestStart.
</li>
			<li>
`応答~開始@i
⇒
`responseStart$m ~SET ~UAが応答の最初の~byteを受信した直後の時刻
◎
Record the time as responseStart immediately after the user agent receives the first byte of the response.
</li>
			<li>
`応答~終了@i
⇒
`responseEnd$m ~SET ~UAが応答の最後の~byteを受信した直後の時刻
◎
Record the time as responseEnd immediately after receiving the last byte of the response.
</li>
		</ol>

<p>
この段の中で 要請の送信または応答~全体の受信-に失敗し，接続の再~openを要する場合
⇒
~GOTO `接続-開始$i
◎
Return to step 14 if the user agent fails to send the request or receive the entire response, and needs to reopen the connection.
</p>

<p class="note">注記：
`持続的~接続$が可能化されているときは、
~UAはまず最初に，要請を送信するための~open接続の再利用を（その接続は`非同期に閉じられ$得るが）試行して~MAY。
そのような場合、
`connectStart$m,
`connectEnd$m,
`requestStart$m
は再~open接続において収集された計時~情報を表現する~SHOULDである。
◎
When persistent connection [RFC7230] is enabled, a user agent MAY first try to re-use an open connect to send the request while the connection can be asynchronously closed. In such case, connectStart, connectEnd and requestStart SHOULD represent timing information collected over the re-open connection.
</p>
	</li>
	<li>
( `transferSize$m, `encodedBodySize$m, `decodedBodySize$m )
~SET 前段による結果の対応する値
◎
Set the value of transferSize, encodedBodySize, decodedBodySize to corresponding values.
</li>
	<li>
<p>
~IF［
資源を~fetchした結果，`~redirect等$になった
］：
◎
If the fetched resource results in an HTTP redirect or equivalent, then
</p>

		<ol>
			<li>
~IF［
~fetchされた資源は`計時~許可-検査$に合格しなかった
］
⇒
(
`redirectStart$m,
`redirectEnd$m,
`unloadEventStart$m,
`unloadEventEnd$m,
`redirectCount$m
) ~SET ( 0, 0, 0, 0, 0 )；<br />
~GOTO `~fetch開始$i（新たな資源の下で）
◎
If the timing allow check algorithm does not pass for the origin of the fetched resource, set redirectStart, redirectEnd, unloadEventStart, unloadEventEnd and redirectCount to 0. Then, return to step 9 with the new resource.
</li>
			<li>
`redirectCount$m ~INCBY 1
◎
Increment redirectCount by 1.
</li>
			<li>
~IF［
`redirectStart$m ~EQ 0
］
⇒
`redirectStart$m ~SET `fetchStart$m
◎
If the value of redirectStart is 0, let it be the value of fetchStart.
</li>
			<li>
`redirectEnd$m ~SET `responseEnd$m
◎
Let redirectEnd be the value of responseEnd.
</li>
			<li>
`nextHopProtocol$m ~SET 空 `DOMString^I
◎
↓</li>
			<li>
%T 内の属性のうち［
`startTime$m,
`redirectStart$m,
`redirectEnd$m,
`redirectCount$m,
`type$m,
`nextHopProtocol$m,
`unloadEventStart$m,
`unloadEventEnd$m
］を除く，すべての属性の値 ~SET 0
◎
Set all of the attributes in the PerformanceNavigationTiming object to 0 except startTime, redirectStart, redirectEnd, redirectCount, type, nextHopProtocol, unloadEventStart and unloadEventEnd. Set nextHopProtocol to the empty DOMString.
</li>
			<li>
~GOTO `~fetch開始$i（新たな資源の下で）
◎
Return to step 9 with the new resource.
</li>
		</ol>
	</li>
	<li>
`domInteractive$m ~SET
~UAが文書の`現在の準備度$を `interactive^l に設定する直前の時刻
◎
Record the time as domInteractive immediately before the user agent sets the current document readiness to "interactive".
</li>
	<li>
`domContentLoadedEventStart$m ~SET
~UAが文書に向けて `DOMContentLoaded$et ~eventを発火する直前の時刻
◎
Record the time as domContentLoadedEventStart immediately before the user agent fires the DOMContentLoaded event at the document.
</li>
	<li>
`domContentLoadedEventEnd$m ~SET
`DOMContentLoaded$et ~eventが完了した直後の時刻
◎
Record the time as domContentLoadedEventEnd immediately after the DOMContentLoaded event completes.
</li>
	<li>
`domComplete$m ~SET
~UAが文書の`現在の準備度$を `complete^l に設定する直前の時刻
◎
Record the time as domComplete immediately before the user agent sets the current document readiness to "complete".
</li>
	<li>
`loadEventStart$m ~SET
~UAが `load^et ~eventを発火する直前の時刻
◎
Record the time as loadEventStart immediately before the user agent fires the load event.
</li>
	<li>
`loadEventEnd$m ~SET
~UAが `load^et ~eventを完了した直後の時刻
◎
Record the time as loadEventEnd immediately after the user agent completes the load event.
</li>
	<li>
`duration$m ~SET ［
`startTime$m から `loadEventEnd$m まで
］の`所要時間$
<!-- ,~respectively ？-->
◎
Set the duration to a DOMHighResTimeStamp equal to the difference between loadEventEnd and startTime, respectively.
</li>
	<li>
%T を
<a href="~TIMELINE#dfn-queue-a-performanceentry">待入する</a>
◎
Queue the new PerformanceNavigationTiming object.
</li>
</ol>


<p>
一部の~UAは、“進む”, “戻る” などの~navi演算の間，文書の DOM 構造を~memory内に保守する。
そのような~naviの間に 
`PerformanceNavigationTiming$I
~objに変更が加えられては~MUST_NOT。
◎
Some user agents maintain the DOM structure of the document in memory during navigation operations such as forward and backward. In those cases, the PerformanceNavigationTiming object MUST NOT be altered during the navigation. 
</p>

		</section>
	</section>
	<section id="privacy">
<h2 title="Privacy">6. ~privacy</h2>

~INFORMATIVE

		<section id="info_disclosure">
<h3 title="Information disclosure">6.1. 情報の流出</h3>
<p>
注意深く細工された計時~攻撃の利用により、末端利用者による
閲覧／行動
の履歴が流出する可能性がある。
例えば、~unload時刻から前の~pageの~unload~handlerに要した時間が明らかにされ，利用者の~login-statusの推定-に利用され得る。
これらの攻撃は、前の~naviを含む計時~情報が~accessされる際に，`計時~許可-検査$を施行することにより軽減される。
`RESOURCE-TIMING-2$r
◎
There is the potential for disclosing an end-user's browsing and activity history by using carefully crafted timing attacks. For instance, the unloading time reveals how long the previous page takes to execute its unload handler, which could be used to infer the user's login status. These attacks have been mitigated by enforcing the timing allow check algorithm when timing information involving the previous navigation is accessed. [RESOURCE-TIMING-2]
</p>

<p>
`緩い同一生成元~policy$は、文書~間に渡る，未承認の訪問に対する十分な保護を提供しない。
共有~hostにおいては、信頼できない第三者が，同じ IP ~addressの異なる~port上で~HTTP~serverを~hostし得る。
◎
The relaxed same origin policy doesn't provide sufficient protection against unauthorized visits across documents. In shared hosting, an untrusted third party is able to host an HTTP server at the same IP address but on a different port.
</p>
		</section>

		<section id="cross-directory">
<h3 title="Cross-directory access">6.2. ~directory間をまたがる~access</h3>
<p>
同じ~host名を共有する異なる~page，例えば 同じ~siteに~hostされている，利用者が生成した内容を伴う, 異なる作者による内容は、~path名に基いて~accessを制約するような特色機能が存在しないため，`同一生成元$から来たものと見なされる。
これらの~page間の~naviに際しては、後の~pageから，~redirectや `unload$et ~eventに対する計時など，前の~pageの計時~情報への~accessが可能になる。
◎
Different pages sharing one host name, for example contents from different authors hosted on sites with user generated content are considered from the same origin because there is no feature to restrict the access by pathname. Navigating between these pages allows a latter page to access timing information of the previous one, such as timing regarding redirection and unload event.
</p>

		</section>
	</section>

	<section id="security">
<h2 title="Security">7. 保安</h2>

~INFORMATIVE

<p>
`PerformanceNavigationTiming$I
~interfaceは、`現在の文書$により~loadされる どの資源
— ~web~pageや~workerなど —
に対しても，文書の計時~情報を公開する。
`PerformanceNavigationTiming$I ~interfaceへの~accessを制限するため、`計時~許可-検査$が施行される
—
`RESOURCE-TIMING$r の
<a href="~RTIMING#cross-origin-resources">非同一生成元の資源 節</a>
に述べられるように、一部の属性は，既定で~zeroに設定される。
資源の提供者は、 `Timing-Allow-Origin$h ~HTTP応答~headerを追加することにより、`現在の文書$に対する計時~情報すべてが収集されることを明示的に許容できる
— それは、計時~情報への~accessが許容される~domainを指定する。
◎
The PerformanceNavigationTiming interface exposes timing information for the current document to any resource loaded by the document, such as a web page or a worker. To limit the access to the PerformanceNavigationTiming interface, the timing allow check algorithm is enforced and certain attributes are set to zero, as described in 4.5 Cross-origin Resources [RESOURCE-TIMING]. Resource providers can explicitly allow all timing information to be collected for a current document by adding the Timing-Allow-Origin HTTP response header, which specifies the domains that are allowed to access the timing information.
</p>



		<section id="authentication">
<h3 title="Detecting proxy servers">7.1. ~proxy~serverの検出法</h3>
<p>
~UAと~web~serverとの間に~proxyが配備されている場合、
`connectStart$m 属性と `connectEnd$m 属性との間の時区間は、 ~web~serverではなく，~proxyと~UAとの間の遅延を示すものになる。
それにより、~web~serverは，~proxyの存在を推定できる可能性がある。
SOCKS ~proxyについては、この時区間には~proxy認証に要した時間と~proxyが~web~serverへの接続に要した時間も含まれ，~proxyの検出を難しくする。
~HTTP~proxyの場合、~UAは~proxy~serverについての知識を一切持たないこともあるので、この攻撃を常に軽減できるとは限らない。
◎
In case a proxy is deployed between the user agent and the web server, the time interval between the connectStart and the connectEnd attributes indicates the delay between the user agent and the proxy instead of the web server. With that, web server can potentially infer the existence of the proxy. For SOCKS proxy, this time interval includes the proxy authentication time and time the proxy takes to connect to the web server, which obfuscate the proxy detection. In case of an HTTP proxy, the user agent might not have any knowledge about the proxy server at all so it's not always feasible to mitigate this attack.
</p>

		</section>
	</section>
	<section id="obsolete">
<h2 title="Obsolete">A. 非推奨</h2>

<p>
この節では、以前に
`NAVIGATION-TIMING$r Level 1
にて導入された属性, ~interfaceを定義し，後方互換性のために ここに保つ。
作者には、以下の~interfaceを利用するべきでない
— 新たな `PerformanceNavigationTiming$I ~interfaceを利用することを強く勧める。
<a href="#sotd" >変更点と改善点の要約</a>を見よ。
◎
This section defines attributes and interfaces previously introduced in [NAVIGATION-TIMING] Level 1 and are kept here for backwards compatibility. Authors should not use the following interfaces and are strongly advised to use the new PerformanceNavigationTiming interface—see summary of changes and improvements.
</p>

<p class="trans-note">【
以下、この節の内容の和訳は
`NAVIGATION-TIMING$r の
<a href="navigation-timing-ja.html#sec-navigation-timing">和訳（ 4 節）</a>
に委譲（ただし、細かい点で一部異なる部分がある（整数~型の属性の型, 定数~値）の追加など）。
】</p>

	</section>

</main></div><!-- MAIN -->

	<section id="acknowledgements">
<h2 title="Acknowledgments">B. 謝辞</h2>

<p>
次の方々による協力に感謝する：
</p>

<p>
Thanks to Anne Van Kesteren, Arvind Jain, Boris Zbarsky, Jason Weber, Jonas Sicking, James Simonsen, Karen Anderson, Nic Jansma, Philippe Le Hegaret, Steve Souders, Todd Reifsteck, Tony Gentilcore, William Chan and Zhiheng Wang for their contributions to this work.
</p>

	</section>
	<section id="references" class="appendix">
<h2 title="References">C. 参照文献</h2>

		<section id="normative-references">
<h3 title="Normative References">C.1. 文献（規範）</h3>

<script type="text/plain" class="ref_data">
[HR-TIME-2]
    High Resolution Time Level 2. Ilya Grigorik; James Simonsen; Jatinder Mann. W3C. 1 November 2016. W3C Candidate Recommendation. URL: https://www.w3.org/TR/hr-time-2/ 
[HTML5]
    HTML5. Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Theresa O’Connor; Silvia Pfeiffer. W3C. 28 October 2014. W3C Recommendation. URL: https://www.w3.org/TR/html5/ 
[RESOURCE-HINTS]
    Resource Hints. Ilya Grigorik. W3C. 13 December 2016. W3C Working Draft. URL: https://www.w3.org/TR/resource-hints/ 
[RESOURCE-TIMING]
    Resource Timing Level 1. Arvind Jain; Todd Reifsteck; Jatinder Mann; Zhiheng Wang; Anderson Quach. W3C. 21 July 2016. W3C Candidate Recommendation. URL: https://www.w3.org/TR/resource-timing-1/ 
[RFC2119]
    Key words for use in RFCs to Indicate Requirement Levels. S. Bradner. IETF. March 1997. Best Current Practice. URL: https://tools.ietf.org/html/rfc2119 
[RFC2616]
    Hypertext Transfer Protocol -- HTTP/1.1. R. Fielding; J. Gettys; J. Mogul; H. Frystyk; L. Masinter; P. Leach; T. Berners-Lee. IETF. June 1999. Draft Standard. URL: https://tools.ietf.org/html/rfc2616 
[RFC6454]
    The Web Origin Concept. A. Barth. IETF. December 2011. Proposed Standard. URL: https://tools.ietf.org/html/rfc6454 
[RFC7230]
    Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing. R. Fielding, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: https://tools.ietf.org/html/rfc7230 
[SERVICE-WORKERS]
    Service Workers 1. Alex Russell; Jungkee Song; Jake Archibald; Marijn Kruisselbrink. W3C. 11 October 2016. W3C Working Draft. URL: https://www.w3.org/TR/service-workers-1/ 
[WebIDL]
    Web IDL. Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. 15 December 2016. W3C Working Draft. URL: https://www.w3.org/TR/WebIDL-1/ 
</script>

		</section>
		<section id="informative-references">
<h3 title="Informative References">C.2. 文献（参考）</h3>

<script type="text/plain" class="ref_data">
[ECMASCRIPT]
    ECMAScript Language Specification. Ecma International. URL: https://tc39.github.io/ecma262/ 
[JSMEASURE]
    Measuring Client-Perceived Response Times on the WWW. Ramakrishnan Rajamony; Mootaz Elnozahy.March 2001. The Proceedings of the 3rd USENIX Symposium on Internet Technologies and Systems (USITS). URL: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.69.7329&rep=rep1&type=pdf 
[NAVIGATION-TIMING]
    Navigation Timing. Zhiheng Wang. W3C. 17 December 2012. W3C Recommendation. URL: https://www.w3.org/TR/navigation-timing/ 
[PERFORMANCE-TIMELINE-2]
    Performance Timeline Level 2. Ilya Grigorik; Jatinder Mann; Zhiheng Wang. W3C. 8 December 2016. W3C Candidate Recommendation. URL: https://www.w3.org/TR/performance-timeline-2/ 
[RESOURCE-TIMING-2]
    Resource Timing Level 2. Todd Reifsteck; Ilya Grigorik; Arvind Jain; Jatinder Mann; Zhiheng Wang; Anderson Quach. W3C. 3 November 2016. W3C Working Draft. URL: https://www.w3.org/TR/resource-timing-2/ 
[RFC7234]
    Hypertext Transfer Protocol (HTTP/1.1): Caching. R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: https://tools.ietf.org/html/rfc7234 
[WEBIDL]
    Web IDL. Cameron McCormack; Boris Zbarsky; Tobie Langel. W3C. 15 December 2016. W3C Working Draft. URL: https://www.w3.org/TR/WebIDL-1/ 
</script>

		</section>
	</section>


<!--% DATA SECTION -->

</body>
</html>
