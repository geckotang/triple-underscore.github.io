<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>CSS カスケード変数のためのカスタムプロパティ — CSS Custom Properties for Cascading Variables Module Level 1 （日本語訳）</title>

<meta name="keywords" content="カスタム,プロパティ,カスケード,変数,CSS,仕様,W3C">

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-css.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
computed-value-time:
cssom-api:cssom
</script>


<script >

COMMON_DATA.init = function(expanded){

//	Util.del_j(); //checked 2015-12-03 spec

	return {
		original_url: 'https://drafts.csswg.org/css-variables/',
//		original_url: 'http://www.w3.org/TR/css-variables-1/',
		spec_status: 'ED',
		main: 'MAIN',
		toc: 'contents',
		fill_text_link: '#_versions > dd, #references dd',
		alt_refs: 'references',
		ref_id_prefix: 'biblio-',
		ref_id_lowercase: true,
		word_switch: 'replace_table'
	};
}
</script>

<!--% style -->
<style type="text/css" media="screen" >

#_samples_matrix small {
	white-space:pre;
}

samp {
	white-space: nowrap;
}

</style>

</head>

<body>


<aside class="trans-meta">
<h1>CSS Custom Properties for Cascading Variables Module Level 1 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.w3.org/">W3C</a> により，副題の日付にて<strong >編集者草案</strong>として公開された
<a id="_SPEC_URL">CSS Custom Properties for Cascading Variables Module Level 1</a>
を日本語に翻訳したものです。
<strong >この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語版は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p >
更新：<time>2016-05-22</time>
（公開：<time>2012-07-10</time> ）
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>


<header>

<div><a href="http://www.w3.org/" id="_W3C">W3C</a></div>

	<hgroup>
<h1 id="title">カスケード変数のための CSS カスタムプロパティ — CSS Custom Properties for Cascading Variables Module Level 1</h1>
<h2 id="subtitle">2016 年 5 月 21 日付 編集者草案</h2>
	</hgroup>

<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dt title="Editor’s Draft:">編集者草案</dt>
	<dd>https://drafts.csswg.org/css-variables/</dd>

	<dt title="Latest published version:">最新発行バージョン</dt>
	<dd>https://www.w3.org/TR/css-variables-1/</dd>

	<dt title="Previous Versions:">以前のバージョン</dt>
	<dd>https://www.w3.org/TR/2015/CR-css-variables-1-20151203/</dd>
	<dd>https://www.w3.org/TR/2014/WD-css-variables-1-20140506/</dd>
	<dd>https://www.w3.org/TR/2013/WD-css-variables-1-20130620/</dd>
	<dd>https://www.w3.org/TR/2013/WD-css-variables-20130312/</dd>
	<dd>https://www.w3.org/TR/2012/WD-css-variables-20120410/</dd>

	<dt title="Test Suite:">テスト一式</dt>
	<dd>http://test.csswg.org/suites/css-variables-1_dev/nightly-unstable/</dd>

	<dt title="Issue Tracking:">最新の課題</dt>
	<dd><a href="https://github.com/w3c/csswg-drafts/issues/">GitHub</a></dd>

	<dt title="Editor:">編集</dt>
	<dd><a href="http://xanthir.com/contact">Tab Atkins Jr.</a> (Google)</dd>

</dl>

<small class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
© 2016
<a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
(<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
<a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
<a href="http://www.keio.ac.jp/">Keio</a>,
<a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
rules apply.
</small>

</header>


	<section id="abstract">
<h2 title="Abstract">要約</h2>

<p class="p-summary">
このモジュールは、すべての CSS プロパティにて受理される新たなプリミティブ値型として，カスケード変数（ cascading variable ）を導入し、それらを定義するためのカスタムプロパティも導入する。
<a href="http://www.w3.org/TR/CSS/">CSS</a>
は、（ HTML や XML などの）構造を備える文書から，
スクリーン, 紙, スピーチ, 等々
の媒体への具現化法を記述するための言語である。
<span lang="en">
This module introduces cascading variables as a new primitive value type that is accepted by all CSS properties, and custom properties for defining them. CSS is a language for describing the rendering of structured documents (such as HTML and XML) on screen, on paper, in speech, etc.
</span></p>


	</section>
	<section id="status">

<h2 title="Status of this document">この文書の位置付け</h2>

<p>
<!-- 
この節では、発行時点における…
 -->
これは編集者草案の公開の複製です…
<span class="trans-note">【
以下，この節の内容は
<a href="css-common-ja.html#status" >CSS 日本語訳 共通ページ</a>
に委譲
】</span></p>

<!-- 
<p>
暫定的な
<a href="https://test.csswg.org/harness/review/css-variables-1_dev/">実装報告</a>
が可用です。
<span lang="en">
A preliminary implementation report is available.
</span></p>

<p>
最後の草案からの変更点は、<a href="#changes">変更点</a>節に。
<span lang="en">
For changes since the last draft, see the Changes section.
</span></p>
-->


	</section>



	<nav id="contents" class="toc">
<h2 title="Table of contents">目次</h2>
<!--  --></nav>

<main id="MAIN">

	<section id="intro">
<h2 title="Introduction">1. 序論</h2>

<p>
<em>この節は規定ではない。</em>
<span lang="en">
This section is not normative.
</span></p>

<p>
巨大な文書やアプリケーションは（あるいは小さなものですら）、相当量の CSS を含み得る。
CSS ファイルの中の値の多くは、同じデータを繰り返すことになる。
例えば、色の体系を確立して，全体を通して数個の色を再利用しているサイトがあったとする。
このデータを弄ることは、 CSS ファイルの中に散らばっている（あるいは複数ファイルにわたっている）がために，難しく誤り易い作業にもなりかねず、また，検索置換も容易になるとは限らない。
<span lang="en">
Large documents or applications (and even small ones) can contain quite a bit of CSS. Many of the values in the CSS file will be duplicate data; for example, a site may establish a color scheme and reuse three or four colors throughout the site. Altering this data can be difficult and error-prone, since it’s scattered throughout the CSS file (and possibly across multiple files), and may not be amenable to Find-and-Replace.
</span></p>

<p>
このモジュールは、<a>カスタムプロパティ</a>と総称される，作者定義によるプロパティの族を導入する。
それは、スタイルシート作成者（以下，単に “作者” ）が，自身が選んだ名前によるプロパティに任意の値をあてがい、
<a>var()</a> 関数を通して，それらの値を文書内の至る所にある他のプロパティに 利用できるようにする。
これにより、見かけから意味が汲み取れない値にも，用途に見合った体系的な名前を付けられるようになり、巨大なファイルも読み取り易くなる。
また、<a>カスタムプロパティ</a>の中で一箇所の値を変更するだけで，それが定義する変数を利用している箇所すべてに自動的に伝播することになるので、その種のファイル編集も格段に容易かつ誤り難くなる。
<span lang="en">
This module introduces a family of custom author-defined properties known collectively as custom properties, which allow an author to assign arbitrary values to a property with an author-chosen name, and the var() function, which allow an author to then use those values in other properties elsewhere in the document. This makes it easier to read large files, as seemingly-arbitrary values now have informative names, and makes editing such files much easier and less error-prone, as one only has to change the value once, in the custom property, and the change will propagate to all uses of that variable automatically.
</span></p>

	</section>
	<section id="defining-variables">
<h2 title="Defining Custom Properties: the --* family of properties">2. カスタムプロパティを定義する： プロパティの族 <span class="property">--<var>*</var></span></h2>

<p>
この仕様は、<a>カスタムプロパティ</a>と呼ばれる，プロパティの自由な（ open-ended ）集合を定義する。
それは、他のプロパティ値の中の <a>var()</a> 関数を置換する値を定義するために利用される。
<span lang="en">
This specification defines an open-ended set of properties called custom properties, which, among other things, are used to define the substitution value of var() functions.
</span></p>

<!-- ※
<p class="trans-note">【
“置換” — この仕様の語 置換は、 “一時的” な含みを持つ置換（ substitute ）を表す — “永続的” な含みを持つ “replace” ではなく。
】</p>
 -->

<table class="propdef"><tbody><tr><th>名前
</th><td><dfn id="propdef-" class="property">--<var>*</var></dfn>

</td></tr><tr><th>値
</th><td>
<a class="production">&lt;declaration-value&gt;</a>

</td></tr><tr><th>初期値
</th><td>（ “空値” — 注釈文を見よ）
<span lang="en">(nothing, see prose)</span>

</td></tr><tr><th>適用対象
</th><td>すべての要素
<span lang="en">
all elements
</span>

</td></tr><tr><th>継承
</th><td>される<span lang="en">yes</span>

</td></tr><tr><th>百分率
</th><td>利用不可

</td></tr><tr><th>媒体</th><td>すべて
</td></tr><tr><th>算出値
</th><td>
値の中の変数（ <a>var()</a> ）は<a>置換され</a>た，指定値（ただし、<a href="#invalid-variables">無効な変数</a>についての注釈文も見よ）
<span lang="en">
specified value with variables substituted (but see prose for "invalid variables")
</span>

</td></tr><tr><th>アニメーション
</th><td>不可<span lang="en">no</span>

</td></tr></tbody></table>

<p>
<dfn id="custom-property">カスタムプロパティ</dfn>
は、名前が "<code>--</code>" から開始される任意のプロパティである。
例えば
<samp class="property">--foo</samp>
の様に。
<dfn class="production" id="typedef-custom-property-name">&lt;custom-property-name&gt;</dfn>
生成規則がこれに対応する：
それは、2 個の dash から開始される，任意の妥当な<a>識別子</a>として、定義される。
<a>カスタムプロパティ</a>は、もっぱら作者／利用者から利用されるものである。
CSS がここに示されるものを超える意味を与えることは決してない。
<span lang="en">
A custom property is any property whose name starts with two dashes (U+002D HYPHEN-MINUS), like --foo. The &lt;custom-property-name&gt; production corresponds to this: it’s defined as any valid identifier that starts with two dashes. Custom properties are solely for use by authors and users; CSS will never give them a meaning beyond what is presented here.
</span></p>


<p class="trans-note">【
この名前は、ベンダ接頭辞­付きのプロパティ（例：
<samp class="css">-webkit-foo</samp>
）からベンダ接頭辞を取り除いたもの（例：
<samp class="css">--foo</samp>
）と捉えることもできる（すなわち、作者­自身が “匿名のベンダ” である）。
そのような捉え方を意図して命名されているのかもしれない。
】</p>

<div class="example">

<p>
カスタムプロパティは、多目的に利用できる変数を定義し，
<a>var()</a> 記法で参照される。
例えば，色の小セットを一貫してデザインに利用するページは、それらの色をカスタムプロパティに格納した上で，変数を通して利用できる：
<span lang="en">
Custom properties define variables, referenced with the var() notation, which can be used for many purposes. For example, a page that consistently uses a small set of colors in its design can store the colors in custom properties and use them with variables:
</span></p>

<pre>
<a class="pseudo">:root</a> {
  --main-color: #06c;
  --accent-color: #006;
}
/* <span class="comment" title="The rest of the CSS file"
>CSS ファイルの残りの部分</span> */
#foo h1 {
  <a>color</a>: var(--main-color);
}
</pre>

<p>
覚え易い色の命名により、色コードの中の見つけ難い誤記が防がれ，テーマ色が絶えず変更されるような場合でも、ウェブページ内のすべてのスタイルシートに渡って多数の編集を行わずとも，単純な一箇所（カスタムプロパティ値）の変更に集中すれば済むようになる。
<span lang="en">
The naming provides a mnemonic for the colors, prevents difficult-to-spot typos in the color codes, and if the theme colors are ever changed, focuses the change on one simple spot (the custom property value) rather than requiring many edits across all stylesheets in the webpage.
</span></p>

<p class="trans-note">【
<samp class="value">var(--main-color)</samp>
が参照するのは，［［
それを利用するプロパティ
］が適用される要素
］上の
<samp class="property">--main-color</samp>
プロパティの値になる。
この例では，
<samp class="property">--main-color</samp>
が文書のルート要素­上（ <a class="pseudo">:root</a> ）に宣言されているので、その値は，<a href="#as-normal-property" >普通の継承プロパティと同様に</a>文書内のどの要素にも（別の
<samp class="property">--main-color</samp>
で上書きされない限り）継承され、その結果，どの
<samp class="value">var(--main-color)</samp>
も値 <samp class="value">#06c</samp> に置換されることになる。
】</p>

</div>

<p>
他の CSS プロパティと異なり、カスタムプロパティ名の文字の大小は，
<a href="http://dom.spec.whatwg.org/#case-sensitive">区別される</a>。
<span lang="en">
Unlike other CSS properties, custom property names are case-sensitive.
</span></p>

<div class="example">

<p>
<samp class="css">--foo</samp>
および
<samp class="css">--FOO</samp>
のいずれも名前として妥当であるが，それらは別々のプロパティであり、
<samp class="value">var(--foo)</samp>
の利用は前者を指す一方,
<samp class="value">var(--FOO)</samp>
の利用は後者を指すことになる。
<span lang="en">
While both --foo and --FOO are valid, they are distinct properties - using var(--foo) will refer to the first one, while using var(--FOO) will refer to the second.
</span></p>

</div>


<p>
カスタムプロパティは， <a class="property">all</a> プロパティにより再設定されることは<strong >ない</strong>。
<span class="note">
将来的には、すべての変数を再設定するプロパティの導入が考えられている。
</span>
<span lang="en">
Custom properties are not reset by the all property. We may define a property in the future that resets all variables.
</span></p>

<p>
他の任意のプロパティと同じ意味で、カスタムプロパティにも <a>CSS 全域キーワード</a>を利用できる。
<span lang="en">
The CSS-wide keywords can be used in custom properties, with the same meaning as in any another property.
</span></p>

<p class="note">注記：
すなわち それらは、通常のように <a>カスケード値</a>の時点で解釈され，カスタムプロパティ値のように持続的に保全されることはない†。
したがって，対応する変数が解決される時点で置換されることもない。
<span lang="en">
Note: That is, they’re interpreted at cascaded-value time as normal, and are not preserved as the custom property’s value, and thus are not substituted in by the corresponding variable.
</span></p>

<div class="trans-note">
<p>【†
すなわち，カスタムプロパティに対する全域キーワード値は、 <a>var()</a> 関数が解決される前
— 算出値を得る前 —
の段階で，<a>指定値</a>（すなわち，初期値または継承値）にされる。
例えば，次のスタイルシート：
</p>

<pre>
p {
  --foo: inherit;
  color: var(--foo);
}
</pre>

<p>
における
<samp class="value">var(--foo)</samp> は、［
<code class="value">inherit</code> <em>ではなく</em>，
<code class="property">--foo</code> が継承する値
］に置換されることになる。
従って、
<code>p</code> 要素の <code class="property">color</code>
は，その先祖の［
<code class="property">color</code> <em>ではなく</em>,
<code class="property">--foo</code> 
］プロパティの値をとることになる。
】</p>
</div>


<p class="note">注記：
このモジュールは、 “変数” を作成するための， <a>var()</a> による<a>カスタムプロパティ</a>の用法に力点を置いているが、スクリプトから構文解析／作動されるような，実際のカスタムプロパティとしても利用し得る。
CSS Extensions 仕様
<a>[CSS-EXTENSIONS]</a>
が、これらのユースケースについて拡張し，より利用し易いものになると予期されている。
<span lang="en">
Note: While this module focuses on the use of custom properties with the var() function to create “variables”, they can also be used as actual custom properties, parsed by and acted on by script. It’s expected that the CSS Extensions spec [CSS-EXTENSIONS] will expand on these use-cases and make them easier to do.
</span></p>



		<section id="syntax">
<h3 title="Custom Property Value Syntax">2.1. カスタムプロパティ値の構文</h3>

<div >
<p>
<a>カスタムプロパティ</a>に許容される構文は非常に寛容なものにされている。
<a class="production">&lt;declaration-value&gt;</a>
生成規則は、 1 個以上のトークンの並びであって, 次に挙げるトークンは含まないような， <em>任意の</em> 並びに合致する：
</p>

<ul>
	<li ><a>&lt;bad-string-token&gt;</a></li>
	<li ><a>&lt;bad-url-token&gt;</a></li>
	<li >対になってない，括弧類：
<a>&lt;)-token&gt;</a>,
<a>&lt;]-token&gt;</a>,
<a>&lt;}-token&gt;</a>
</li>
	<li >トップレベルの <a>&lt;semicolon-token&gt;</a></li>
	<li >トップレベルの, 値に "<code>!</code>" を伴う，<a>&lt;delim-token&gt;</a></li>

</ul>

<p lang="en">
The allowed syntax for custom properties is extremely permissive. The &lt;declaration-value&gt; production matches any sequence of one or more tokens, so long as the sequence does not contain &lt;bad-string-token&gt;, &lt;bad-url-token&gt;, unmatched &lt;)-token&gt;, &lt;]-token&gt;, or &lt;}-token&gt;, or top-level &lt;semicolon-token&gt; tokens or &lt;delim-token&gt; tokens with a value of "!".
</p>

</div>

<p>
加えて、<a>カスタムプロパティ</a>の値が
<a>var()</a> 参照を含んでいる場合、その <a>var()</a> 参照は，指定された <a>var()</a> 文法に則って妥当でなければならない、
さもなければ、<a>カスタムプロパティ</a>は無効であり，無視されなければならない。
<span lang="en">
In addition, if the value of a custom property contains a var() reference, the var() reference must be valid according to the specified var() grammar. If not, the custom property is invalid and must be ignored.
</span></p>




<p class="note">注記：
この定義と一般 CSS 構文規則から、カスタムプロパティ値は，対になってない引用符や括弧類を決して含まず、再び直列化される際には，それを囲っているスタイル規則などの, より大きな構文 構成子に影響することはないことが導き出される。
<span lang="en">
Note: This definition, along with the general CSS syntax rules, implies that a custom property value never includes an unmatched quote or bracket, and so cannot have any effect on larger syntax constructs, like the enclosing style rule, when reserialized.
</span></p>

<p class="note">注記：
カスタムプロパティは末尾に
<a>!important</a>
を含み得るが、これは CSS 構文解析器†によりプロパティの値から自動的に除去された上で，カスタムプロパティを CSS カスケードの中で “important” にする。
言い換えれば、トップレベルの "<code>!</code>" 文字の禁止は
<code class="css">!important</code>
の利用を妨げるものではない。
<code class="css">!important</code>
は構文検査の前に除去されるので。
<span lang="en">
Note: Custom properties can contain a trailing !important, but this is automatically removed from the property’s value by the CSS parser, and makes the custom property "important" in the CSS cascade. In other words, the prohibition on top-level "!" characters does not prevent !important from being used, as the !important is removed before syntax checking happens.
</span></p>

<p class="trans-note">【
†
<a href="https://drafts.csswg.org/css-syntax/" >CSS Syntax 仕様</a>
にて定義される，CSS 構文解析器（各種 CSS 仕様に固有の構文を解析するものではなく，その前段階の一般­構文を解析する構文解析器）を指す。
この仕様に現れる語 構文解析の多くも，同様の意味。
】</p>

<p class="note">注記：
<a>&lt;declaration-value&gt;</a>
は，少なくとも１個以上のトークンを表現しなければならないが、その１個のトークンが空白であってもよい。
従って、
<samp class="css">--foo:&nbsp;;</samp>
は妥当であり，対応する
<samp class="value">var(--foo)</samp>
の呼び出しは、１個のスペースをその置換値に持つことになる。
一方で
<samp class="css">--foo:;</samp>
は無効になる。
<span lang="en">
Note: While &lt;declaration-value&gt; must represent at least one token, that one token may be whitespace. This implies that --foo: ; is valid, and the corresponding var(--foo) call would have a single space as its substitution value, but --foo:; is invalid.
</span></p>

<div class="example">

<p>
例えば，次のものは妥当なカスタムプロパティである：
<span lang="en">
For example, the following is a valid custom property:
</span></p>

<pre>
--foo: if(x &gt; 5) this.width = 10;</pre>

<p>
この値は、通常のどのプロパティの中でも無効なので，<em>変数</em> としては明らかに無用であるが、 JavaScript からの読み取りを通して作用し得る。
<span lang="en">
While this value is obviously useless as a variable, as it would be invalid in any normal property, it might be read and acted on by JavaScript.
</span></p>

</div>

<p>
［
カスタムプロパティの値, および
カスタムプロパティに置換される <a>var()</a> 関数の値
］の文字大小は、<em>区別され</em>，作者が与えた元々の文字大小が保全されなければならない。
（多くの CSS 値は，<a>ASCII 文字大小無視</a>であり、 UA は それらを大小いずれかに “正準化” できるが、カスタムプロパティには それは許容されない。）
<span lang="en">
The values of custom properties, and the values of var() functions substituted into custom properties, are case-sensitive, and must be preserved in their original author-given casing. (Many CSS values are ASCII case-insensitive, which user agents can take advantage of by "canonicalizing" them into a single casing, but that isn’t allowed for custom properties.)
</span></p>

<p>
<a>カスタムプロパティ</a>の<a>初期値</a>は空値，すなわち 何も無い — nothing である。
この初期値は， <a>var()</a> 記法に対する特別な作用を持つ。
詳細は <a>var()</a> を定義する節にて。
<span lang="en">
The initial value of a custom property is an empty value; that is, nothing at all. This initial value has a special interaction with the var() notation, which is explained in the section defining var().
</span></p>

<p id="as-normal-property">
カスタムプロパティは “普通の” プロパティであり，どの要素­上にも宣言し得る。
それは、通常の継承とカスケード規則に従って解決され，
<a class="css">@media</a>
その他の
<a>条件付き<!--1-->規則</a>
にも仕立て上げられる。
また、 HTML の <code>style</code> 属性の中でも利用でき，
CSSOM を利用して読み取り／設定もできる，等々…。
<span lang="en">
Custom properties are ordinary properties, so they can be declared on any element, are resolved with the normal inheritance and cascade rules, can be made conditional with @media and other conditional rules, can be used in HTML’s style attribute, can be read or set using the CSSOM, etc.
</span></p>

<p>
特に、それらは遷移させたりアニメートさせることすらできる
— ただし、 UA には，それらの内容を解釈するすべがないので、他の，補間が利かない値ペアに対するときと同様に、常に，
“50% の所で裏返す”
様な類いのふるまいになる。
また、 <a class="css">@keyframes</a> 規則の中で利用される
<span class="trans-note">【宣言される？】</span>
どの<a>カスタムプロパティ</a>も，
<dfn id="animation-tainted">アニメーション-tainted</dfn><!-- ※ -->
であるとされ、<a>アニメーション プロパティ</a>の中で <a>var()</a> 関数を通して参照されたときの扱われ方に影響する。
<span lang="en">
Notably, they can even be transitioned or animated, but since the UA has no way to interpret their contents, they always use the "flips at 50%" behavior that is used for any other pair of values that can’t be intelligently interpolated. However, any custom property used in a @keyframes rule becomes animation-tainted, which affects how it is treated when referred to via the var() function in an animation property.
</span></p>

<div class="example">
<p>
次のスタイル規則：
<span lang="en">
This style rule:
</span></p>

<pre>
:root {
  --header-color: #06c;
}
</pre>

<p>
は、ルート要素­上に名前
<samp class="property">--header-color</samp>
の<a>カスタムプロパティ</a>を宣言し，値
"<samp class="value">#06c</samp>"
をあてがう。
このプロパティは、文書の残りの部分の要素に継承される。
その値は <a>var()</a> 関数を通して参照できるようになる：
<span lang="en">
declares a custom property named --header-color on the root element, and assigns to it the value "#06c". This property is then inherited to the elements in the rest of the document. Its value can be referenced with the var() function:
</span></p>

<pre>
h1 { <a>background-color</a>: var(--header-color); }
</pre>

<p>
この規則は、
<samp class="css"><code class="property">background-color</code>: <code class="value">#06c</code>;</samp>
と記すことに等価であるが、変数名から色の用途が明らかになることに加え、ルート要素­上の
<samp class="property">--header-color</samp>
プロパティを変更すれば，文書内の他の要素­上で利用されているすべての
<samp class="value">var(--header-color)</samp>
が，一括して更新される。
<span lang="en">
The preceding rule is equivalent to writing background-color: #06c;, except that the variable name makes the origin of the color clearer, and if var(--header-color) is used on other elements in the document, all of the uses can be updated at once by changing the --header-color property on the root element.
</span></p>

</div>

<div class="example">
<p>
同じ名前の<a>カスタムプロパティ</a>が複数回 宣言されている場合、その解決には，標準のカスケード規則が利用される。
変数は常に，同じ要素­上に結び付けられているカスタムプロパティの<a>算出値</a>から値を取り出す：
<span lang="en">
If a custom property is declared multiple times, the standard cascade rules help resolve it. Variables always draw from the computed value of the associated custom property on the same element:
</span></p>

<pre>
:root { --color: blue; }
div { --color: green; }
#alert { --color: red; }
* { color: var(--color); }

<span>&lt;p&gt;僕はルート要素から blue を継承しています！&lt;/p&gt;
&lt;div&gt;俺には green が直に設定されている！&lt;/div&gt;
&lt;div id='alert'&gt;
  私は red が直に設定されているわ！
  &lt;p&gt;私も。でも直じゃなくて継承よ！&lt;/p&gt;
&lt;/div&gt;
<span lang="en">
&lt;p&gt;I inherited blue from the root element!&lt;/p&gt;
&lt;div&gt;I got green set directly on me!&lt;/div&gt;
&lt;div id='alert'&gt;
  While I got red set directly on me!
  &lt;p&gt;I’m red too, because of inheritance!&lt;/p&gt;
&lt;/div&gt;
</span></span></pre>


</div>

<div class="example">
<p>
現実における<a>カスタムプロパティ</a>の用例として、文字列を その利用箇所から容易に外へ分離して，国際化の維持管理を補助するものが挙げられる：
<span lang="en">
A real-world example of custom property usage is easily separating out strings from where they’re used, to aid in maintenance of internationalization:
</span></p>

<pre class="lang-css">
:root,
:root:lang(en) {--external-link: "external link";}
:root:lang(de) {--external-link: "externer Link";}
:root:lang(ja) {--external-link: "外部リンク";}

a[href^="http"]::after {
  content: " (" var(--external-link) ")"
}
</pre>

<p>
変数の宣言を別ファイルに分けて，翻訳の維持管理をより単純にすることもできる。
<span lang="en">
The variable declarations can even be kept in a separate file, to make maintaining the translations simpler.
</span></p>
</div>

		</section>
		<section id="cycles">
<h3 title="Resolving Dependency Cycles">2.2. 循環依存の解決法</h3>

<p>
<a>カスタムプロパティ</a>は、ほとんどの所では，評価されないままにされるが、その値の中の <a>var()</a> 関数の評価は許容されている。
そのため、<a>カスタムプロパティ</a>自身が，自身を指す <a>var()</a> を利用していたり、複数の<a>カスタムプロパティ</a>のそれぞれが，他方を指している場合に、循環依存が生じ得る。
<span lang="en">
Custom properties are left almost entirely unevaluated, except that they allow and evaluate the var() function in their value. This can create cyclic dependencies where a custom property uses a var() referring to itself, or two or more custom properties each attempt to refer to each other.
</span></p>

<p>
各要素に対し、各<a>カスタムプロパティ</a>に対応するノードからなる有向­依存関係グラフを作成する：
ある<a>カスタムプロパティ</a> <var>prop1</var> の値に，ある<a>カスタムプロパティ</a> <var>prop2</var>
<span class="note">
（ <var>prop1</var> と同じでもよい）
</span>
を指している† <a>var()</a> 関数が含まれている（ <a>var()</a> のフォールバック引数も込みで）ならば、 <var>prop1</var> とその <var>prop2</var> を辺で繋ぐ。
依存関係グラフの中にサイクルが存在するならば、そのサイクル内の<a>カスタムプロパティ</a>すべての算出値は，それらの初期値（無効なことが保証された値）になる。
<span lang="en">
For each element, create a directed dependency graph, containing nodes for each custom property. If the value of a custom property prop contains a var() function referring to the property var (including in the fallback argument of var()), add an edge between prop and the var. Edges are possible from a custom property to itself. If there is a cycle in the dependency graph, all the custom properties in the cycle must compute to their initial value (which is a guaranteed-invalid value).
</span></p>

<p class="trans-note">【†
後述の例に示される様に、 “指している” の定義は，見かけより複雑な所がある。
<!-- ※ -->
】</p>

<div class="example">
<p>
変数を安全に利用するカスタムプロパティの例を示す：
<span lang="en">
This example shows a custom property safely using a variable:
</span></p>

<pre>
:root {
  --main-color: #c06;
  --accent-background: linear-gradient(
      to top, var(--main-color), white
  );
}
</pre>
<p>
<samp class="property">--accent-background</samp>
プロパティは（あるいは
<samp class="value">var(--main-color)</samp>
を利用する他のプロパティも同様に）、
<samp class="property">--main-color</samp>
プロパティが変更されたときに自動的に更新されることになる。
<span lang="en">
The --accent-background property (along with any other properties that use var(--main-color)) will automatically update when the --main-color property is changed.
</span></p>

</div>

	<div class="example invalid-example">
<p>
一方で，次のものは、互いに依存する変数の無効なインスタンスの例になる：
<span lang="en">
On the other hand, this example shows an invalid instance of variables depending on each other:</span>
</p>

<pre>
:root {
  --one: calc(var(--two) + 20px);
  --two: calc(var(--one) - 20px);
}
</pre>
<p>
<samp class="property">--one</samp>
も
<samp class="property">--two</samp>
も、今や長さでなく，それぞれの初期値に算出される。
<span lang="en">
Both --one and --two now compute to their initial value, rather than lengths.
</span></p>

</div>

<p>
重要な点として、<a>カスタムプロパティ</a>の値の中のどの <a>var()</a> 関数も，<a>算出値の時点</a>で解決される
<span class="trans-note">【<a href="#substitute-a-var">置換される</a>】</span>
— したがって、その値が継承されるときには，<em>すでに</em> 解決されている —
ことを銘記しておく。
一般に，循環依存が生じるのは、同じ要素­上の複数のカスタムプロパティが互いを指すときに限られる。
要素­木の中で，先祖側, 子孫側 ２つの要素­上に定義されたカスタムプロパティの間で参照が循環することは、決してない。
<span lang="en">
It is important to note that custom properties resolve any var() functions in their values at computed-value time, which occurs before the value is inherited. In general, cyclic dependencies occur only when multiple custom properties on the same element refer to each other; custom properties defined on elements higher in the element tree can never cause a cyclic reference with properties defined on elements lower in the element tree.
</span></p>

<p class="trans-note">【
<dfn id="computed-value-time">算出値の時点</dfn> —
その定義への参照が明示的に与えられていないが、
<a>カスケード値の処理</a>
における，<a>算出値</a>を得る段階を指すと見られる。
】</p>

<div class="example">
<p>
例えば，次の構造における、３個のカスタムプロパティが循環することは<strong>ない</strong>。
すべて妥当な変数を定義する：
<span lang="en">
For example, given the following structure, these custom properties are not cyclic, and all define valid variables:
</span></p>

<pre>
&lt;one&gt;&lt;two&gt;&lt;three /&gt;&lt;/two&gt;&lt;/one&gt;
one   { --foo: 10px; }
two   { --bar: calc(var(--foo) + 10px); }
three { --foo: calc(var(--bar) + 10px); }
</pre>
<p>
<samp class="element">one</samp> 要素は、
<samp class="property">--foo</samp>
に対する値を定義する。
<samp class="element">two</samp> 要素は、この値を継承することに加え，
<samp class="css">foo</samp>
変数を利用して
<samp class="property">--bar</samp>
に値をあてがう。
最後に，
<samp class="element">three</samp> 要素は、［
変数が<em>置換された後の</em>
<samp class="property">--bar</samp> 値
］を継承する（言い換えれば、値
<samp class="value">calc(10px + 10px)</samp>
を見る）。
しかる後，その値を通して自身の
<samp class="property">--foo</samp>
を再定義する。
<samp class="element">three</samp> が継承する
<samp class="property">--bar</samp> 値は，
<samp class="element">one</samp> 上で定義される
<samp class="property">--foo</samp>
プロパティへの参照を最早含んでいないので、
<samp class="value">var(--bar)</samp>
変数を利用して
<samp class="property">--foo</samp>
を定義することは循環ではなく，（通常のプロパティの中で変数として参照されるときは）実際に最終的に
<samp class="value">30px</samp>
に解決される値を定義する。<!-- ※解決 -->
<span lang="en">
The &lt;one&gt; element defines a value for --foo. The &lt;two&gt; element inherits this value, and additionally assigns a value to --bar using the foo variable. Finally, the &lt;three&gt; element inherits the --bar value after variable substitution (in other words, it sees the value calc(10px + 10px)), and then redefines --foo in terms of that value. Since the value it inherited for --bar no longer contains a reference to the --foo property defined on &lt;one&gt;, defining --foo using the var(--bar) variable is not cyclic, and actually defines a value that will eventually (when referenced as a variable in a normal property) resolve to 30px.
</span></p>

</div>


		</section>
	</section>
	<section id="using-variables">
<h2 title="Using Cascading Variables: the var() notation">3. カスケード変数の用法： <code class="func">var()</code> 記法</h2>

<p>
<a>カスタムプロパティ</a>は、 <a>var()</a> 関数を通して別のプロパティの中で置換され得る値を与える。
<a>var()</a> の構文は次で与えられる：
<span lang="en">
The value of a custom property can be substituted into the value of another property with the var() function. The syntax of var() is:
</span></p>

<pre class="prod">
<dfn id="funcdef-var" class="func">var()</dfn> = var( <a>&lt;custom-property-name&gt;</a> [, <a>&lt;declaration-value&gt;</a> ]? )
</pre>

<p>
要素­上の任意のプロパティの中の値の任意の部分に代えて、この <a>var()</a> 関数を利用できる。
<a>var()</a> 関数を、プロパティ名や選択子, その他，プロパティ値の外側のもの として利用することはできない（そのようにしても、単に無効な構文になるか，変数とは繋がりの無い値になるだけである）。
<span lang="en">
The var() function can be used in place of any part of a value in any property on an element. The var() function can not be used as property names, selectors, or anything else besides property values. (Doing so usually produces invalid syntax, or else a value whose meaning has no connection to the variable.)
</span></p>


<p>
関数の最初の引数が、置換値†を供する<a>カスタムプロパティ</a>の，名前を与える。
関数に２番目の引数が供されている場合、それがフォールバック値になり，参照された<a>カスタムプロパティ</a>が無効であるときの置換値として利用される。
<span lang="en">
The first argument to the function is the name of the custom property to be substituted. The second argument to the function, if provided, is a fallback value, which is used as the substitution value when the referenced custom property is invalid.
</span></p>

<p class="trans-note">【†
明示的に述べられていないが、置換値を供するのは，［［
<a>var()</a> を値に利用するプロパティ
］が適用される要素
］上のカスタムプロパティの値になる。
】</p>

<p class="note">注記：
フォールバックの構文でも、<a>カスタムプロパティ</a>のそれと同様に，コンマが許容される。
例えば，
<samp class="value">var(--foo, red, blue)</samp>
は、フォールバック
<samp class="value">red, blue</samp>
を定義する。
すなわち，最初のコンマと関数の末尾までの間のすべてが、フォールバック値と見なされる。
<span lang="en">
Note: The syntax of the fallback, like that of custom properties, allows commas. For example, var(--foo, red, blue) defines a fallback of red, blue; that is, anything between the first comma and the end of the function is considered a fallback value.
</span></p>

<p>
プロパティに <a>var()</a> 関数が含まれていて, そのどれもが構文として妥当である場合、そのプロパティは、構文解析の時点では，妥当なものと見なされなければならない。
構文が検査されるのは、 <a>var()</a> 関数が<a>置換され</a>た後の，<a>算出値の時点</a>である。
<span lang="en">
If a property contains one or more var() functions, and those functions are syntactically valid, the entire property’s grammar must be assumed to be valid at parse time. It is only syntax-checked at computed-value time, after var() functions have been substituted.
</span></p>

<p>
<!-- 
<span class="trans-note">【要素­上の】</span>
-->
プロパティ <var >property</var> の値の中の <a>var()</a> <var>関数</var> を
<dfn id="substitute-a-var">置換する</dfn>
ためには、次を実行する：
<span lang="en">
To substitute a var() in a property’s value:
</span></p>

<ol>
	<li>
<p>
<var>関数</var> の最初の引数を名前に持つ<a>カスタムプロパティ</a>†を以下 <var>custom</var> と記す。
</p>

<p>
<var>custom</var> が <a>アニメーション-tainted</a> である, かつ
<var >property</var> が<a>アニメーション プロパティ</a>
— <a>animation</a> プロパティまたはその<a>冗長形プロパティ</a> —
である場合、以下， <var>custom</var> は初期値をとるものと扱う。
</p>

<p class="trans-note">【†
（当の要素­上, あるいはどこにも）宣言されていない場合、<a href="#as-normal-property" >普通のプロパティと同様に</a>，（暗黙的に）初期値／継承値をとる（どの要素も，あらゆる名前の<a>カスタムプロパティ</a>を “持つ” ）
— したがって，<a>算出値の時点で無効</a> —
と解釈されることになる。
】</p>

<p lang="en">
If the custom property named by the first argument to the var() function is animation-tainted, and the var() function is being used in the animation property or one of its longhands, treat the custom property as having its initial value for the rest of this algorithm.
</p>
	</li>

	<li><p>
<var>custom</var> が，初期値でない値をとる場合、 <var>関数</var> をその値に置き換える。
<span lang="en">
If the value of the custom property named by the first argument to the var() function is anything but the initial value, replace the var() function by the value of the corresponding custom property.
</span></p></li>

	<li><p>
他の場合、フォールバック値が <var>関数</var> の２番目の引数として与えられているならば，
<var>関数</var> を そのフォールバック値に置き換える。
このとき、そのフォールバック値の中にも <a>var()</a> 参照が在るならば、それらも<a>置換する</a>。
<span lang="en">
Otherwise, if the var() function has a fallback value as its second argument, replace the var() function by the fallback value. If there are any var() references in the fallback, substitute them as well.
</span></p></li>

	<li>
<p>
他の場合、 <var >property</var> は，<a>算出値の時点で無効</a>である。
<span lang="en">
Otherwise, the property containing the var() function is invalid at computed-value time.
</span></p>

<p class="note">注記：
<var >property</var> を<a>算出値の時点で無効</a>にするものは、他にもあり得る。
<span lang="en">
Note: Other things can also make a property invalid at computed-value time.
</span></p>
	</li>
</ol>

	<div class="example">
<p>
フォールバック値により、一種の安全弁付きコード（ defensive coding ）を書けるようになる。
例えば，より大きなアプリケーションに組み込むためのコンポーネントを作成する場合、変数をそのスタイル付けに利用すれば，コンポーネントをアプリケーションの他の部分に相応しい形に調整することも容易になる。
<span lang="en">
The fallback value allows for some types of defensive coding. For example, an author may create a component intended to be included in a larger application, and use variables to style it so that it’s easy for the author of the larger application to theme the component to match the rest of the app.
</span></p>

<p>
フォールバック機能が無ければ、アプリケーション作者は，コンポーネントが利用するすべての変数に値を供さなければならなくなる。
フォールバック機能があれば，コンポーネント作者が既定の値を供しておけるようになり、アプリケーション作者は，上書きしたい変数だけ値を供すれば済むようになる。
<span lang="en">
Without fallback, the app author must supply a value for every variable that your component uses. With fallback, the component author can supply defaults, so the app author only needs to supply values for the variables they wish to override.
</span></p>

<pre>
/* <span class="comment" title="In the component’s style:"
>コンポーネントのスタイル</span> */
.component .header { 
  color: var(--header-color, blue); 
}
.component .text { 
  color: var(--text-color, black); 
}
/* <span class="comment" title="In the larger application’s style:"
>より大きなアプリケーションのスタイル：</span> */
.component {
  --text-color: #080;
  /* <span class="comment" title="header-color isn’t set, and so remains blue, the fallback value"
><samp class="property">--header-color</samp> は設定されないのでフォールバック値の青色のまま。</span> */
}
</pre>

</div>

	<div class="example">

<p>
次のコードは、プロパティ名として 変数の利用を試みるので，不正な例になる：
<span lang="en">
For example, the following code incorrectly attempts to use a variable as a property name:
</span></p>

<pre>
.foo {
  --side: margin-top;
  var(--side): 20px;
}
</pre>
<p>
これは
<samp class="css"><code class="property">margin-top</code>: <code class="value">20px</code>;</samp>
を設定することに等価<em>でない</em>。
２番目の宣言は、単に無効なプロパティ名として構文エラーにされ，破棄される。
<span lang="en">
This is not equivalent to setting margin-top: 20px;. Instead, the second declaration is simply thrown away as a syntax error for having an invalid property name.
</span></p>

<p>
同様に、一部分が変数から供されるような単独のトークンを組み立てることもできない：
<span lang="en">
Similarly, you can’t build up a single token where part of it is provided by a variable:
</span></p>

<pre>
.foo {
  --gap: 20;
  margin-top: var(--gap)px;
}
</pre>
<p>
これもまた
<samp class="css"><code class="property">margin-top</code>: <code class="value">20px</code>;</samp>
（長さ）を設定することに等価<em>ではない</em>。
これは
<samp class="css"><code class="property">margin-top</code>: <code class="value">20 px</code>;</samp>
（値が，スペースを挟んだ 数と識別子の並び）と等価になり，単に
<a>margin-top</a>
プロパティに対する無効な値になる。
このような場合、
<a class="func">calc()</a>
式を利用すれば，同じものを妥当に得られる — 次の様に：
<span lang="en">
Again, this is not equivalent to setting margin-top: 20px; (a length). Instead, it’s equivalent to margin-top: 20 px; (a number followed by an ident), which is simply an invalid value for the margin-top property. Note, though, that calc() can be used to validly achieve the same thing, like so:
</span></p>

<pre>
.foo {
  --gap: 20;
  margin-top: calc(var(--gap) * 1px);
}
</pre>

</div>

<p>
<a>var()</a> 関数は、<a>算出値の時点</a>で<a>置換され</a>る。
宣言の中のすべての <a>var()</a> 関数が置換された時点で，それが無効ならば、その宣言は <a>算出値の時点で無効</a>になる。
<span lang="en">
var() functions are substituted at computed-value time. If a declaration, once all var() functions are substituted in, is invalid, the declaration is invalid at computed-value time.
</span></p>

<div class="example">
<p>
例えば，次の用法は、構文の観点からは問題ないが、変数が置換された後は無意味な結果になる：
<span lang="en">
For example, the following usage is fine from a syntax standpoint, but results in nonsense when the variable is substituted in:
</span></p>

<pre>
:root { --looks-valid: 20px; }
p { background-color: var(--looks-valid); }
</pre>

<p>
<samp class="value">20px</samp>
は
<a>background-color</a>
の値として無効なので、このプロパティのインスタンスは，代わりに
<code class="value">transparent</code> （
<a>background-color</a>
に対する<a>初期値</a>）に算出される。
<span lang="en">
Since 20px is an invalid value for background-color, this instance of the property computes to transparent (the initial value for background-color) instead.
</span></p>

<p>
プロパティが
<a>color</a>
など，既定で継承されるものならば、<a>初期値</a>ではなく<a>継承値</a>に算出される。
<span lang="en">
If the property was one that’s inherited by default, such as color, it would compute to the inherited value rather than the initial value.
</span></p>

</div>


		<section id="invalid-variables">
<h3 title="Invalid Variables">3.1. 無効な変数</h3>

<p>
<a>カスタムプロパティ</a>が<a>初期値</a>をとる場合、 <a>var()</a> 関数による置換に利用し得なくなる。
そのような場合、妥当なフォールバックが指定されていない限り，宣言は<a>算出値の時点で無効</a>になる。
<span lang="en">
When a custom property has its initial value, var() functions cannot use it for substitution. Attempting to do so makes the declaration invalid at computed-value time, unless a valid fallback is specified.
</span></p>

<p>
上で説明したように、宣言は，それが［
初期値をとる<a>カスタムプロパティ</a>を参照する <a>var()</a>
］を含む場合に，
<dfn id="invalid-at-computed-value-time">算出値の時点で無効</dfn>
になる。
あるいは，それが妥当な<a>カスタムプロパティ</a>を利用していても、プロパティ値が，その中の <a>var()</a> 関数が置換された後に妥当でなくなれば，無効になる。
これが生じた場合のプロパティの<a>算出値</a>は、それが<a>継承プロパティ</a>であるかどうかに応じて，そのプロパティの<a>継承値</a>／<a>初期値</a>になる — プロパティの値に <a>unset</a> キーワードが指定されていたかの様に。
<span lang="en">
A declaration can be invalid at computed-value time if it contains a var() that references a custom property with its initial value, as explained above, or if it uses a valid custom property, but the property value, after substituting its var() functions, is invalid. When this happens, the computed value of the property is either the property’s inherited value or its initial value depending on whether the property is inherited or not, respectively, as if the property’s value had been specified as the unset keyword.
</span></p>

<div class="example">
<p>
例えば，次のコードでは：
<span lang="en">
For example, in the following code:
</span></p>

<pre>
:root { --not-a-color: 20px; }
p { background-color: red; }
p { background-color: var(--not-a-color); }
</pre>

<p>
<samp class="element">p</samp> 要素の背景は、赤色（ red ）ではなく，
<a>background-color</a>
の<a>初期値</a>である透明色（ <a>transparent</a> ）になる。
<a>カスタムプロパティ</a>自身が <a>unset</a> されたり, 無効な <a>var()</a> 関数が含まれている場合も同じことが生じる。
<span lang="en">
the &lt;p&gt; elements will have transparent backgrounds (the initial value for background-color), rather than red backgrounds. The same would happen if the custom property itself was unset, or contained an invalid var() function.
</span></p>

<p>
このことと，作者が単にスタイルシートに直接的に
<samp class="css"><code class="property">background-color</code>: <code class="value">20px</code>;</samp>
と記した場合のふるまいとの差異に注意されたし。
それは通常の構文エラーなので，その規則は
<span class="trans-note">【
カスケード処理の
<a href="https://drafts.csswg.org/css-cascade-3/#filtering" >最初の段階</a>
で
】</span>
破棄され、その結果
<samp class="css"><code class="property">background-color</code>: <code class="value">red</code>;</samp>
規則が代わりに利用されることになる。
<span lang="en">
Note the difference between this and what happens if the author had just written background-color: 20px directly in their stylesheet - that would be a normal syntax error, which would cause the rule to be discarded, so the background-color: red rule would be used instead.
</span></p>

</div>

<p class="note">注記：
<a>算出値の時点で無効</a>の概念は、 <a>var()</a> 関数が他の構文エラーと異なり， “早期の段階で不合格” にし得ないがためにある。
プロパティ値が UA から無効なものと認識された時点では、
<span class="trans-note">【より優先順位の低い】</span>
他の<a>カスケード値</a>は，すでに破棄されている。
<span lang="en">
Note: The invalid at computed-value time concept exists because variables can’t "fail early" like other syntax errors can, so by the time the user agent realizes a property value is invalid, it’s already thrown away the other cascaded values.
</span></p>
		</section>
	</section>

	<section id="variables-in-shorthands">

<h3 title="Variables in Shorthand Properties">3.2. 簡略形プロパティにおける変数</h3>

<p>
<a>簡略形プロパティ</a>における <a>var()</a> 関数の利用には，ある種の特有の難しさがある。
<span lang="en">
The use of var() functions in shorthand properties presents some unique difficulties.
</span></p>

<p>
通例，簡略形プロパティの値は、構文解析­時に，対応する<a>冗長形プロパティ</a>の成分に分割され、それらの冗長形が<a>カスケード処理</a>に取り込まれた上で，元の簡略形の方は概ね破棄される。
しかしながら，簡略形に <a>var()</a> 関数が用いられた場合、どこへどの値があてがわれるかを指示できなくなる
— 実際，単独の <a>var()</a> 関数が 同時にいくつかの冗長形の値を置換し得るので、構文解析­時における分割が無理な場合もある。
<span lang="en">
Ordinarily, the value of a shorthand property is separated out into its component longhand properties at parse time, and then the longhands themselves participate in the cascade, with the shorthand more-or-less discarded. If a var() functions is used in a shorthand, however, one can’t tell what values are meant to go where; it may in fact be impossible to separate it out at parse time, as a single var() function may substitute in the value of several longhands at once.
</span></p>

<p>
これに対処するため、実装は，冗長形に［
簡略形に <a>var()</a> 関数が含まれているため，冗長形の値が <a>var()</a> 関数が置換されるまで待ち状態にある
］ことを指示する，特別な, 作者からは観測できないような
<dfn id="pending-substitution-value">置換待ちの<!--1-->値</dfn>
をあてがわなければならない。
この値は、通常のようにカスケードに取り込まれなければならず、算出値の時点で，最終的に<a>var()</a> 関数が置換された所で、その簡略形の値が構文解析された上で，冗長形に対する適切な値があてがわれなければならない。
<span lang="en">
To get around this, implementations must fill in longhands with a special, unobservable-to-authors pending-substitution value that indicates the shorthand contains a variable, and thus the longhand’s value is pending variable substitution. This value must then be cascaded as normal, and at computed-value time, after var() functions are finally substituted in, the shorthand must be parsed and the longhands must be given their appropriate values at that point.

 pending variable-substitution  variables are
</span></p>

<p>
<a>置換待ちの<!--1-->値</a>は、 API による観測が許容される所では，空文字列に直列化されなければならない。
<span lang="en">
Pending-substitution values must be serialized as the empty string, if an API allows them to be observed.
</span></p>

<p>
<a>[CSSOM]</a>
においては、簡略形プロパティの直列化が，対応する冗長形の値を適切に連結することを通して定義されているが、先と同様に，明示的な <a>var()</a> 関数を伴って指定されている簡略形については、代わりに，元の <a>var()</a> が含まれた値のまま直列化されなければならない。
他の簡略形に対しては、対応する いずれかの冗長形 下位プロパティに<a>置換待ちの<!--1-->値</a>がある場合、その簡略形の値は，空文字列に直列化されなければならない。
<span lang="en">
Similarly, while [CSSOM] defines that shorthand properties are serialized by appropriately concatenating the values of their corresponding longhands, shorthands that are specified with explicit var() functions must serialize to the original, var()-containing value. For other shorthands, if any of the longhand subproperties for that shorthand have pending-substitution values then the serialized value of the shorthand must be the empty string.
</span></p>

	</section>

	<section id="apis">
<h2 title="APIs">4. API</h2>

<p>
すべての<a>カスタムプロパティ</a><a>宣言</a>は
<a>大小区別フラグ</a> が set される。
<span lang="en">
All custom property declarations have the case-sensitive flag set.
</span></p>


<p class="note">注記：
カスタムプロパティは，名前の文字大小が区別されるので、
<a><code>CSSStyleDeclaration</code></a> オブジェクトの中に <strong>C</strong>amel<strong>C</strong>ase 形で現れることはない。
自動的 CamelCase 化を行うテキスト変換の類いは，これと互換性がとれない。
それらは、 <a><code>getPropertyValue()</code></a>, 等のインタフェースを通して，正しい名前でアクセスできる。
<span lang="en">
Note: Custom properties do not appear on a CSSStyleDeclaration object in camel-cased form, because their names may have both upper and lower case letters which indicate distinct custom properties. The sort of text transformation that automatic camel-casing performs is incompatible with this. They can still be accessed by their proper name via getPropertyValue()/etc.
</span></p>

		<section id="serializing-custom-props">
<h3 title="Serializing Custom Properties">4.1. カスタムプロパティの直列化処理</h3>

<p>
カスタムプロパティ名が直列化されるときには、作者から供された文字大小は保全されなければならない。
<span lang="en">
Custom property names must be serialized with the casing as provided by the author.
</span></p>

<p class="note">注記：
普通のプロパティは，その名前が ASCII 範囲に制約された上で, <a>ASCII 文字大小無視</a>になるので、実装は概して，名前を小文字化した上で直列化する。
<span lang="en">
Ordinarily, property names are restricted to the ASCII range and are ASCII case-insensitive, so implementations typically serialize the name lowercased.
</span></p>

		</section>
	</section>
	<section id="changes">
<h2 title="Changes since the May 6 2014 Last Call Working Draft">5. 2014 年 5 月 6 日付 最終作業草案からの変更点</h2>

<ul>

	<li>
簡略形が変数を利用している場合の，冗長形の直列化が定義された。
<span lang="en">
Serialization of longhands when shorthand uses a variable was defined.
</span></li>

	<li>
DOM による “文字大小無視” の定義へのリンクを追加。
<span lang="en">
Link to DOM’s definition of "case-sensitive".
</span></li>

	<li>
<a class="pseudo">:lang()</a> と伴に変数を利用して国際化に対応する，簡単な例を追加。
<span lang="en">
Added example of using variables with :lang() to do simple i18n.
</span></li>

	<li>
カスタムプロパティにおける <a>var()</a> の利用は、
<a>var()</a> 文法に対し妥当でなければならないことが明確化された。
<span lang="en">
Clarified that usage of var() in a custom property must be valid per the var() grammar.
</span></li>

</ul>
	</section>
	<section id="acks">
<h2 title="Acknowledgments">6. 謝辞</h2>

<p>
Many thanks to several people in the CSS Working Group for keeping the dream of variables alive over the years, particularly Daniel Glazman and David Hyatt. Thanks to multiple people on the mailing list for helping contribute to the development of this incarnation of variables, particularly Brian Kardell, David Baron, François Remy, Roland Steiner, and Shane Stephens.
</p>

	</section>
	<section id="priv-sec">
<h2 title="Privacy and Security Considerations">7. プライバシーと保安上の考慮点</h2>

<p>
この仕様が定義する仕組みは、作者が制御するページの中で，作者レベルのスタイル付け情報を使い回す以上のことはしない。
そのようなわけで、プライバシーや保安上の新たな考慮点はない。
<span lang="en">
This specification defines a purely author-level mechanism for passing styling information around within a page they control.
</span><span lang="en">
As such, there are no new privacy or security considerations.
</span></p>

	</section>
	<section id="conformance">
<h2 title="Conformance">適合性</h2>

<p class="trans-note">【
この節の訳は
<a href="css-common-ja.html#conformance" >CSS 日本語訳 共通ページ</a>
に委譲
】</p>

	</section>
	<section id="references">
<h2 title="References">参照文献</h2>

		<section id="normative">
<h3 title="Normative References">参照文献（規範）</h3>





<dl>

	<dt>[CSS-ANIMATIONS-1]</dt>
	<dd>CSS Animations Module Level 1</dd>
	<dd>https://drafts.csswg.org/css-animations-1/</dd>

	<dt>[CSS-CASCADE-4]</dt>
	<dd>Elika Etemad; Tab Atkins Jr.. CSS Cascading and Inheritance Level 4. 14 January 2016. CR.</dd>
	<dd>http://dev.w3.org/csswg/css-cascade/</dd>

	<dt>[CSS-CONDITIONAL-3]</dt>
	<dd>CSS Conditional Rules Module Level 3</dd>
	<dd>https://drafts.csswg.org/css-conditional-3/</dd>

	<dt>[CSS-SYNTAX-3]</dt>
	<dd>Tab Atkins Jr.; Simon Sapin. CSS Syntax Module Level 3. 20 February 2014. CR.</dd>
	<dd>http://dev.w3.org/csswg/css-syntax/</dd>

	<dt>[CSS-VALUES]</dt>
	<dd>Tab Atkins Jr.; Elika Etemad. CSS Values and Units Module Level 3. 11 June 2015. CR.</dd>
	<dd>http://dev.w3.org/csswg/css-values/</dd>

	<dt>[CSSOM]</dt>
	<dd>Simon Pieters; Glenn Adams. CSS Object Model (CSSOM). 17 March 2016. WD.</dd>
	<dd>https://drafts.csswg.org/cssom/</dd>

<!-- 
	<dt>[RFC2119]</dt>
 -->

	<dt>[SELECTORS-4]</dt>
	<dd>Selectors Level 4</dd>
	<dd>https://drafts.csswg.org/selectors-4/</dd>

	<dt>[WHATWG-DOM]</dt>
	<dd>Anne van Kesteren. DOM Standard. Living Standard.</dd>
	<dd>https://dom.spec.whatwg.org/</dd>
</dl>

		</section>
		<section id="informative">
<h3 title="Informative References">参照文献（参考）</h3>

<dl>

	<dt>[CSS-BACKGROUNDS-3]</dt>
	<dd>CSS Backgrounds and Borders Module Level 3</dd>
	<dd>https://drafts.csswg.org/css-backgrounds-3/</dd>

	<dt>[CSS-COLOR-4]</dt>
	<dd>CSS Color Module Level 4</dd>
	<dd>https://drafts.csswg.org/css-color-4/</dd>

	<dt>[CSS-EXTENSIONS]</dt>
	<dd>Tab Atkins Jr.. CSS Extensions. ED.</dd>
	<dd>https://drafts.csswg.org/css-extensions/</dd>

	<dt>[CSS2]</dt>
	<dd>Bert Bos; et al. Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification. 7 June 2011. REC.</dd>
	<dd>http://www.w3.org/TR/CSS2</dd>
</dl>


		</section>
	</section>
	<section id="index">
<h2 title="Index">索引</h2>

<p class="trans-note">【
この節の内容は省略（ウィンドウ下端の索引機能を利用されたし）。
】</p>


	</section>
	<section id="property-index">
<h2 title="Property index">プロパティ索引</h2>

<p class="trans-note">【
この節の内容は省略：
この仕様にて定義されるプロパティは <a>--*</a> のみ。
】</p>

	</section>

</main><!-- id="MAIN" -->

<!--% DATA SECTION -->
<div style="display:none;">

<input type="hidden" id="_page_config" value="" />

</div>

<script type="text/plain" id="_link_map1">

	カスタムプロパティ:#custom-property
	置換する:#substitute-a-var
置換され:#substitute-a-var
	算出値の時点で無効:#invalid-at-computed-value-time
	--*:#proddef---
	<variable>:#funcdef-var
	結び付けられているスタイル宣言:#associated-style-declaration
	算出値の時点:#computed-value-time
	<any-value>:#typedef-any-value＊
	置換待ちの値:pending-substitution-value


	<color>:http://www.w3.org/TR/css3-color/#typedef-color
	<color>:css-color-ja.html#typedef-color
	https://drafts.csswg.org/css-color-3/#valuea-def-color

	●https://drafts.csswg.org/css-cascade-3/
継承プロパティ:css-cascade-ja.html#inherited-property
算出値:css-cascade-ja.html#computed-value
継承値:css-cascade-ja.html#inherited-value
初期値:css-cascade-ja.html#initial-value
指定値:css-cascade-ja.html#specified-value
カスケード値:css-cascade-ja.html#cascaded-value
簡略形プロパティ:css-cascade-ja.html#shorthand-property
冗長形プロパティ:css-cascade-ja.html#longhand
カスケード値の処理:css-cascade-ja.html#value-stages
カスケード処理:css-cascade-ja.html#cascade


all:css-cascade-ja.html#propdef-all
unset:css-cascade-ja.html#valdef-all-unset

!important:css-cascade-ja.html#bang-important

transparent:css-color-ja.html#valdef-color-transparent
	https://drafts.csswg.org/css-color-4

	●http://www.w3.org/TR/css3-values/
CSS 全域キーワード:css-values-ja.html#css-wide-keywords
	https://drafts.csswg.org/css-values-3/#css-wide-keywords
	http://www.w3.org/TR/css3-values/#common-keywords


	https://drafts.csswg.org/cssom/
宣言リスト:cssom-ja.html#cssstyledeclaration-declarations
大小区別フラグ:cssom-ja.html#css-declaration-case-sensitive-flag

	●https://drafts.csswg.org/css-syntax-3/
宣言:css-syntax-ja.html#declaration
識別子:css-syntax-ja.html#identifier
<bad-string-token>:css-syntax-ja.html#typedef-bad-string-token
<semicolon-token>:css-syntax-ja.html#typedef-semicolon-token
<bad-url-token>:css-syntax-ja.html#typedef-bad-url-token
<delim-token>:css-syntax-ja.html#typedef-delim-token
<)-token>:css-syntax-ja.html#tokendef-close-paren
<]-token>:css-syntax-ja.html#tokendef-close-square
<}-token>:css-syntax-ja.html#tokendef-close-curly
<declaration-value>:css-syntax-ja.html#typedef-declaration-value


	class="property"
background-color:css-backgrounds-ja.html#background-color
	https://drafts.csswg.org/css-backgrounds-3/
color:css-color-ja.html#propdef-color
margin-top:css22-box-ja.html#propdef-margin-top
	css2/box.html#propdef-margin-top


	class="css"
var():#funcdef-var
calc():css-values-ja.html#funcdef-calc
	http://www.w3.org/TR/css3-values/#funcdef-calc
	.../css-values-3/#calc
	●https://drafts.csswg.org/css-conditional-3/
@media:css-conditional-ja.html#at-ruledef-media
条件付き規則:css-conditional-ja.html#conditional-group-rules


	●https://drafts.csswg.org/css-animations-1/
@keyframes:css-animations-ja.html#at-ruledef-keyframes
animation:css-animations-ja.html#propdef-animation
アニメーション プロパティ:css-animations-ja.html#animation-properties
	css-animations-ja.html#animation

-root:selectors4-ja.html#root-pseudo
-lang:selectors4-ja.html#lang-pseudo
	pseudo
	https://drafts.csswg.org/selectors/#root-pseudo

getPropertyValue():cssom-ja.html#dom-cssstyledeclaration-getpropertyvalue
CSSStyleDeclaration:cssom-ja.html#cssstyledeclaration

ASCII 文字大小無視:http://dom.spec.whatwg.org/#ascii-case-insensitive
</script>

<script type="text/plain" id="_class_map1">
all:value
unset:value
transparent:value

<bad-string-token>:production
<semicolon-token>:production
<bad-url-token>:production
<delim-token>:production
<)-token>:production
<]-token>:production
<}-token>:production
<declaration-value>:production
background-color
background-color:property
color:property
margin-top:property
!important:css

	var():func
calc():func

@media:at-rule
@keyframes:at-rule
animation:property
-root:pseudo
	getPropertyValue():
	CSSStyleDeclaration:
</script>


<script>
new function(){
	var link_map = Util.getMapping('_link_map1');
	link_map[':root'] = link_map['-root'];
	link_map[':lang()'] = link_map['-lang'];
	var class_map = Util.getMapping('_class_map1');
//	var class_map = Object.create(null);
	repeat('dfn', function(e){
		var id = e.id, text = e.textContent;
		if(id && text && !(id in link_map)) {
			link_map[text] = '#' + id;
		}
		if(e.className){
			class_map[text] = e.className;
		}
	});

	repeat('a', function(a){
		if(a.href) return;
		var key = a.textContent;
		if(key.charAt(0) === '['){
			a.href = '#biblio-' + key.slice(1,-1).toLowerCase();
			return;
		}
		var href = link_map[key];
		if(href) {
			a.href = href;
			if(key in class_map) {
				a.className = class_map[key];
			}
		}
	});
}


</script>


<!--% 語彙 -->
<script type="text/plain" id="replace_table">
カスタムプロパティ:custom property
アニメーション:animation
アニメート:animate
アプリケーション:application
インスタンス:instance
インタフェース:interface
ウェブページ:webpage
エラー:error
オブジェクト:object
カスケード:cascade
カスケード処理:cascade
カスケード変数:cascading variable
カスケード値:cascaded value
カスタム:custom
グループ:group
コード:code
コンポーネント:component
	部品
コンマ:comma
サイト:site
サポート:support
スタイル:style
スタイルシート:style sheet
スペース:space
選択子:selector
木:tree
データ:data
テーマ:theme
テキスト:text
テキスト変換:text transformation
デザイン:design
トークン:token
トップレベル:top-level
ファイル:file
フォールバック:fallback
フォールバック機能:fallback
プリミティブ:primitive
ブロック:block
プロパティ:property
下位プロパティ:subproperties
ページ:page
ヘッダ:header
ベンダ:vendor
モジュール:module
ルート:root
レベル:level
具現化法:rendering
キーワード:keyword
依存関係グラフ:dependency graph
解決:resolve
解決法:resolving
概念:concept
拡張-:expand
関数:function
既定:default
規則:rule
空白:whitespace
継承-:inherit
継承:inheritance
継承プロパティ:inherited property
全域:wide
算出値:computed value
初期値:initial value
継承値:inherited value
	検査:checking
媒体:media
	構成子:constructs
構文:syntax
構文規則:syntax rule
構文検査:syntax checking
	一般:general
構文解析:parse
構文解析器:parser
再設定-:reset
	再利用:reuse
作者:author
作者定義:author-defined
仕様:spec
指定値:specified value
	時点:time
式:expression
識別子:identifier
	実装:implementation
	実装-:implement
循環:cyclic
循環-:cycle
循環参照:cyclic reference
循環依存:cyclic dependencies
小文字:lower-case
小文字化:lowercased
上書き:override
条件付き:conditional
色:color
成分:component
正準化:canonicalizing
正準的:canonical
生成規則:production
接頭辞:prefix
宣言-:declare
宣言:declaration
宣言リスト:declarations
	相違:difference
属性:attribute
族:family
妥当:valid
無効:invalid
	妥当でない:invalid
値:value
値型:value type
置換-:substitute
置換:substitution
置換検索:Find-and-Replace
置換値:substitution value
	抽象化:abstract
	注釈文:prose
	直接的:directly
直列化-:serialize
直列化処理:serializing
直列化:serialization
	通常:normal
	定義-:define
	定義:definition
	適合性:conformance
伝播-:propagate
特色機能:feature
認識:realize
	破棄:discard
	破棄:throw away
記法:notation
	付加:prepend
	複合的:composite
	文字:character
文字エスケープ:character escaping
文字大小:character case
	文字大小:case
大小:case
文字大小無視:case-insensitive
文字列:string
空文字列:empty string
空値:empty value
文書:document
文書内:document 内
文法:grammar
変数:variable
変数名:variable name
	編集:editing
名:name
名前:name
	命名:naming
要件:requirements
要素:element
利用者:user
	UA:user agent
簡略形:shorthand
冗長形:longhand
置換待ちの:pending-substitution
保全:preserve
観測:observe

遷移:transition
アニメート:animate
	補間:interpolation
	有向:directed
</script>

<!-- 
ファイルfile
に保持させて
翻訳translationsの
維持管理maintaining
国際化internationalization
の維持管理を
補助aid
容易にease
外へ分離 separating out
現実のreal-world
-->
</body></html>
