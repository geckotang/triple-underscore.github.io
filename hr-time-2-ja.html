<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<title>High Resolution Time Level 2（日本語訳）</title>

<link rel="stylesheet" href="common.css" type="text/css" />
<link rel="stylesheet" href="common-w3c.css" type="text/css" />
<script src="common0.js" ></script>
<script src="common1.js" async></script>

<script>
COMMON_DATA.init = function(expanded){

//	Util.del_j(); //checked 150717 spec

	return {
		original_url: 'http://www.w3.org/TR/hr-time-2/',
		spec_status: 'WD',
		fill_text_link: '#_versions > dd, #references dd',
		main: 'MAIN',
		toc: 'toc',
		hash_case_modified: true,
		alt_refs: 'references',
		ref_id_prefix: 'bib-',
		word_switch: 'replace_table'
	};
}

</script>

<!--% 訳文 id → 原文 id -->
<script type="text/plain" id="_original_id_map">
Performance:idl-def-performance
	Performance:idl-def-Performance
GlobalPerformance:idl-def-globalperformance
	GlobalPerformance:idl-def-GlobalPerformance
DOMHighResTimeStamp:idl-def-domhighrestimestamp
	DOMHighResTimeStamp:idl-def-DOMHighResTimeStamp

dom-Performance-now:dom-performance-now
dom-Performance-translateTime:dom-performance-translateTime
dom-GlobalPerformance-performance:idl-def-globalperformance-performance
</script>


<style >
dl.idl-members > dt {
	font-family: monospace0, monospace;
}
</style>

</head>

<body>

<aside class="trans-meta">
<h1>High Resolution Time Level 2 日本語訳</h1>
<p>
<a id="_THIS_PAGE">このページ</a>
は、
<a href="http://www.w3.org/">W3C</a> により
副題の日付にて作業草案として公開された
<a href="http://www.w3.org/TR/hr-time-2/">High Resolution Time</a>
を日本語に翻訳したものです。
<strong >この翻訳の正確性は保証されません。</strong>
この仕様の公式な文書は英語版であり、この日本語訳は公式のものではありません。
【 と 】で囲まれた部分は<span class="trans-note">【訳者による注釈】</span>です。
（<a href="index.html">他のウェブ関連仕様の一覧と共通機能の詳細</a>）
</p>

<p >
更新：<time>2016-02-07</time>
（公開：<time>2015-07-22</time> ）
</p>

<p>
本文ダブルクリックで当該箇所の原文が表示されます（左下隅に各種 表示切替ボタン — CSS や DOM の対応が古いブラウザでは、一部機能しないことがあります）。
</p>

<address id="_CONTACT">　</address>

</aside>

<header>

<div><a href="http://www.w3.org/" id="_W3C">W3C</a></div>

<h1>高分解能の計時 — High Resolution Time Level 2</h1>
<h2>2016 年 2 月 25 日付 W3C 作業草案</h2>

<dl id="_versions">
	<dt title="This version:">このバージョン</dt>
	<dd>http://www.w3.org/TR/2016/WD-hr-time-2-20160225/</dd>

	<dt title="Latest published version:">最新発行バージョン</dt>
	<dd>http://www.w3.org/TR/hr-time-2/</dd>

	<dt title="Latest editor's Draft:">最新の編集者草案</dt>
	<dd>https://w3c.github.io/hr-time/</dd>

	<dt title="Previous version:">以前のバージョン</dt>
	<dd>http://www.w3.org/TR/2016/WD-hr-time-2-20160204/</dd>


	<dt title="Editor:">編集</dt>
    <dd>Ilya Grigorik, Google Inc.,
<a href="mailto:igrgiroik@gmail.com">igrgiroik@gmail.com</a> (for version 2)
</dd>
	<dd>James Simonsen, Google Inc.,
<a href="mailto:simonjam@google.com">simonjam@google.com</a> (for version 1)</dd>
	<dd>Jatinder Mann, Microsoft Corp.,
<a href="mailto:jmann@microsoft.com">jmann@microsoft.com</a> (Until February 2014)</dd>

	<dt>Repository:</dt>
	<dd><a href="https://github.com/w3c/hr-time/">We are on Github.</a></dd>
	<dd><a href="https://github.com/w3c/hr-time/issues">File a bug.</a></dd>
	<dd><a href="https://github.com/w3c/hr-time/commits/gh-pages/index.html">
Commit history.</a></dd>

	<dt>Mailing list:</dt>
	<dd><a href="https://lists.w3.org/Archives/Public/public-web-perf/">public-web-perf@w3.org</a></dd>

	<dt title="Implementation:">実装</dt>
	<dd><a href="http://caniuse.com/#feat=high-resolution-time">Can I use High Resolution Time?</a></dd>
	<dd><a href="http://w3c-test.org/hr-time/">Test Suite</a></dd>
	<dd><a href="https://github.com/w3c/web-platform-tests/tree/master/hr-time">Test Suite repository</a></dd>

</dl>

<small class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
2016
<a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
(<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
<a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
<a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). 
<abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
<a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
rules apply.
</small>

</header>

	<section id="abstract">
<h2 title="Abstract">要約</h2>

<p>
この仕様は、［
サブミリ秒†の分解能であって, かつ
システムクロックの［
スキュー††や調整
］の対象にされないような，現在時刻
］を供する API を規定する。
<span lang="en">
This specification defines an API that provides the current time in sub-millisecond resolution and such that it is not subject to system clock skew or adjustments.
</span></p>

<p class="trans-note">【†
サブミリ秒の分解能（ sub-millisecond resolution ）：
ミリ秒より（少なくとも一桁は）細かい単位の時間­分解能を表す，この仕様を通して概念的に用いられる語であるが、具体的には
<a href="#desired-resolution" >マイクロ秒­単位の分解能</a>
が念頭に置かれている。
】【††
スキュー（クロック­スキュー, clock skew ）：
概念的には、システムやネットワーク（ NTP ）など，外部に起因する時刻同期のずれを指すと思われる。
】</p>


	</section>

	<section id="sotd">
<h2 title="Status of This Document">この文書の位置付け</h2>


<p>
<em>この節では、発行時点における…</em>
<span class="trans-note">【
以下、この節の他の内容は
<a href="w3c-common-ja.html#status" >W3C 日本語訳 共通ページ</a>
に委譲
】</span></p>


<p>
High Resolution Time Level 2 は、最初のバージョンである High Resolution Time <a>[HR-TIME]</a> を置き換え、次を含む：
<span lang="en">
High Resolution Time Level 2 replaces the first version of High Resolution Time [HR-TIME] and includes:
</span></p>

<ul>
	<li>
処理能­時系列線に関係する すべての仕様の目的に，<a>起点時刻</a>を精確に定義する。
<span lang="en">
Defines a precise definition of time origin for the purpose of all performance timeline related specifications;
</span></li>
	<li>
<a>Performance</a> インタフェースに対し、
Web Workers <a>[WORKERS]</a> における <a>Performance.now()</a> メソッドのサポートも含めた，基底の定義を提供する。
<span lang="en">
Provides the base definition for the Performance interface, including support for the Performance.now method in Web Workers [WORKERS];
</span></li>

	<li>
<a>起点時刻</a>が異なる時刻どうしを比較する，
<a>Performance.translateTime()</a> メソッドを導入する。
<span lang="en">
Introduces the method Performance.translateTime to compare times between different time origins;
</span></li>

	<li>
キャッシュ攻撃を軽減するため、
<a>Performance</a> インタフェースには、推奨される分解能として， 5 マイクロ秒までの細かさに設定されるべきである。
<span lang="en">
To mitigate cache attacks, the recommended minimum resolution of the Performance interface should be set to 5 microseconds.
</span></li>
</ul>

<p>
<a>Performance.translateTime()</a> メソッドは、
実装­経験の不足から，
High Resolution Time 2 を W3C 勧告へ移行させるにあたって
<a href="http://www.w3.org/2015/Process-20150901/#candidate-rec">リスク下にある</a>。
それは、次のリリースまで先送りされることが予期されている。
<span lang="en">
The method Performance.translateTime is marked as "at risk" to the purpose of moving High Resolution Time 2 to W3C Recommendation due to its lack of implementation experience. It is expected to be deferred until the next release.
</span></p>

<p>
この文書は
<a href="http://www.w3.org/2010/webperf/">Web Performance</a>
Working Group により作業草案として発行されました。
<span lang="en">
This document was published by the Web Performance Working Group as a Working Draft. This document is intended to become a W3C Recommendation. If you wish to make comments regarding this document, please send them to public-web-perf@w3.org (subscribe, archives) with [hr-time] at the start of your email's subject. All comments are welcome.
</span></p>


<p>
コメントがあれば、件名の先頭に
<samp>[HighResolutionTime]</samp>
と記した上で
<a href="mailto:public-web-perf@w3.org?subject=%5BHighResolutionTime%5D%20">public-web-perf@w3.org</a>
(<a href="http://lists.w3.org/Archives/Public/public-web-perf/">archived</a>)
宛まで送られるよう願います。
<span lang="en">
Please send comments to public-web-perf@w3.org (archived) with [HighResolutionTime] at the start of the subject line.
</span></p>

<!-- 
This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the W3C technical reports index at http://www.w3.org/TR/.

This is a work in progress and may change without any notices.

High Resolution Time Level 2 replaces the first version of High Resolution Time [HR-TIME] and includes:

    provides the base definition for the Performance interface, including support for the Performance.now method in Web Workers [WORKERS];
    To mitigate cache attacks, the recommended minimum resolution of the Performance interface should be set to 5 microseconds.

This document was published by the Web Performance Working Group as a Working Draft. This document is intended to become a W3C Recommendation. If you wish to make comments regarding this document, please send them to public-web-perf@w3.org (subscribe, archives) with [hr-time] at the start of your email's subject. All comments are welcome.

Publication as a Working Draft does not imply endorsement by the W3C Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.

This document was produced by a group operating under the 5 February 2004 W3C Patent Policy. W3C maintains a public list of any patent disclosures made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains Essential Claim(s) must disclose the information in accordance with section 6 of the W3C Patent Policy.

This document is governed by the 1 September 2015 W3C Process Document. 
 -->

	</section>

<nav class="toc" id="toc">
<h2 title="Table of Contents">目次</h2>
<!-- to be replaced with generated toc --></nav>

<main id="MAIN">

	<section id="introduction">
<h2 title="Introduction">1. 序論</h2>

<p>
この節は規定ではない。
<span lang="en">
This section is non-normative.
</span></p>

<p>
ECMAScript 言語仕様
<a>[ECMA-262]</a>
は、 1970 年 1 月 1 日 UTC からのミリ秒­単位による時間を表現する時刻値として， Date オブジェクトを定義する。
ほとんどの目的においては、この，ミリ秒­単位の値で 1970 年 1 月 1 日 UTC から約 28 万 5616 年間の，どの時刻も表現し得る定義で足りる。
<a>DOMTimeStamp</a>
も同様に定義されている。
<a>[WebIDL]</a>
<span lang="en">
The ECMAScript Language specification [ECMA-262] defines the Date object as a time value representing time in milliseconds since 01 January, 1970 UTC. For most purposes, this definition of time is sufficient as these values represent time to millisecond precision for any instant that is within approximately 285,616 years from 01 January, 1970 UTC. The DOMTimeStamp is defined similarly [WebIDL].
</span></p>

<p>
実施において，これらの定義による時刻は、システムクロックのクロック­スキューと調整のいずれの対象にもなる。
時刻値は常に単調増加するとは限らず，後続の値が減少する, もしくはそのまま変わらないこともある。
<span lang="en">
In practice, these definitions of time are subject to both clock skew and adjustment of the system clock. The value of time may not always be monotonically increasing and subsequent values may either decrease or remain the same.
</span></p>

<div class="example">
<p>
例えば，次のスクリプトは、正の値, 負の値, ゼロを出力し得る。
<span lang="en">
For example, the following script may log a positive number, negative number, or zero.
</span><span lang="en">
Example 1
</span></p>

<pre>var mark_start = Date.now();
doTask(); // <span class="comment" title="Some task">何らかのタスク</span>
if (window.console) {
   window.console.log('Duration of task: ' + (Date.now() - mark_start));
}
</pre>
</div>

<p>
この定義による時刻では、サブミリ秒の分解能はなく, システムクロック­スキューの対象になるので、ある種のタスクには不足する。
例えば，
<span lang="en">
For certain tasks this definition of time may not be sufficient as it does not allow for sub-millisecond resolution and is subject to system clock skew. For example,
</span></p>


<ul>
	<li>
<p>
文書ナビゲーション, リソース取得, スクリプト実行
などに要した時間を正確に計測しようとする際に、サブミリ秒の分解能の 単調増加するクロックが望まれる。
<span lang="en">
When attempting to accurately measure the elapsed time of navigating to a Document, fetching of resources or execution of script, a monotonically increasing clock with sub-millisecond resolution is desired.
</span></p>
	</li>
	<li>
<p>
スクリプトからアニメーションの状態を計算する際には、開発者は，アニメーションを次の場面へ正しく更新するために，アニメーション内で経過した時間の長さを正確に知る必要がある。
<span lang="en">
When calculating the animation state from script, developers will need to accurately know the amount of time that has elapsed in the animation in order to properly update the next scene of the animation.
</span></p>
	</li>
	<li>
<p>
スクリプトに基づくアニメーションのフレームレートを計算する際には、開発者は，アニメーションが 60 FPS で描画されているかどうか決定するために、サブミリ秒の分解能が必要になる。
分解能がサブミリ秒に足りなければ、 58.8 FPS と 62.5 FPS を区別するのが限界になる。
<span class="trans-note">【１フレームあたり前者が 1/58.8 = 約 0.017 秒, 後者は 0.016 秒で，その差 1/1000 秒】</span>
<span lang="en">
When calculating the frame rate of a script based animation, developers will need sub-millisecond resolution in order to determine if an animation is drawing at 60 FPS. Without sub-millisecond resolution, a developer can only determine if an animation is drawing at 58.8 FPS or 62.5 FPS.
</span></p>
	</li>
	<li>
<p>
音声をアニメーションの中の特定の時点に挿入したり, アニメーションに同期させるためには、開発者は，アニメーションと音声において経過した時間の長さを正確に知る必要がある。
<span lang="en">
In order to cue audio to a specific point in an animation or ensure that the audio is synchronized with the animation, developers will need to accurately know the amount of time elapsed in the animation and audio.
</span></p>
	</li>
</ul>

<p>
この仕様は <code>Date.now()</code> <a>[ECMA-262]</a>
のふるまいの変更を提案するものではない。
それは、暦における現在の時刻値を決定する点においては純粋に有用であり，長い利用の歴史がある。
サブミリ秒の分解能で単調増加する時刻値を供する
<a>DOMHighResTimeStamp</a>
型と
<a>Performance</a> インタフェースの <a>Performance.now()</a> メソッドが、この節に要約された課題を解決するものになる。
<span lang="en">
This specification does not propose changing the behavior of Date.now() [ECMA-262] as it is genuinely useful in determining the current value of the calendar time and has a long history of usage. The DOMHighResTimeStamp type and the Performance.now method of the Performance interface resolve the issues summarized in this section by providing a monotonically increasing time value in sub-millisecond resolution.
</span></p>

		<section id="examples">
<h3 title="Examples">1.1. 例</h3>

<p>
この節は規定ではない。
<span lang="en">
This section is non-normative.
</span></p>

<p>
開発者は
<a>起点時刻</a>が異なる
<a>専用ワーカ</a>／ <a>共用ワーカ</a>
からのイベントも含め，アプリ全体にわたる時系列線†を構築したいと望むこともある。
<a>Performance.translateTime()</a> メソッドにより，ワーカから得られた <a>DOMHighResTimeStamp</a> を変換すれば、アプリは，そのようなイベントを同じ時系列線­上に表示できるようになる。
<span lang="en">
A developer may wish to construct a timeline of their entire application, including events from dedicated or shared workers, which have a different time origin. To display such events on the same timeline, the application can translate the DOMHighResTimeStamps from the worker with the Performance.translateTime method.
</span></p>

<p class="trans-note">【†
時系列線（ timeline ）：
生じたイベントをその時刻とともに時系列順に記録するもの。
】</p>


<div class="example">
Example 2

<pre>
// ---- worker.js -----------------------------
// <span class="comment"
	title="Shared worker script"
	><a>共用ワーカ</a>スクリプト</span>
onconnect = function(e) {
  var port = e.ports[0];
  port.onmessage = function(e) {
    // <span class="comment"
	title="Time execution in worker"
	>ワーカ内のTime execution</span>
    var task_start = performance.now();
    result = runSomeWorkerTask();
    var task_end = performance.now();

    port.postMessage({
       'task': 'Some worker task',
       'start_time': task_start,
       'end_time': task_end,
       'result': result
    });
  }
}

</pre>

<pre >
// ---- application.js ------------------------
// <span class="comment"
	title="Timing tasks in the document"
	>文書における計時タスク</span>
var task_start = performance.now();
result = runSomeWorkerTask();
var task_end = performance.now();

plotEventOnTimeline({
  'task': 'Some document task',
  'start_time': task_start,
  'end_time': task_end,
  'result': result
});
</pre>

<pre >
// <span class="comment"
	title="Translating worker timestamps into document's time origin"
	>ワーカにおける時刻印を文書の起点時刻へ変換する</span>
var worker = new SharedWorker('worker.js');
worker.port.onmessage = function (event) {
  var msg = event.data;

  // <span class="comment"
	title="translate timestamps into document's time origin"
	>時刻印を文書の起点時刻に変換する</span>
  msg.start_time = performance.translateTime(msg.start_time, worker);
  msg.end_time = performance.translateTime(msg.end_time, worker);

  // <span class="comment"
	title="plot the results on document's timeline"
	>結果を文書の時系列線にプロットする</span>
  plotEventOnTimeline(msg);
}

</pre>

</div>

		</section>


	</section>
	<section id="conformance">
<h2 title="Conformance">2. 適合性</h2>

<p class="trans-note">【
この節の内容は
<a href="w3c-common-ja.html#conformance" >W3C 日本語訳 共通ページ</a>
に委譲
】</p>

	</section>
	<section id="time-origin-1">
<h2 title="Time Origin">3. 起点時刻</h2>

<p >
<dfn id="time-origin">起点時刻</dfn>（ time origin ）とは、時間を計測する起点になる時刻­値であり，次で定義される：
<span lang="en">
The time origin is the time value from which time is measured.
</span></p>

<ul>
	<li>
<p>
<a>大域オブジェクト</a> <a>[HTML51]</a>
が <code>Window</code> オブジェクトの場合：
<a>起点時刻</a>は，次に等しくされなければ<em>ならない</em>：
<span lang="en">
If the global object [HTML51] is a Window object, the time origin must be equal to:
</span></p>
		<ul>
			<li>
前の文書がない場合：
最初に<a>閲覧文脈が作成され</a>た時刻。
<span lang="en">
the time when the browsing context is first created if there is no previous document;
</span></li>
			<li>
他の場合， <a>prompt to unload</a> アルゴリズムの間に利用者に確認ダイアログが表示された場合：
利用者がナビゲーションを確認した時刻。
<span lang="en">
otherwise, the time of the user confirming the navigation if a confirmation dialog is displayed during the prompt to unload algorithm;
</span></li>
			<li>
他の場合：
<a>Window オブジェクトの最新の Document オブジェクト</a>
を読み込む責を負う<a>ナビゲーション</a>を開始した時刻
<span lang="en">
otherwise, the time of starting the navigation responsible for loading the Window object's newest Document object.
</span></li>
		</ul>
	</li>

	<li>
<a>大域オブジェクト</a>が <a>WorkerGlobalScope</a> オブジェクトである場合：
<a>起点時刻</a>は，ワーカの<a>公式的な作成時</a>に等しくされなければ<em>ならない</em>。
<a>[WORKERS]</a>
<a>[SERVICE-WORKERS]</a>
<span lang="en">
If the global object is a WorkerGlobalScope object, the time origin must be equal to the official moment of creation of the worker. [WORKERS] [SERVICE-WORKERS]
</span></li>

	<li>
他の場合の<a>起点時刻</a>は、未定義である。
<span lang="en">
Otherwise, the time origin is undefined.
</span></li>
</ul>


	</section>
	<section id="dom-domhighrestimestamp">
<h2 title="The DOMHighResTimeStamp Type">4. <code>DOMHighResTimeStamp</code> 型</h2>

<p>
<a>DOMHighResTimeStamp</a>
型は、［
<a>起点時刻</a>から相対的に計測された時刻値
］, あるいは［
２つの
<a>DOMHighResTimeStamp</a> 間の時間­差を表現する時刻値
］の記録に利用されるものである。
<span lang="en">
The DOMHighResTimeStamp type is used to store a time value measured relative from the time origin or a time value that represents a duration between two DOMHighResTimeStamps.
</span></p>


<pre class="idl">
typedef double <dfn id="DOMHighResTimeStamp">DOMHighResTimeStamp</dfn>;
</pre>

<p id="desired-resolution">
<a>DOMHighResTimeStamp</a>
は、ミリ秒­単位による時間を 5 マイクロ秒の精度で表現する<em>べき</em>である。
<a href="#privacy-security">プライバシーとセキュリティ</a>
節を見よ
<span lang="en">
A DOMHighResTimeStamp SHOULD represent a time in milliseconds accurate to 5 microseconds - see 8. Privacy and Security.
</span></p>

<p class="note">注記：
利用者エージェントは、ハードウェアまたはソフトウェア上の制約から， 5 マイクロ秒の精度の時刻値を供することができない場合には、
<a>DOMHighResTimeStamp</a>
をミリ秒­精度による時間として，表現できる。
<span lang="en">
Note
</span><span lang="en">
If the User Agent is unable to provide a time value accurate to 5 microseconds due to hardware or software constraints, the User Agent can represent a DOMHighResTimeStamp as a time in milliseconds accurate to a millisecond.
</span></p>



	</section>
	<section id="the-performance-interface">
<h2 title="The Performance interface">5. <code>Performance</code> インタフェース</h2>


<pre class="idl">
[Exposed=(Window,Worker)]
interface <dfn id="Performance">Performance</dfn> : EventTarget {
    <a>DOMHighResTimeStamp</a> <a>now()</a>;
    <a>DOMHighResTimeStamp</a> <a>translateTime</a> (
        <a>DOMHighResTimeStamp</a> <var>time</var>,
        (Window or Worker or SharedWorker or ServiceWorker) <var>timeSource</var>
    );
    serializer = {attribute};
};
</pre>

<dl class="idl-members" id="methods">
	<dt id="dom-Performance-now">DOMHighResTimeStamp now()</dt>
	<dd>
<p>
このメソッドは、 <a>起点時刻</a>から，このメソッドの呼び出しが生じた時点までのミリ秒­数を表現する，
<a>DOMHighResTimeStamp</a>
を返さなければ<em>ならない</em>。
<span lang="en">
The now() method MUST return a DOMHighResTimeStamp representing the time in milliseconds from the time origin to the occurrence of the call to the Performance.now method.
</span></p>

	</dd>

	<dt id="dom-Performance-translateTime">DOMHighResTimeStamp translateTime(<var>time</var>, <var>timeSource</var>)</dt>
	<dd>
<p>
このメソッドは、次の式の結果で与えられる <a>DOMHighResTimeStamp</a> を返さなければ<em>ならない</em>：
</p>

<blockquote>
<var>time</var> + ( <var>originSource</var> − <var>originTranslate</var> )
</blockquote>

<p>
ここで：
</p>

<ul>
	<li>
<var>originSource</var> := 
［
供された <var>timeSource</var> オブジェクトに結び付けられている<a>大域オブジェクト</a>
］の<a>起点時刻</a>
</li>

	<li>
<var>originTranslate</var> := ［［

このメソッドの call に対する this 値である
performance オブジェクト
］に結び付けられている<a>大域オブジェクト</a>
］の<a>起点時刻</a>
</li>
</ul>

<span lang="en">
The translateTime(time, timeSource) method MUST return a DOMHighResTimeStamp as follows:
</span><span lang="en">
Let time be the value of the provided time argument.
</span><span lang="en">
Let originSource be the time origin of the global object associated with the provided timeSource object.
</span><span lang="en">
Let originTranslate be the time origin of the global object associated with the performance object that is the this value for the Performance.translateTime call.
</span><span lang="en">
Return time + (originSource - originTranslate)
</span></dd>

	<dt id="serializer">serializer</dt>
	<dd>
このインタフェースのインスタンスは、
各 直列化可能な属性からなるエントリの map として直列化される
<span lang="en">
Instances of this interface are serialized as a map with entries for each of the serializable attributes.
</span></dd>

</dl>

	</section>
	<section id="the-performance-attribute">
<h2 title="The performance attribute">6. <code>performance</code> 属性</h2>

<p>
<a>GlobalPerformance.performance</a> 属性は、
<a>大域オブジェクト</a>からの，［
処理能に関係する 属性とメソッド
］へアクセスできるようにする。
<span lang="en">
The GlobalPerformance.performance attribute allows access to performance related attributes and methods from the global object.
</span></p>

<pre class="idl">
[NoInterfaceObject,
Exposed=(Window,Worker)]
interface <dfn id="GlobalPerformance">GlobalPerformance</dfn> {
    [Replaceable]
    readonly    attribute <a>Performance</a> <dfn id="dom-GlobalPerformance-performance">performance</dfn>;
};

Window implements <a>GlobalPerformance</a>;

<a>WorkerGlobalScope</a> implements <a>GlobalPerformance</a>;
</pre>

	</section>
	<section id="monotonic-clock">
<h2 title="Monotonic Clock">7. 単調増加クロック</h2>
<p>
同じ<a>起点時刻</a>を伴う
<a>Performance</a> オブジェクト上で <a>Performance.now()</a> メソッドを呼び出した際に返される時刻値は、単調増加しなければ<em>ならない</em>
— システムクロック調整やシステムクロック­スキューの対象にされては<em>ならない</em>。
<a>Performance.now()</a> メソッドから返されるどの２つの時刻値についても、
２つの値の<a>起点時刻</a>が同じならば、より未来の call から返される値は，より過去の call から返される値 以上でなければ<em>ならない</em>。
起点時刻が異なる２つの時系列に記録された時刻値の比較には
<a>Performance.translateTime()</a> が利用されなければ<em>ならない</em>。
<span lang="en">
The time values returned when calling the Performance.now method on Performance objects with the same time origin MUST be monotonically increasing and not subject to system clock adjustments or system clock skew. The difference between any two chronologically recorded time values returned from the Performance.now method MUST never be negative if the two time values have the same time origin. Performance.translateTime MUST be used to compare two chronologically recorded time values of different time origin.
</span></p>

	</section>
	<section id="privacy-security">
<h2 title="Privacy and Security">8. プライバシーとセキュリティ</h2>

<p>
キャッシュ攻撃（ cache attack ）と統計的指紋収集（ statistical fingerprinting ）は、悪意のあるウェブサイトが，［
利用者たちを分別したり, 場合によっては特定の利用者を識別する
］ために［
ブラウザやアプリから起動される種々の演算による，高­分解能の計時データ
］を利用し得るときの、プライバシーとセキュリティ上の懸念である
— <a>[CACHE-ATTACKS]</a> を見よ。
その種の攻撃を軽減するため、
<a>Performance</a> インタフェースには、推奨される分解能として， 5 マイクロ秒までの細かさに設定されるべきである。
<span lang="en">
Cache attacks and statistical fingerprinting is a privacy and security concern where a malicious web site may use high resolution timing data of various browser or application-initiated operations to differentiate between subset of users, and in some cases identify a particular user - see [CACHE-ATTACKS]. To mitigate such attacks, the recommended minimum resolution of the Performance interface should be set to 5 microseconds.
</span></p>


	</section>
	<section id="acknowledgments">
<h2 title="Acknowledgments">A. 謝辞</h2>

<p>
次の方々によるこの仕事への寄与に感謝する：
</p>

<p>
The editors would like to thank the following people for contributing to this specification: Karen Anderson, Nat Duca, Tony Gentilcore, Arvind Jain, Jason Weber, Boris Zbarsky, Yossef Oren, Vasileios P. Kemerlis, Simha Sethumadhavan, and Angelos D. Keromytis to acknowledge their contributions to this work.
</p>
	</section>

</main><!-- id="MAIN" -->


	<section id="references">
<h2 title="References">B. 参照文献</h2>

		<section id="normative-references">
<h3 title="Normative references">B.1. 文献（規定）</h3>




<dl class="bibliography" resource="">

	<dt>[HTML51]</dt>
	<dd>Simon Pieters; Anne van Kesteren; Philip Jägenstedt; Domenic Denicola; Ian Hickson; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Robin Berjon. HTML 5.1. 8 October 2015. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/html51/</dd>

	<dt>[RFC2119]</dt>
	<dd>S. Bradner. Key words for use in RFCs to Indicate Requirement Levels. March 1997. Best Current Practice.</dd>
	<dd>https://tools.ietf.org/html/rfc2119</dd>

	<dt>[SERVICE-WORKERS]</dt>
	<dd>Alex Russell; Jungkee Song; Jake Archibald. Service Workers. 25 June 2015. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/service-workers/</dd>

	<dt>[WORKERS]</dt>
	<dd>Ian Hickson. Web Workers. 24 September 2015. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/workers/</dd>

	<dt>[WebIDL]</dt>
	<dd>Cameron McCormack; Boris Zbarsky. WebIDL Level 1. 4 August 2015. W3C Working Draft.</dd>
	<dd>http://www.w3.org/TR/WebIDL-1/</dd>
</dl>

		</section>
		<section id="informative-references">
<h3 title="Informative references">B.2. 文献（参考）</h3>

<dl class="bibliography" resource="">

	<dt>[CACHE-ATTACKS]</dt>
	<dd>Yossef Oren; Vasileios P. Kemerlis; Simha Sethumadhavan; Angelos D. Keromytis. The Spy in the Sandbox - Practical Cache Attacks in Javascript. March 2015.</dd>
	<dd>http://arxiv.org/abs/1502.07373</dd>

	<dt>[ECMA-262]</dt>
	<dd>ECMAScript Language Specification.</dd>
	<dd>https://tc39.github.io/ecma262/</dd>

	<dt>[HR-TIME]</dt>
	<dd>Jatinder Mann. High Resolution Time. 17 December 2012. W3C Recommendation.</dd>
	<dd>http://www.w3.org/TR/hr-time/</dd>
</dl>


		</section>
	</section>


<!--% DATA SECTION -->
<div style="display:none;">

<input type="hidden" id="_page_config" value="" />

<script id="replace_table" type="text/plain">

時刻値:time value
時刻印:timestamp
時系列:chronological
時系列線:timeline
計時:timing
計測:measure
時間:time
時刻:time
起点時刻:time origin
現在時刻:current time
分解能:resolution
	精度:accurate

ミリ秒:milliseconds
サブミリ秒:sub-millisecond
クロック:clock
システムクロック:system clock
スキュー:skew


セキュリティ:security
単調増加:monotonic
単調増加-:monotonic に increaseする
減少-:decrease
	時刻: 4
	時間: 5
	時間­差: 1
	統計的指紋収集:statistical fingerprinting
	記録: 1
	開始時: 1
	高精度: 1
	高精度計時: 1
アニメーション:animation
アプリ:application
アルゴリズムalgorithm
インタフェース:interface
ウェブサイト:web site
エージェント:agent
オブジェクト:object
キャッシュ:cache
スクリプト:script
スクリプト実行:execution of script
ソフトウェア:software
タスク:task
インスタンス:instance
直列化可能:serializable
直列化-:serialize
エントリ:entry
データ:data
ナビゲーション:navigation
文書ナビゲーション:navigating to a Document
ハードウェア:hardware
フレーム:frame
フレームレート:frame rate
ブラウザ:browser
プライバシー:privacy
プロットplot
マイクロ秒:microseconds
メソッド:method
リソース取得:fetching of resources
プロット:plot
イベント:event
任意選択:optional
公式的:official
	公式的な作成時	official moment of creation
ワーカ:worker
共用ワーカ:shared worker
専用ワーカ:dedicated worker
利用者:user
変換:translate
大域オブジェクト:global object
属性:attribute
型:type
拡張:extension
攻撃:attack
文書:document
	細かさに:minimum 
演算:operation
確認ダイアログ:confirmation dialog
確認-:confirm
表示-:display
要件:requirements
訪問-:visit
調整:adjustment
識別-:identify
起動-:initiate
軽減-:mitigate 
適合性:conformance
閲覧文脈:browsing context
音声:audio
構築-:contruct
開発者:developer
同期-:synchronize
作成-:create
作成時:create 時
相対的:relative
実施:practice
推奨-:recommend
処理能:performance
関係-:relate
計算-:calculate
仕様:spec
経過-:elapse
定義-:define
定義:definition
状態:state
暦:calendar
有用:useful
純粋:genuine
	要約
解決-:resolve
課題:issue
未定義:undefined
アクセス:access
懸念:concern
表現-:represent
</script>


<script type="text/plain" id="_link_map1">
Performance.now():#dom-Performance-now
now():#dom-Performance-now
translateTime:#dom-Performance-translateTime
Performance.translateTime():#dom-Performance-translateTime
translateTime():#dom-Performance-translateTime
time-Window-Worker-SharedWorker-ServiceWorker-timeSource

GlobalPerformance.performance:#dom-GlobalPerformance-performance
performance:#dom-GlobalPerformance-performance
	起点時刻:#time-origin

DOMTimeStamp:http://www.w3.org/TR/WebIDL/#common-DOMTimeStamp
WorkerGlobalScope:~WORKERS#the-workerglobalscope-common-interface

	Window
	Worker
	SharedWorker
	ServiceWorker
	EventTarget


	HTML5:http://www.w3.org/TR/html51/
	High Resolution Time:http://www.w3.org/TR/hr-time/
	Web Workers:http://www.w3.org/TR/workers/
閲覧文脈が作成され:~HTML5/browsers.html#creating-a-new-browsing-context
専用ワーカ:~WORKERS#worker
共用ワーカ:~WORKERS#sharedworker
公式的な作成時:~WORKERS#official-moment-of-creation

大域オブジェクト:~WAPI#global-object
	~HTML5/webappapis.html#global-object
ナビゲーション:~HTML5/browsers.html#navigate
prompt to unload:~HTML5/browsers.html#prompt-to-unload-a-document
Window オブジェクトの最新の Document オブジェクト:~HTML5/browsers.html#dom-document-2


</script>
<!-- 
	repeat('a[href^="~"]', function(e){
		e.href = e.getAttribute('href')
			.replace(/~\w+/, function(s){ return (map0[s] || s);});
	});

-->

<script>
new function(){
	var map0 = {
		TR: 'http://www.w3.org/TR',
		HTML5: 'http://www.w3.org/TR/html5',
		IETF: 'https://tools.ietf.org/html',
		WAPI: 'webappapis-ja.html',
		WORKERS: 'Workers-ja.html',
	};

	var href_map = Util.getMapping('_link_map1', {
		replacer: function(s){
			return s.replace(/~(\w+)/g, function(s, t){
				return (map0[t] || s);
			})
		}
	});
	repeat('dfn[id]', function(e){
		var text = e.textContent;
		href_map[text] = '#' + e.id;
		wrap(e, text);
	});

	repeat('a:not([href])', function(e){
		var text = e.textContent;
		var href = wrap(e, text);
		href = href_map[text] || href;
//		if(href) e.href = href;
		if(href) e.setAttribute('href', href);
	});

	repeat('em', function(e){
		switch(e.textContent){
		case 'ならない':
		case 'べき':
		case 'よい':
			e.className = 'rfc2119';
		}
	});


	function wrap(e, text){
		text = text || e.textContent;
		if(text.charAt(0) === '['){
			return '#bib-' + text.slice(1,-1);
		}
		var is_code = /^[\w\."\(\)]+$/.test(text);
		if(!is_code) return;

		if(text.charAt(0) === '"'){
			e.innerHTML = '"<code class="literal">'
				+ text.slice(1,-1)
				+'</code>"';
			return;
		} else if(e.parentNode.tagName !== 'PRE') {
			var c = C('code');
			c.textContent = text;
			e.textContent = '';
			e.appendChild(c);
		}
		return '#widl-PerformanceNavigationTiming-' + text;
	}
}
</script>

</div>

</body>
</html>

